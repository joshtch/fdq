"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Solver=function(){function a(){var a={_class:"$config",allVarNames:[],_varNamesTrie:Lf(),varStratConfig:k(),valueStratName:"min",targetedVars:"all",varDistOptions:{},beforeSpace:void 0,afterSpace:void 0,rngCode:"",_defaultRng:void 0,allConstraints:[],constantCache:{},initialDomains:[],_propagators:[],_varToPropagators:[],_constrainedAway:[],_constraintHash:{}};return a}function b(a,b){var c=a.varStratConfig,d=a.valueStratName,e=a.targetedVars,f=a.varDistOptions,g=a.constantCache,h=a.allVarNames,i=a.allConstraints,j=a.initialDomains,k=a._propagators,l=a._varToPropagators,m=a._constrainedAway,n={_class:"$config",_varNamesTrie:Lf(h),varStratConfig:c,valueStratName:d,targetedVars:e instanceof Array?e.slice(0):e,varDistOptions:JSON.parse(JSON.stringify(f)),rngCode:a.rngCode,_defaultRng:a.rngCode?void 0:a._defaultRng,constantCache:g,allVarNames:h.slice(0),allConstraints:i.slice(0),initialDomains:b?b.map(sc):j,_propagators:k&&k.slice(0),_varToPropagators:l&&l.slice(0),_constrainedAway:m&&m.slice(0),_constraintHash:{}};return n}function c(a){return d(a,!0)}function d(a,b){return j(a,b,ec(sg,tg))}function e(a,b,c){return b===c?h(a,b):f(a,!0,b,c)}function f(a,b,c,d){var e=ec(c,d);return j(a,b,e)}function g(a,b,c,d,e){return j(a,b,tc(c),d,e)}function h(a,b){return void 0!==a.constantCache[b]?a.constantCache[b]:i(a,!0,b)}function i(a,b,c){var d=ec(c,c);return j(a,b,d)}function j(a,b,c,d){var e=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(e){var f=Xf(a._varNamesTrie,b);return void(a.initialDomains[f]=c)}var g=a.allVarNames,h=g.length;b===!0?b="__"+String(h)+"__":("string"!=typeof b&&dd("Var names should be a string or anonymous, was: "+JSON.stringify(b)),b||dd("Var name cannot be empty string"),String(parseInt(b,10))===b&&dd("Don't use numbers as var names ("+b+")")),h<100&&Zf(a._varNamesTrie,b)&&dd("Var name already part of this config. Probably a bug?",b);var i=la(c);return i===ug||a.constantCache[i]||(a.constantCache[i]=h),a.initialDomains[h]=c,a.allVarNames.push(b),Rf(a._varNamesTrie,b,h),h}function k(a){return{_class:"$var_strat_config",type:a&&a.type||"naive",priorityByName:a&&a.priorityByName,_priorityByIndex:void 0,inverted:!(!a||!a.inverted),fallback:a&&a.fallback}}function l(a,b,c,d){"varStratOverride"===b&&dd("deprecated, should be wiped internally");var e=!1;switch(b){case"varStrategyFallback":e=!0;case"varStrategy":"function"==typeof c&&dd("functions no longer supported",c),"string"==typeof c&&dd("strings should be passed on as {type:value}",c),"object"!==("undefined"==typeof c?"undefined":_typeof(c))&&dd("varStrategy should be object",c),c.name&&dd("name should be type"),c.dist_name&&dd("dist_name should be type");var f=k(c);if(e){for(var g=a.varStratConfig;g.fallback;)g=g.fallback;g.fallback=f}else for(a.varStratConfig=f;f.fallback;)f.fallback=k(f.fallback),f=f.fallback;break;case"valueStrategy":a.valueStratName=c;break;case"targeted_var_names":c&&c.length||dd("ONLY_USE_WITH_SOME_TARGET_VARS"),a.targetedVars=c;break;case"varStratOverrides":for(var h in c)l(a,"varValueStrat",c[h],h);break;case"varValueStrat":if(a.varDistOptions||(a.varDistOptions={}),a.varDistOptions[d]=c,"markov"===c.valtype){var i=c.matrix;i||(c.expandVectorsWith?i=c.matrix=[{vector:[]}]:dd("Solver: markov var missing distribution (needs matrix or expandVectorsWith)"));for(var j=0,m=i.length;j<m;++j){var n=i[j];n["boolean"]&&dd("row.boolean was deprecated in favor of row.boolVarName"),void 0!==n.booleanId&&dd("row.booleanId is no longer used, please use row.boolVarName");var o=n.boolVarName;"function"==typeof o&&(o=o(c)),o&&("string"!=typeof o&&dd("row.boolVarName, if it exists, should be the name of a var or a func that returns that name, was/got: "+o+" ("+("undefined"==typeof o?"undefined":_typeof(o))+")"),n._boolVarIndex=Xf(a._varNamesTrie,o))}}break;case"beforeSpace":a.beforeSpace=c;break;case"afterSpace":a.afterSpace=c;break;case"var":return dd("REMOVED. Replace `var` with `varStrategy`");case"val":return dd("REMOVED. Replace `var` with `valueStrategy`");case"rng":"string"==typeof c?a.rngCode=c:"number"==typeof c?a.rngCode="return "+c+";":a._defaultRng=c;break;default:dd("unknown option")}}function m(a,b){a._propagators.push(b)}function n(a){for(var b=new Array(a.allVarNames.length),c=a._propagators,d=a.initialDomains,e=0,f=c.length;e<f;++e){var g=c[e];o(g.index1,d,b,e),g.index2>=0&&o(g.index2,d,b,e),g.index3>=0&&o(g.index3,d,b,e)}a._varToPropagators=b}function o(a,b,c,d){var e=b[a];vb(e)||(c[a]?c[a].indexOf(d)<0&&c[a].push(d):c[a]=[d])}function p(a,b,d,f){var g=b,i=void 0,j=!1;switch(b){case"reifier":j=!0,g=f;case"plus":case"min":case"ring-mul":case"ring-div":case"mul":case"sum":case"product":var k="product"===b||"sum"===b;i=k?f:d[2];var l=void 0;void 0===i?(l=j?e(a,0,1):c(a),i=a.allVarNames[l]):"number"==typeof i?(l=h(a,i),i=a.allVarNames[l]):"string"!=typeof i?dd("expecting result var name to be absent or a number or string: `"+i+"`"):(l=Xf(a._varNamesTrie,i),l<0&&dd("Vars must be defined before using them ("+i+")")),k?f=l:d[2]=i;break;case"distinct":case"eq":case"neq":case"lt":case"lte":case"gt":case"gte":break;default:dd("UNKNOWN_PROPAGATOR "+b)}if(q(a,d),s(a,g+"|"+d.join(","),i))return i;var m=r(a,d);if(!t(a,b,m,f)){var n=J(b,m,f);a.allConstraints.push(n)}return i}function q(a,b){for(var c=0,d=b.length;c<d;++c)if("number"==typeof b[c]){var e=h(a,b[c]);b[c]=a.allVarNames[e]}}function r(a,b){for(var c=[],d=0,e=b.length;d<e;++d){var f=b[d],g=Xf(a._varNamesTrie,f);c[d]=g}return c}function s(a,b,c){a._constraintHash||(a._constraintHash={});var d=a._constraintHash[b];if(d===!0){if(void 0!==c)throw new Error("How is this possible?");return!0}return void 0!==d?(p(a,"eq",[c,d]),!0):(a._constraintHash[b]=c||!0,!1)}function t(a,b,c,d){return"lte"===b||"lt"===b?u(a,b,c):"gte"===b||"gt"===b?v(a,b,c):"eq"===b?w(a,b,c):"neq"===b?x(a,b,c):"reifier"===b?y(a,b,c,d):"sum"===b?D(a,b,c,d):"product"===b&&D(a,b,c,d)}function u(a,b,c){var d=a.initialDomains,e=c[0],f=c[1],g=d[e],h=d[f],i=la(g);if(i!==yg){var j=i-("lt"===b?0:1);return d[f]=Jb(h,j),a._constrainedAway.push(e,f),!0}if(i=la(h),i!==yg){var k=i+("lt"===b?0:1);return d[e]=Eb(g,k),a._constrainedAway.push(e,f),!0}var l=pb(h)+("lt"===b?0:1),m=d[e]=Eb(g,l),n=kb(g)-("lt"===b?0:1),o=d[f]=Jb(h,n);return(g!==m||h!==o)&&u(a,b,c)}function v(a,b,c){var d=a.initialDomains,e=c[0],f=c[1],g=d[e],h=d[f],i=la(g);if(i!==yg){var j=i+("gt"===b?0:1);return d[f]=Eb(h,j,!0),a._constrainedAway.push(e,f),!0}if(i=la(h),i!==yg){var k=i-("gt"===b?0:1);return d[e]=Jb(g,k),a._constrainedAway.push(e,f),!0}var l=kb(h)-("gt"===b?0:1),m=d[e]=Jb(g,l),n=pb(g)+("gt"===b?0:1),o=d[f]=Eb(h,n);return(g!==m||h!==o)&&v(a,b,c)}function w(a,b,c){var d=a.initialDomains,e=c[0],f=c[1],g=d[e],h=d[f],i=la(g);if(i===yg&&(i=la(h)),i!==yg){var j=Ha(g,h);return d[e]=j,d[f]=j,a._constrainedAway.push(e,f),!0}return!1}function x(a,b,c){var d=a.initialDomains,e=c[0],f=c[1],g=la(d[e]);return g!==yg?(d[f]=Qb(d[f],g),a._constrainedAway.push(e,f),!0):(g=la(d[f]),g!==yg&&(d[e]=Qb(d[e],g),a._constrainedAway.push(e,f),!0))}function y(a,b,c,d){var e=a.initialDomains,f=c[0],g=c[1],h=c[2],i=e[f],j=e[g],k=e[h],l=la(e[f]),m=la(e[g]),n=l!==yg,o=m!==yg;if(n&&o)return A(a,c,d,l,m);var p=wb(k),q=xb(k);if(p!==q){if(n)return B(a,d,g,l,q,i,j);if(o)return C(a,d,f,m,q,i,j)}if("eq"!==d&&"neq"!==d){var r=!0,s=!1;if("lt"===d){if(pb(i)<kb(j))return z(a,f,g,h,k,r);if(kb(i)>=pb(j))return z(a,f,g,h,k,s)}else if("lte"===d){if(pb(i)<=kb(j))return z(a,f,g,h,k,r);if(kb(i)>pb(j))return z(a,f,g,h,k,s)}else if("gt"===d){if(kb(i)>pb(j))return z(a,f,g,h,k,r);if(pb(i)<=kb(j))return z(a,f,g,h,k,s)}else if("gte"===d){if(kb(i)>=pb(j))return z(a,f,g,h,k,r);if(pb(i)<kb(j))return z(a,f,g,h,k,s)}else dd("UNKNOWN_OP")}return!1}function z(a,b,c,d,e,f){return a.initialDomains[d]=Cb(e,f),a._constrainedAway.push(b,c,d),!0}function A(a,b,c,d,e){var f=a.initialDomains,g=b[2],h=!1;switch(c){case"lt":h=d<e;break;case"lte":h=d<=e;break;case"gt":h=d>e;break;case"gte":h=d>=e;break;case"eq":h=d===e;break;case"neq":h=d!==e;break;default:return!1}return f[g]=Cb(f[g],h),a._constrainedAway.push(g),!0}function B(a,b,c,d,e,f,g){var h=a.initialDomains,i=h[c];switch(b){case"lt":i=e?Jb(i,d):Eb(i,d+1);break;case"lte":i=e?Jb(i,d-1):Eb(i,d);break;case"gt":i=e?Eb(i,d):Jb(i,d-1);break;case"gte":i=e?Eb(i,d+1):Jb(i,d);break;case"eq":i=e?Ha(f,g):Qb(i,d);break;case"neq":i=e?Qb(i,d):Ha(f,g);break;default:return!1}return h[c]=i,a._constrainedAway.push(c),!0}function C(a,b,c,d,e,f,g){var h=a.initialDomains,i=h[c];switch(b){case"lt":i=e?Eb(i,d):Jb(i,d-1);break;case"lte":i=e?Eb(i,d+1):Jb(i,d);break;case"gt":i=e?Jb(i,d):Eb(i,d+1);break;case"gte":i=e?Jb(i,d-1):Eb(i,d);break;case"eq":i=e?Ha(f,g):Qb(i,d);break;case"neq":i=e?Qb(i,d):Ha(f,g);break;default:return!1}return h[c]=i,a._constrainedAway.push(c),!0}function D(a,b,c,d){var e=a.initialDomains,f=0,g=1,i="product"===b?g:f;if(e.length&&c.length){for(var j=e[c[0]],k=1,l=c.length;k<l;++k){var m=c[k],n=e[m];j="sum"===b?Nc(j,n):Va(j,n)}e[d]=Ha(j,e[d])}if(c.length>1){for(var o=[],p=i,q=0,r=c.length;q<r;++q){var s=c[q],t=e[s],u=la(t);u===yg?o.push(s):"sum"===b?p+=u:"product"===b&&(p*=u)}if(!o.length||"sum"===b&&p!==f||"product"===b&&p!==g){var v=h(a,p);o.push(v)}for(var w=0,x=o.length;w<x;++w)c[w]=o[w];c.length=o.length}if(0===c.length)return a.initialDomains[d]=Ha(a.initialDomains[d],dc(0)),!0;if(1===c.length){var y=Ha(a.initialDomains[d],a.initialDomains[c[0]]);if(a.initialDomains[d]=y,a.initialDomains[c[0]]=y,vb(y))return a._constrainedAway.push(c[0],d),!0}return!1}function E(a){var b=a.allConstraints;a._propagators=[];for(var c=0,d=b.length;c<d;++c){var e=b[c];if(e.varNames){cd().warn("saw constraint.varNames, converting to varIndexes, log out result and update test accordingly"),e.varIndexes=e.varNames.map(function(b){return Xf(a._varNamesTrie,b)});var f=e.param;delete e.param,delete e.varNames,e.param=f}F(a,e.name,e.varIndexes,e.param,e)}}function F(a,b,c,d,e){switch(b){case"plus":return Ge(a,c[0],c[1],c[2]);case"min":return He(a,c[0],c[1],c[2]);case"ring-mul":return Ie(a,c[0],c[1],c[2]);case"ring-div":return Ae(a,c[0],c[1],c[2]);case"mul":return ye(a,c[0],c[1],c[2]);case"sum":return Je(a,c.slice(0),d);case"product":return Ke(a,c.slice(0),d);case"distinct":return De(a,c.slice(0));case"reifier":return te(a,d,c[0],c[1],c[2]);case"neq":return Ce(a,c[0],c[1]);case"eq":return ue(a,c[0],c[1]);case"gte":return Be(a,c[0],c[1]);case"lte":return xe(a,c[0],c[1]);case"gt":return we(a,c[0],c[1]);case"lt":return ve(a,c[0],c[1]);default:dd("UNEXPECTED_NAME: "+b)}}function G(a){var b=a.varDistOptions;for(var c in b){var d=Xf(a._varNamesTrie,c);d<0&&dd("Found markov var options for an unknown var name (name="+c+")");var e=b[c];if(e&&"markov"===e.valtype)return Le(a,d)}}function H(a){for(var b=a.varStratConfig;b;){if(b.priorityByName){for(var c={},d=b.priorityByName,e=0,f=d.length;e<f;++e){var g=Xf(a._varNamesTrie,d[e]);c[g]=f-e}b._priorityByIndex=c}b=b.fallback}}function I(a){a._varNamesTrie||(a._varNamesTrie=Lf(a.allVarNames)),a._defaultRng||(a._defaultRng=a.rngCode?Function(a.rngCode):Math.random),E(a),G(a),n(a),H(a)}function J(a,b,c){return{_class:"$constraint",name:a,varIndexes:b,param:c}}function K(a,b,c,d){for(var e=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],f=[],g=[],h=0,i=0;i<b.length;i++){var j=b[i];if(j>0){var k=c[i];fa(a,k)&&(h+=j,g.push(h),f.push(k))}}if(0!==g.length)return 1===g.length?f[0]:L(d,h,g,f,e)}function L(a,b,c,d,e){var f=a(),g=f;e&&(g=f*b);for(var h=0;h<c.length;h++){var i=c[h];if(i>g)break}return d[h]}function M(a,b,c,d){var e=b.valueStratName,f=b.varDistOptions,g=b.allVarNames[c],h=f[g]&&f[g].valtype;h&&(e=h);var i="function"==typeof e?e(a,c,d):N(e,a,b,c,d);return i}function N(a,b,c,d,e){switch(a){case"max":return Q(b,d,e);case"markov":return W(b,c,d,e);case"mid":return R(b,d,e);case"min":return P(b,d,e);case"minMaxCycle":return U(b,d,e);case"list":return O(b,c,d,e);case"naive":return dc(kb(b.vardoms[d]));case"splitMax":return T(b,d,e);case"splitMin":return S(b,d,e);case"throw":return dd("Throwing an error because val-strat requests it")}dd("unknown next var func",a)}function O(a,b,c,d){var e=a.vardoms[c],f=b.allVarNames[c],g=b.varDistOptions,h=g[f],i=h.list,j="";h.fallback&&(j=h.fallback.valtype);var k=i;switch("function"==typeof i&&(k=i(a,f,d)),d){case ag:var l=za(e,k);return l===yg?j?N(j,a,b,c,d):cg:(a._lastChosenValue=l,dc(l));case bg:return a._lastChosenValue>=0?Qb(e,a._lastChosenValue):j?N(j,a,b,c,d):cg}return cg}function P(a,b,c){var d=a.vardoms[b];switch(c){case ag:var e=kb(d);return a._lastChosenValue=e,dc(e);case bg:return Qb(d,a._lastChosenValue)}return cg}function Q(a,b,c){var d=a.vardoms[b];switch(c){case ag:var e=pb(d);return a._lastChosenValue=e,dc(e);case bg:return Qb(d,a._lastChosenValue)}return cg}function R(a,b,c){var d=a.vardoms[b];switch(c){case ag:var e=ib(d);return a._lastChosenValue=e,dc(e);case bg:return Qb(d,a._lastChosenValue)}return cg}function S(a,b,c){var d=a.vardoms[b],e=pb(d);switch(c){case ag:var f=kb(d),g=f+Math.floor((e-f)/2);return a._lastChosenValue=g,Ha(d,ec(f,g));case bg:return Ha(d,ec(a._lastChosenValue+1,e))}return cg}function T(a,b,c){var d=a.vardoms[b],e=kb(d);switch(c){case ag:var f=pb(d),g=e+Math.floor((f-e)/2);return a._lastChosenValue=g,Ha(d,ec(g+1,f));case bg:return Ha(d,ec(e,a._lastChosenValue))}return cg}function U(a,b,c){return V(b)?P(a,b,c):Q(a,b,c)}function V(a){return a%2===0}function W(a,b,c,d){var e=a.vardoms[c];switch(d){case ag:var f=b.allVarNames[c],g=b.varDistOptions,h=g[f],i=h.expandVectorsWith,j=h.random||b._defaultRng,k=gd("number"==typeof i,h.legend,e),l=k.length;if(!l)return cg;var m=id(a,h.matrix,i,l),n=K(e,m,k,j);return null==n?cg:(a._lastChosenValue=n,dc(n));case bg:var o=a._lastChosenValue,p=Qb(e,o);return p}return cg}function X(a,b){var c=b.varStratConfig,d=Y(c.type),e=Z(a,b,d,c);return e}function Y(a){switch(a){case"naive":return null;case"size":return $;case"min":return _;case"max":return aa;case"markov":return ba;case"list":return ca;case"throw":return dd("Throwing an error because var-strat requests it")}return dd("unknown next var func",a)}function Z(a,b,c,d){var e=0,f=a._unsolved,g=f[e++];if(c)for(var h=f.length;e<h;e++){var i=f[e];dg===c(a,b,i,g,d)&&(g=i)}return g}function $(a,b,c,d){var e=eb(a.vardoms[c])-eb(a.vardoms[d]);return e<0?dg:e>0?fg:eg}function _(a,b,c,d){var e=kb(a.vardoms[c])-kb(a.vardoms[d]);return e<0?dg:e>0?fg:eg}function aa(a,b,c,d){var e=pb(a.vardoms[c])-pb(a.vardoms[d]);return e>0?dg:e<0?fg:eg}function ba(a,b,c,d,e){var f=b.varDistOptions,g=b.allVarNames[c];if(f[g]&&"markov"===f[g].valtype)return dg;var h=b.allVarNames[d];return f[h]&&"markov"===f[h].valtype?fg:da(a,b,c,d,e.fallback)}function ca(a,b,c,d,e){var f=e._priorityByIndex,g=f[c],h=f[d];if(!g&&!h)return da(a,b,c,d,e.fallback);var i=e.inverted;return h?g&&g>h?i?fg:dg:i?dg:fg:i?fg:dg}function da(a,b,c,d,e){if(!e)return eg;var f=e.type;switch(f){case"size":return $(a,b,c,d);case"min":return _(a,b,c,d);case"max":return aa(a,b,c,d);case"markov":return ba(a,b,c,d,e);case"list":return ca(a,b,c,d,e);case"throw":return dd("nope")}return dd("Unknown var dist fallback name: "+f)}function ea(a,b,c){var d=(1<<1+(0|c)-(0|b))-1<<b;return a|d}function fa(a,b){return"number"==typeof a?ga(a,b):ja(a,b)}function ga(a,b){return a>=Bg?ha(a,b):ia(a,b)}function ha(a,b){return(a^Bg)===b}function ia(a,b){return!(b<sg||b>Ag)&&0!==(a&1<<b)}function ja(a,b){return ka(a,b)!==ug}function ka(a,b){for(var c=a.length,d=0;d<c;d+=ng){var e=qa(a,d);if(!(e<=b))break;var f=qa(a,d+mg);if(f>=b)return d}return ug}function la(a){return"number"==typeof a?ma(a):pa(a)}function ma(a){return a>=Bg?na(a):oa(a)}function na(a){return a^Bg}function oa(a){var b=nb(a);return a===1<<b?b:yg}function pa(a){if(a.length!==ng)return yg;var b=qa(a,gg),c=qa(a,hg);return b===c?b:yg}function qa(a,b){return a.charCodeAt(b)<<16|a.charCodeAt(b+1)}function ra(a){return String.fromCharCode(a>>>16&65535,65535&a)}function sa(a,b){return String.fromCharCode(a>>>16&65535,65535&a,b>>>16&65535,65535&b)}function ta(a){if(!a.length)return[];a=a.slice(0),a.sort(function(a,b){return a-b});for(var b=[],c=void 0,d=void 0,e=0;e<a.length;e++){var f=a[e];0===e?(d=f,c=f):(f>c+1&&(b.push(d,c),d=f),c=f)}return b.push(d,c),b}function ua(a){return"number"==typeof a?va(a):ya(a)}function va(a){return a>=Bg?wa(a):xa(a)}function wa(a){return[a^Bg]}function xa(a){for(var b=[],c=0;c<Ag;++c)(a&1<<c>>>0)>0&&b.push(c);return b}function ya(a){for(var b=[],c=0,d=a.length;c<d;c+=ng)for(var e=qa(a,c),f=qa(a,c+mg);e<=f;++e)b.push(e);return b}function za(a,b){return"number"==typeof a?Aa(a,b):Da(a,b)}function Aa(a,b){return a>=Bg?Ba(a,b):Ca(a,b)}function Ba(a,b){var c=a^Bg;return b.indexOf(c)>=0?c:yg}function Ca(a,b){for(var c=0;c<b.length;++c){var d=b[c];if(d<=Ag&&(a&1<<d)>0)return d}return yg}function Da(a,b){for(var c=0;c<b.length;c++){var d=b[c];if(ja(a,d))return d}return yg}function Ea(a){return a?a.length===ng?sc(a):(a=Fa(a),a=Ga(a),sc(a)):og}function Fa(a){if(!a)return pg;var b=a.length;if(b<=ng)return a;for(var c=0,d=qa(a,c),e=qa(a,c+mg),f=pg,g=pg,h=ng;h<b;h+=ng){var i=qa(a,h);i<d||i===d&&qa(a,h+mg)<e?f+=a[h]+a[h+1]+a[h+2]+a[h+3]:g+=a[h]+a[h+1]+a[h+2]+a[h+3]}return""+Fa(f)+a[c]+a[c+1]+a[c+mg]+a[c+mg+1]+Fa(g)}function Ga(a){if(!a)return pg;var b=a.length;if(b===ng)return a;for(var c=a[gg]+a[gg+1],d=qa(a,hg),e=hg,f=ng;f<b;f+=ng){var g=qa(a,f),h=qa(a,f+mg);g<=d+1?h>d&&(d=h,e=f+mg):(c+=a[e]+a[e+1]+a[f]+a[f+1],d=h,e=f+mg)}return c+a[e]+a[e+1]}function Ha(a,b){if(a===b)return a;var c="number"==typeof a,d="number"==typeof b;return c&&d?Ia(a,b):c?Ma(a,b):d?Ma(b,a):Pa(a,b)}function Ia(a,b){var c=a>=Bg,d=b>=Bg;return c?d?Ka(a,b):Ja(a,b):d?Ja(b,a):La(a,b)}function Ja(a,b){var c=a^Bg;return c<=Ag&&b&1<<c?a:og}function Ka(a,b){return a===b?a:og}function La(a,b){return vc(a&b)}function Ma(a,b){return a>=Bg?Na(a,b):Oa(a,b)}function Na(a,b){for(var c=a^Bg,d=0,e=b.length;d<e;d+=ng){var f=qa(b,d),g=qa(b,d+mg);if(c<f)break;if(c<=g)return a}return og}function Oa(a,b){for(var c=og,d=0,e=b.length;d<e;d+=ng){var f=qa(b,d);if(f>Ag)break;for(var g=qa(b,d+mg),h=f,i=ig(Ag,g);h<=i;++h){var j=1<<h;a&j&&(c|=j)}}return vc(c)}function Pa(a,b){var c=a.length,d=b.length;if(0===(c|d))return og;for(var e=pg,f=0,g=0,h=qa(a,gg),i=qa(a,hg),j=qa(b,gg),k=qa(b,hg);;)if(i<j){if(f+=ng,f>=c)break;h=qa(a,f),i=qa(a,f+mg)}else if(k<h){if(g+=ng,g>=d)break;j=qa(b,g),k=qa(b,g+mg)}else{var l=ig(i,k);if(e+=sa(jg(h,j),l),l+=2,h=j=l,i<l){if(f+=ng,f>=c)break;h=qa(a,f),i=qa(a,f+mg)}if(k<l){if(g+=ng,g>=d)break;j=qa(b,g),k=qa(b,g+mg)}}return e===pg?og:sc(e)}function Qa(a,b){return fa(a,b)?dc(b):gc()}function Ra(a){return"number"==typeof a?a>=Bg?"soldom(["+(a^Bg)+","+(a^Bg)+"])":"numdom(["+jc(a)+"])":"string"==typeof a?"strdom(["+mc(a)+"])":a instanceof Array?"arrdom(["+a+"])":"???dom("+a+")"}function Sa(a,b){if(a&&b){var c=void 0;do{if(c=0,a.length>ng){var d=Ua(b),e=Ta(a,d);c+=a.length-e.length,a=e}if(b.length>ng){var f=Ua(a),g=Ta(b,f);c+=b.length-g.length,b=g}}while(0!==c)}return[a,b]}function Ta(a,b){for(var c=a[gg]+a[gg+1],d=qa(a,hg),e=hg,f=ng,g=a.length;f<g;f+=ng){var h=qa(a,f),i=qa(a,f+mg);h-d>b&&(c+=a[e]+a[e+1]+a[f]+a[f+1]),d=i,e=f+mg}return c+=a[e]+a[e+1]}function Ua(a){for(var b=tg,c=0,d=a.length;c<d;c+=ng){var e=qa(a,c),f=qa(a,c+mg),g=1+f-e;g<b&&(b=g)}return b}function Va(a,b){return"number"==typeof a&&(a=oc(a)),"number"==typeof b&&(b=oc(b)),Wa(a,b)}function Wa(a,b){for(var c=pg,d=0,e=a.length;d<e;d+=ng){var f=qa(a,d),g=qa(a,d+mg);c+=Xa(b,f,g)}return Ea(c)}function Xa(a,b,c){for(var d=pg,e=0,f=a.length;e<f;e+=ng){var g=qa(a,e),h=qa(a,e+mg);d+=sa(ig(tg,b*g),ig(tg,c*h))}return d}function Ya(a,b){return"number"==typeof a&&(a=oc(a)),a=Xa(a,b,b),Ea(a)}function Za(a,b){var c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return"number"==typeof a&&(a=oc(a)),"number"==typeof b&&(b=oc(b)),$a(a,b,c)}function $a(a,b){for(var c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],d=pg,e=0,f=b.length;e<f;e+=ng){var g=qa(b,e),h=qa(b,e+mg);d+=_a(a,g,h,c)}return Ea(d)}function _a(a,b,c,d){for(var e=pg,f=0,g=a.length;f<g;f+=ng){var h=qa(a,f),i=qa(a,f+mg);if(c>0){var j=h/c,k=b>0?i/b:tg,l=lg(j),m=kg(k);l<=m?e+=sa(l,m):d&&(e+=sa(m,m))}}return e}function ab(a,b){return"number"==typeof a&&(a=oc(a)),"number"==typeof b&&(b=oc(b)),bb(a,b)}function bb(a,b){for(var c=pg,d=0,e=b.length;d<e;d+=ng){var f=qa(b,d),g=qa(b,d+mg);c+=cb(a,f,g)}return Ea(c)}function cb(a,b,c){for(var d=pg,e=0,f=a.length;e<f;e+=ng){var g=qa(a,e),h=qa(a,e+mg),i=c?g/c:sg,j=b?h/b:tg,k=lg(i),l=kg(j);k<=l&&(d+=sa(k,l))}return d}function db(a,b){"number"==typeof a&&(a=oc(a));var c=cb(a,b,b);return Ea(c)}function eb(a){return"number"==typeof a?fb(a):hb(a)}function fb(a){return a>=Bg?1:gb(a)}function gb(a){switch(a){case 0:return 0;case 1:return 1;case 2:return 1;case 3:return 2}return(1&a)+(a>>1&1)+(a>>2&1)+(a>>3&1)+(a>>4&1)+(a>>5&1)+(a>>6&1)+(a>>7&1)+(a>>8&1)+(a>>9&1)+(a>>10&1)+(a>>11&1)+(a>>12&1)+(a>>13&1)+(a>>14&1)+(a>>15&1)+(a>>16&1)+(a>>17&1)+(a>>18&1)+(a>>19&1)+(a>>20&1)+(a>>21&1)+(a>>22&1)+(a>>23&1)+(a>>24&1)+(a>>25&1)+(a>>26&1)+(a>>27&1)+(a>>28&1)+(a>>29&1)+(a>>30&1)+(a>>31&1)|0}function hb(a){for(var b=0,c=0,d=a.length;c<d;c+=ng)b+=1+qa(a,c+mg)-qa(a,c);return b}function ib(a){if("number"==typeof a){if(a>=Bg)return a^Bg;a=oc(a)}return jb(a)}function jb(a){if(!a)return yg;for(var b=hb(a),c=kg(b/2),d=void 0,e=void 0,f=0,g=a.length;f<g;f+=ng){d=qa(a,f),e=qa(a,f+mg);var h=1+e-d;if(c<h)break;c-=h}return d+c}function kb(a){return"number"==typeof a?lb(a):ob(a)}function lb(a){return a>=Bg?mb(a):nb(a)}function mb(a){return a^Bg}function nb(a){if(1===(0|a))return 0;if(2===(0|a))return 1;if(3===(0|a))return 0;switch((a&-a)%37|0){case 0:return-1;case 1:return 0;case 2:return 1;case 3:return 26;case 4:return 2;case 5:return 23;case 6:return 27;case 7:return 0;case 8:return 3;case 9:return 16;case 10:return 24;case 11:return 30;case 12:return 28;case 13:return 11;case 14:return 0;case 15:return 13;case 16:return 4;case 17:return 7;case 18:return 17;case 19:return 0;case 20:return 25;case 21:return 22;case 22:return-1;case 23:return 15;case 24:return 29;case 25:return 10;case 26:return 12;case 27:return 6;case 28:return 0;case 29:return 21;case 30:return 14;case 31:return 9;case 32:return 5;case 33:return 20;case 34:return 8;case 35:return 19}return 18}function ob(a){return a?qa(a,gg):yg}function pb(a){return"number"==typeof a?qb(a):tb(a)}function qb(a){return a>=Bg?rb(a):sb(a)}function rb(a){return a^Bg}function sb(a){var b=30;switch(0|a){case 0:return-1;case 1:return 0;case 2:return 1;case 3:return 1}do{if(a&1<<b)break;b=b-1|0}while((0|b)>=0);return 0|b}function tb(a){return a?qa(a,a.length-mg):yg}function ub(a){var b=a.length;return 0===b?yg:a[b-1]}function vb(a){return"number"==typeof a&&a>=Bg}function wb(a){return void 0===qg&&(qg=dc(0)),a===qg}function xb(a){return!yb(a)}function yb(a){return 0===kb(a)}function zb(a){return void 0===rg&&(rg=ec(0,1)),a===rg}function Ab(a){return Bb(a)&&2===eb(a)}function Bb(a){return zb(a)||!wb(a)&&yb(a)}function Cb(a,b){return b?Qb(a,0):Pb(a,0)}function Db(a){return a===og}function Eb(a,b){return"number"==typeof a?Fb(a,b):Ib(a,b)}function Fb(a,b){return a>=Bg?Gb(a,b):vc(Hb(a,b))}function Gb(a,b){var c=a^Bg;return c>=b?og:a}function Hb(a,b){switch(b){case 0:return 0;case 1:return 1&a;case 2:return 3&a;case 3:return 7&a;case 4:return 15&a;case 5:return 31&a;case 6:return 63&a;case 7:return 127&a;case 8:return 255&a;case 9:return 511&a;case 10:return 1023&a;case 11:return 2047&a;case 12:return 4095&a;case 13:return 8191&a;case 14:return 16383&a;case 15:return 32767&a;case 16:return 65535&a;case 17:return 131071&a;case 18:return 262143&a;case 19:return 524287&a;case 20:return 1048575&a;case 21:return 2097151&a;case 22:return 4194303&a;case 23:return 8388607&a;case 24:return 16777215&a;case 25:return 33554431&a;case 26:return 67108863&a;case 27:return 134217727&a;case 28:return 268435455&a;case 30:return a}return a}function Ib(a,b){for(var c=0,d=a.length;c<d;c+=ng){var e=qa(a,c),f=qa(a,c+mg);if(e>=b)return c?sc(a.slice(0,c)):og;if(b<=f){if(0===c&&b===e+1){var g=a.slice(0,mg);return sc(g+g)}var h=a.slice(0,c+mg)+ra(b-1);return sc(h)}}return a}function Jb(a,b){return"number"==typeof a?Kb(a,b):Nb(a,b)}function Kb(a,b){return a>=Bg?Lb(a,b):sc(Mb(a,b))}function Lb(a,b){var c=a^Bg;return c<=b?og:a}function Mb(a,b){switch(b){case 0:return 2147483646&a;case 1:return 2147483644&a;case 2:return 2147483640&a;case 3:return 2147483632&a;case 4:return 2147483616&a;case 5:return 2147483584&a;case 6:return 2147483520&a;case 7:return 2147483392&a;case 8:return 2147483136&a;case 9:return 2147482624&a;case 10:return 2147481600&a;case 11:return 2147479552&a;case 12:return 2147475456&a;case 13:return 2147467264&a;case 14:return 2147450880&a;case 15:return 2147418112&a;case 16:return 2147352576&a;case 17:return 2147221504&a;case 18:return 2146959360&a;case 19:return 2146435072&a;case 20:return 2145386496&a;case 21:return 2143289344&a;case 22:return 2139095040&a;case 23:return 2130706432&a;case 24:return 2113929216&a;case 25:return 2080374784&a;case 26:return 2013265920&a;case 27:return 1879048192&a;case 28:return 1610612736&a;case 29:return 1073741824&a;case 30:return 0}return b<0?a:0}function Nb(a,b){for(var c=0,d=a.length;c<d;c+=ng){var e=qa(a,c),f=qa(a,c+mg);if(e>b)return sc(c?a.slice(c):a);if(f===b)return c>=d-ng?og:sc(a.slice(c+ng));if(b<=f)return sc(ra(b+1)+a.slice(c+mg))}return og}function Ob(a,b){return b<=sg?a:b>tg?gc():Jb(a,b-1)}function Pb(a,b){return b>=tg?a:b<sg?gc():Eb(a,b+1)}function Qb(a,b){return"number"==typeof a?Rb(a,b):sc(Ub(a,b))}function Rb(a,b){return a>=Bg?Sb(a,b):Tb(a,b)}function Sb(a,b){return b===(a^Bg)?og:a}function Tb(a,b){if(b>30)return sc(a);var c=1<<b;return vc((a|c)^c)}function Ub(a,b){for(var c=-1,d=-1,e=0,f=a.length;e<f;e+=ng){var g=qa(a,e);if(b<g)break;var h=qa(a,e+mg);if(b<=h)return Vb(a,f,e,g,h,b,c,d);c=g,d=h}return a}function Vb(a,b,c,d,e,f,g,h){if(b===ng){if(e-d===1)return((d===f?e:d)|Bg)>>>0;if(d===e)return og}else if(c&&b===2*ng&&d===e&&g===h)return(g|Bg)>>>0;if(c===b-ng&&f===e){if(d===e&&h<=Ag){var i=b-ng;return xc(a.slice(0,i),i)}if(e-1<=Ag)return xc(a.slice(0,-mg)+ra(e-1),b)}var j=a.slice(0,c),k=a.slice(c+ng);return e===f?d===f?j+k:j+sa(d,e-1)+k:d===f?j+sa(d+1,e)+k:j+sa(d,f-1)+sa(f+1,e)+k}function Wb(a,b){var c="number"==typeof a,d="number"==typeof b;return c&&d?Xb(a,b):c?_b(a,b):d?_b(b,a):cc(a,b)}function Xb(a,b){return a>=Bg?b>=Bg?Yb(a,b):Zb(a,b):b>=Bg?Zb(b,a):$b(a,b)}function Yb(a,b){return a!==b}function Zb(a,b){var c=a^Bg;return c>Ag||0===(b&1<<c)}function $b(a,b){return 0===(a&b)}function _b(a,b){return a>=Bg?ac(a,b):bc(a,b)}function ac(a,b){for(var c=a^Bg,d=0,e=b.length;d<e;d+=ng){var f=qa(b,d),g=qa(b,d+mg);if(c<f)return!0;if(c<=g)return!1}return!0}function bc(a,b){for(var c=0,d=b.length,e=0;e<=Ag;++e)if(a&1<<e){for(;c<d;){var f=qa(b,c),g=qa(b,c+mg);if(e>=f&&e<=g)return!1;if(f>Ag)return!0;if(f>e)break;c+=ng}if(c>=d)return!0}return!0}function cc(a,b){for(var c=a.length,d=b.length,e=0,f=0,g=qa(a,gg),h=qa(a,hg),i=qa(b,gg),j=qa(b,hg);;)if(h<i){if(e+=ng,e>=c)break;g=qa(a,e),h=qa(a,e+mg)}else{if(!(j<g))return!1;if(f+=ng,f>=d)break;i=qa(b,f),j=qa(b,f+mg)}return!0}function dc(a){return(a|Bg)>>>0}function ec(a,b){return a===b?dc(a):b<=Ag?fc(a,b):sa(a,b)}function fc(a,b){return(1<<1+b-a)-1<<a}function gc(){return og}function hc(a){return a|=a>>1,a|=a>>2,a|=a>>4,a|=a>>8,a|=a>>16}function ic(a,b){return"number"==typeof a?jc(a):"string"==typeof a?mc(a):b?a.slice(0):a}function jc(a){return a>=Bg?kc(a):lc(a)}function kc(a){var b=a^Bg;return[b,b]}function lc(a){if(a===og)return[];var b=[],c=-1,d=-1;if(1&a&&(c=0,d=0),2&a&&(0!==c&&(c=1),d=1),4&a&&(0===d?(b.push(0,0),c=2):1!==d&&(c=2),d=2),8&a&&(d<0?c=3:2!==d&&(b.push(c,d),c=3),d=3),a>=16)for(var e=4;e<=Ag;++e)a&1<<e&&(d<0?c=e:d!==e-1&&(b.push(c,d),c=e),d=e);return b.push(c,d),b}function mc(a){if(a===og)return[];for(var b=[],c=0,d=a.length;c<d;c+=ng){var e=qa(a,c),f=qa(a,c+mg);b.push(e,f)}return b}function nc(a){return"number"==typeof a?oc(a):"string"==typeof a?a:rc(a)}function oc(a){return a>=Bg?pc(a):qc(a)}function pc(a){var b=a^Bg;return sa(b,b)}function qc(a){if(a===og)return pg;var b=pg,c=-1,d=-1;if(1&a&&(c=0,d=0),2&a&&(0!==c&&(c=1),d=1),4&a&&(0===d?(b=sa(0,0),c=2):1!==d&&(c=2),d=2),8&a&&(d<0?c=3:2!==d&&(b+=sa(c,d),c=3),d=3),a>=16)for(var e=4;e<=Ag;++e)a&1<<e&&(d<0?c=e:d!==e-1&&(b+=sa(c,d),c=e),d=e);return b+=sa(c,d)}function rc(a){for(var b=pg,c=0,d=a.length;c<d;c+=zg){var e=a[c],f=a[c+1];b+=sa(e,f)}return b}function sc(a){return"number"==typeof a?uc(a):wc(a)}function tc(a){return a instanceof Array&&(a=rc(a)),sc(a)}function uc(a){return a>=Bg?a:vc(a)}function vc(a){var b=la(a);return b===yg?a:dc(b)}function wc(a){var b=a.length;if(!b)return og;var c=qa(a,0),d=qa(a,b-mg);return b===ng&&c===d?dc(c):d<=Ag?xc(a,b):a}function xc(a,b){if(0===b)return og;for(var c=qa(a,0),d=qa(a,0+mg),e=ea(og,c,d),f=ng;f<b;f+=ng){var g=qa(a,f),h=qa(a,f+mg);e=ea(e,g,h)}return e}function yc(a){var b=a.length;if(0===b)return og;if(b===zg&&a[0]===a[1])return dc(a[0]);var c=ub(a);return c<=Ag?zc(a,b):rc(a)}function zc(a,b){for(var c=0,d=0;d<b;d+=zg)c=ea(c,a[d],a[d+1]);return c}function Ac(a,b){if(!a)return og;if(!b)return og;if(0===kb(a)&&0===kb(b))return ec(0,pb(a));var c="number"==typeof a,d="number"==typeof b;if(c){if(d)return sc(Cc(a,b));var e=sc(Ec(a,b));return e===pg?og:e}var f=void 0;f=d?Hc(a,b):Bc(a,b);var g=sc(Ea(f));return g===pg?og:g}function Bc(a,b){var c=Sa(a,b);a=c[0],b=c[1];for(var d=pg,e=0,f=a.length;e<f;e+=ng){var g=qa(a,e),h=qa(a,e+mg);d+=Jc(g,h,b)}return d}function Cc(a,b){if(a>=Bg){var c=a^Bg;if(b>=Bg){var d=c-(b^Bg);return d<0?og:dc(d)}return c<=Ag?Gc(c,c,b):Ic(c,c,b)}return Dc(a,b)}function Dc(a,b){if(ga(a,0)&&ga(b,0))return hc(a);for(var c=0;0===(a&1<<c);)++c;for(var d=c,e=c,f=1<<++c,g=og;f<=a&&c<=Ag;)(f&a)>0&&(e!==c-1&&(g|=Gc(d,e,b),d=c),e=c),f=1<<++c;return g|Gc(d,e,b)}function Ec(a,b){if(a>=Bg){var c=a^Bg;return c<=Ag?Kc(c,c,b):Jc(c,c,b)}return Fc(a,b)}function Fc(a,b){if(a>=Bg){var c=a^Bg;return Kc(c,c,b)}if(ga(a,0)&&0===kb(b))return hc(a);for(var d=0;0===(a&1<<d);)++d;for(var e=d,f=d,g=1<<++d,h=og;g<=a&&d<=Ag;)(g&a)>0&&(f!==d-1&&(h|=Kc(e,f,b),e=d),f=d),g=1<<++d;return h|Kc(e,f,b)}function Gc(a,b,c){if(c>=Bg){var d=c^Bg;return Mc(a,b,d,d)}for(var e=0;0===(c&1<<e);)++e;for(var f=e,g=e,h=1<<++e,i=og;h<=c&&e<=Ag;)(h&c)>0&&(g!==e-1&&(i|=Mc(a,b,f,g),f=e),g=e),h=1<<++e;return i|Mc(a,b,f,g)}function Hc(a,b){if(0===kb(a)&&0===kb(b))return ec(0,pb(a));for(var c=pg,d=0,e=a.length;d<e;d+=ng){var f=qa(a,d),g=qa(a,d+mg);c+=Ic(f,g,b)}return c}function Ic(a,b,c){if(c===og)return og;if(c>=Bg){var d=c^Bg;return Lc(a,b,d,d)}for(var e=0;0===(c&1<<e);)++e;for(var f=e,g=e,h=1<<++e,i=pg;h<=c&&e<=Ag;)(h&c)>0&&(g!==e-1&&(i+=Lc(a,b,f,g),f=e),g=e),h=1<<++e;return i+Lc(a,b,f,g)}function Jc(a,b,c){for(var d=pg,e=0,f=c.length;e<f;e+=ng){var g=qa(c,e),h=qa(c,e+mg);d+=Lc(a,b,g,h)}return d}function Kc(a,b,c){for(var d=og,e=0,f=c.length;e<f;e+=ng){var g=qa(c,e),h=qa(c,e+mg);d|=Mc(a,b,g,h)}return d}function Lc(a,b,c,d){var e=b-c;if(e>=sg){var f=jg(sg,a-d);return sa(f,e)}return pg}function Mc(a,b,c,d){var e=b-c;if(e>=sg){var f=jg(sg,a-d),g=fc(f,e);return g}return og}function Nc(a,b){if(!a)return og;if(!b)return og;var c="number"==typeof a,d="number"==typeof b,e=void 0;if(c&&d){if(Pc(a,b))return sc(Rc(a,b));e=Qc(a,b)}else e=c?Tc(a,b):d?Tc(b,a):Oc(a,b);
return sc(Ea(e))}function Oc(a,b){var c=Sa(a,b);a=c[0],b=c[1];for(var d=pg,e=0,f=a.length;e<f;e+=ng){var g=qa(a,e),h=qa(a,e+mg);d+=Vc(g,h,b)}return d}function Pc(a,b){return pb(a)+pb(b)<=Ag}function Qc(a,b){if(a>=Bg){var c=a^Bg;return Uc(c,c,b)}for(var d=0;0===(a&1<<d);)++d;for(var e=d,f=d,g=1<<++d,h=pg;g<=a&&d<=Ag;)(g&a)>0&&(f!==d-1&&(h+=Uc(e,f,b),e=d),f=d),g=1<<++d;return h+Uc(e,f,b)}function Rc(a,b){if(a>=Bg){var c=a^Bg;return Sc(c,c,b)}for(var d=0;0===(a&1<<d);)++d;for(var e=d,f=d,g=1<<++d,h=og;g<=a&&d<=Ag;)(g&a)>0&&(f!==d-1&&(h|=Sc(e,f,b),e=d),f=d),g=1<<++d;return h|Sc(e,f,b)}function Sc(a,b,c){if(c>=Bg){var d=c^Bg;return Xc(a,b,d,d)}for(var e=0;0===(c&1<<e);)++e;for(var f=e,g=e,h=1<<++e,i=og;h<=c&&e<=Ag;)(h&c)>0&&(g!==e-1&&(i|=Xc(a,b,f,g),f=e),g=e),h=1<<++e;return i|Xc(a,b,f,g)}function Tc(a,b){if(a>=Bg){var c=a^Bg;return Vc(c,c,b)}for(var d=0;0===(a&1<<d);)++d;for(var e=d,f=d,g=1<<++d,h=pg;g<=a&&d<=Ag;)(g&a)>0&&(f!==d-1&&(h+=Vc(e,f,b),e=d),f=d),g=1<<++d;return h+Vc(e,f,b)}function Uc(a,b,c){if(c>=Bg){var d=c^Bg;return Wc(a,b,d,d)}for(var e=0;0===(c&1<<e);)++e;for(var f=e,g=e,h=1<<++e,i=pg;h<=c&&e<=Ag;)(h&c)>0&&(g!==e-1&&(i+=Wc(a,b,f,g),f=e),g=e),h=1<<++e;return i+Wc(a,b,f,g)}function Vc(a,b,c){for(var d=pg,e=0,f=c.length;e<f;e+=ng){var g=qa(c,e),h=qa(c,e+mg);d+=Wc(a,b,g,h)}return d}function Wc(a,b,c,d){var e=a+c;if(e<=tg){var f=ig(tg,b+d);return sa(e,f)}return pg}function Xc(a,b,c,d){var e=fc(a+c,b+d);return e}function Yc(a,b,c,d,e,f){f=!0;var g=a.varDistOptions,h=b||a.initialDomains,i=a.allVarNames,j=f?function(a){return Zc(i[a])}:d?_c:$c,k=i.map(function(a,b){var c=ad(h[b]),d=": "+j(b)+" = "+c;f||a===String(b)||(d+=" alias("+Zc(a)+")");var e=g[a];if(e&&("list"!==e.valtype||e.list&&e.list.length))switch(d+=" @"+e.valtype,e.valtype){case"markov":"expandVectorsWith"in e&&(d+="expand("+(e.expandVectorsWith||0)+")"),"legend"in e&&(d+=" legend("+e.legend.join(" ")+")"),"matrix"in e&&(d+=" matrix("+JSON.stringify(e.matrix).replace(/"/g,"")+")");break;case"list":d+="function"==typeof e.list?" prio(???func???)":" prio("+e.list.join(" ")+")";break;case"max":case"mid":case"min":case"minMaxCycle":case"naive":case"splitMax":case"splitMin":break;default:cd().warn("Unknown value strategy override: "+e.valtype),d+=" @? "+JSON.stringify(e)}return d}),l=c?[]:a.allConstraints.map(function(a){var b=a.varIndexes,c=b.map(j);b.forEach(function(a,b){var d=la(h[a]);d>=0&&(c[b]=d)});var g="";if("number"==typeof a.param){var i=la(h[a.param]);g=i>=0?i:j(a.param)}var k="",l="";switch(a.name){case"reifier":var m=void 0;switch(a.param){case"eq":m="==";break;case"neq":m="!=";break;case"lt":m="<";break;case"lte":m="<=";break;case"gt":m=">";break;case"gte":m=">=";break;default:dd("what dis param: "+m)}k+=c[2]+" = "+c[0]+" "+m+"? "+c[1];break;case"plus":k+=c[2]+" = "+c[0]+" + "+c[1];break;case"min":k+=c[2]+" = "+c[0]+" - "+c[1];break;case"ring-mul":k+=c[2]+" = "+c[0]+" * "+c[1];break;case"ring-div":k+=c[2]+" = "+c[0]+" / "+c[1];break;case"mul":k+=c[2]+" = "+c[0]+" * "+c[1];break;case"sum":k+=g+" = sum("+c.join(" ")+")";break;case"product":k+=g+" = product("+c.join(" ")+")";break;case"markov":k+="# markov("+c+")";break;case"distinct":k+="distinct("+c+")";break;case"eq":k+=c[0]+" == "+c[1];break;case"neq":k+=c[0]+" != "+c[1];break;case"lt":k+=c[0]+" < "+c[1];break;case"lte":k+=c[0]+" <= "+c[1];break;case"gt":k+=c[0]+" > "+c[1];break;case"gte":k+=c[0]+" >= "+c[1];break;default:cd().warn("unknown constraint: "+a.name),k+="unknown = "+JSON.stringify(a)}var n=k;if((k.indexOf(f?"'":"$")<0||"distinct"===a.name&&c.length<=1||("product"===a.name||"sum"===a.name)&&0===c.length)&&(d||(l+=(l?", ":" # ")+"dropped; constraint already solved ("+k+") ("+b.map(j)+", "+j(a.param)+")"),k=""),!d||e){if(c.forEach(function(a,c){"string"==typeof a&&(n=n.replace(a,ad(h[b[c]])))}),"number"==typeof a.param&&"string"==typeof g&&(n=n.replace(g,ad(h[a.param]))),k||!d){for(var o=Math.max(0,30-k.length);o>=0;--o)k+=" ";k+="      # "+n}k+=l}return k}).filter(function(a){return!!a}),m=c?a._propagators.map(function(a){var b=a.index1,c=a.index2,e=a.index3,f=b>=0?la(h[b]):-1,g=f>=0?f:b<0?void 0:j(b),i=c>=0?la(h[c]):-1,k=i>=0?i:c<0?void 0:j(c),l=e>=0?la(h[e]):-1,m=l>=0?l:e<0?void 0:j(e),n="",o="";switch(a.name){case"reified":var p=void 0;switch(a.arg3){case"eq":p="==";break;case"neq":p="!=";break;case"lt":p="<";break;case"lte":p="<=";break;case"gt":p=">";break;case"gte":p=">=";break;default:dd("what dis param: "+p)}n+=m+" = "+g+" "+p+"? "+k;break;case"eq":n+=g+" == "+k;break;case"lt":n+=g+" < "+k;break;case"lte":n+=g+" <= "+k;break;case"mul":n+=m+" = "+g+" * "+k;break;case"div":n+=m+" = "+g+" / "+k;break;case"neq":n+=g+" != "+k;break;case"min":n+=m+" = "+g+" - "+k;break;case"ring":switch(a.arg1){case"plus":n+=m+" = "+g+" + "+k;break;case"min":n+=m+" = "+g+" - "+k;break;case"ring-mul":n+=m+" = "+g+" * "+k;break;case"ring-div":n+=m+" = "+g+" / "+k;break;default:throw new Error("Unexpected ring op:"+a.arg1)}break;case"markov":return"";default:cd().warn("unknown propagator: "+a.name),n+="unknown = "+JSON.stringify(a)}var q=n;return n.indexOf("$")<0&&(d||(o+=(o?", ":" # ")+"dropped; constraint already solved ("+n+")"),n=""),d||("string"==typeof g&&(q=q.replace(g,ad(h[b]))),"string"==typeof k&&(q=q.replace(k,ad(h[c]))),"string"==typeof m&&(q=q.replace(m,ad(h[e]))),n+=" ".repeat(Math.max(0,30-n.length))+"      # initial: "+q,n+=o),n}).filter(function(a){return!!a}):[];return["## constraint problem export","@custom var-strat = "+JSON.stringify(a.varStratConfig),"@custom val-strat = "+a.valueStratName,k.join("\n")||"# no vars",l.join("\n")||m.join("\n")||"# no constraints","@custom targets "+("all"===a.targetedVars?" = all":"("+a.targetedVars.map(function(b){return j(Xf(a._varNamesTrie,b))}).join(" ")+")"),"## end of export"].join("\n\n")}function Zc(a){return"number"==typeof a?a:"'"+a+"'"}function $c(a){return"$"+a+"$"}function _c(a){var b=a.toString(36);return b[0]<"a"&&(b="$"+b),b}function ad(a){var b=ic(a);if(2===b.length&&b[0]===b[1])return String(b[0]);if(b.length>2){for(var c=[],d=0,e=b.length;d<e;d+=2)c.push("["+b[d]+" "+b[d+1]+"]");b=c}return"["+b.join(" ")+"]"}function bd(a){a.log||(a.log=Gg.log.bind(Gg)),a.error||(a.error=Gg.error.bind(Gg)),a.warn||(a.warn=Gg.warn.bind(Gg)),a.trace||(a.trace=Gg.trace.bind(Gg)),a.time||(a.time=Gg.time.bind(Gg)),a.timeEnd||(a.timeEnd=Gg.timeEnd.bind(Gg)),Gg=a}function cd(){return Gg}function dd(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];throw new Error(b.join(": "))}function ed(a,b,c){function d(){return a[ga]}function e(b){return a[ga+b]}function f(){++ga}function g(a,b){d()!==a&&fa("Expected "+(b+" "||"")+"`"+a+"`, found `"+d()+"`"),f()}function h(){for(;ga<ha&&j(d());)f()}function i(){for(;!p();){var a=d();if(n(a))f();else{if(!m(a))break;B()}}}function j(a){return" "===a||"\t"===a}function k(a){return"\n"===a||"\r"===a}function m(a){return"#"===a}function n(a){return j(a)||k(a)}function o(){if(h(),ga<ha){var a=d();"#"===a?B():k(a)?f():fa("Expected EOL but got `"+d()+"`")}}function p(){return ga>=ha}function q(){switch(i(),d()){case":":return r();case"#":return B();case"@":return _();default:if(!p())return C()}}function r(){f(),h();var c=s();if(h(),","===d()){c=[c];do f(),h(),c.push(s()),h();while(!p()&&","===d())}var e=x();h();for(var g=void 0;"alias("===a.slice(ga,ga+6);)g||(g=[]),g.push(w(ga+=6)),h();var i=y();o(),"string"==typeof c?(b.decl(c,e,i,!0),g&&g.map(function(a){b.decl(a,e,i,!0),b.eq(c,a)})):(g&&fa("Can not use alias() with multiple declarations"),c.forEach(function(a){return b.decl(a,e,i,!0)}))}function s(){return"'"===d()?t():u()}function t(){g("'");for(var b=ga;!p()&&"'"!==d();)f();return p()&&fa("Quoted identifier must be closed"),b===ga&&fa("Expected to parse identifier, found none"),f(),a.slice(b,ga-1)}function u(){var b=ga;for(d()>="0"&&d()<="9"&&fa("Unquoted ident cant start with number");!p()&&v(d());)f();return b===ga&&fa("Expected to parse identifier, found none ["+d()+"]"),a.slice(b,ga)}function v(a){return a>="a"&&a<="z"||a>="A"&&a<="Z"||a>="0"&&a<="9"||"_"===a||"$"===a||"-"===a||a>"~"}function w(){h();for(var b=ga;;){var c=d();if(")"===c)break;k(c)&&fa("Alias must be closed with a `)` but wasnt (eol)"),p()&&fa("Alias must be closed with a `)` but wasnt (eof)"),f()}var e=a.slice(b,ga);return e||fa("The alias() can not be empty but was"),h(),g(")","`alias` to be closed by `)`"),e}function x(){var a=d();"="===a&&(f(),h(),a=d());var b=void 0;switch(a){case"[":if(g("[","domain start"),h(),b=[],"["===d()){do{f(),h();var c=M();h(),","===d()&&(f(),h());var e=M();h(),g("]","range-end"),h(),b.push(c,e),","===d()&&(f(),h())}while("["===d())}else if("]"!==d())do{h();var i=M();h(),","===d()&&(f(),h());var j=M();h(),b.push(i,j),","===d()&&(f(),h())}while("]"!==d());return g("]","domain-end"),b;case"*":return f(),[sg,tg];case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":var k=M();return h(),[k,k]}fa("Expecting valid domain start, found `"+a+"`")}function y(){if("@"===d()){f();for(var b={},c=ga;d()>="a"&&d()<="z";)f();var e=a.slice(c,ga);switch(e){case"list":z(b);break;case"markov":A(b);break;case"max":case"mid":case"min":case"naive":break;case"minMaxCycle":case"splitMax":case"splitMin":default:fa("Expecting a strategy name after the `@` modifier (`"+e+"`)")}return b.valtype=e,b}}function z(b){h(),"prio("!==a.slice(ga,ga+5)&&fa("Expecting the priorities to follow the `@list`"),ga+=5,b.list=X(),g(")","list end")}function A(b){for(;;){if(h(),"matrix("===a.slice(ga,ga+7)){var c=a.slice(ga+7,ga=a.indexOf(")",ga)),d="return "+c,e=Function(d);b.matrix=e(),ga===-1&&fa("The matrix must be closed by a `)` but did not find any")}else if("legend("===a.slice(ga,ga+7))ga+=7,b.legend=X(),h(),g(")","legend closer");else{if("expand("!==a.slice(ga,ga+7))break;ga+=7,b.expandVectorsWith=M(),h(),g(")","expand closer")}f()}}function B(){for(g("#","comment start");!p()&&!k(d());)f();p()||f()}function C(){if(!H()){var a=K();h();var c=F();switch(h(),c){case"=":D(a);break;case"==":b.eq(a,K());break;case"!=":b.neq(a,K());break;case"<":b.lt(a,K());break;case"<=":b.lte(a,K());break;case">":b.gt(a,K());break;case">=":b.gte(a,K());break;case"&":b.neq(b.mul(a,K()),b.num(0));break;case"!&":b.mul(a,K(),b.num(0));break;case"|":b.neq(b.plus(a,K()),b.num(0));break;case"!|":b.eq(a,b.num(0)),b.eq(K(),b.num(0));break;case"^":b.eq(b.plus(b.isEq(a,0),b.isEq(K(),0)),1);break;case"!^":b.eq(b.isEq(a,b.num(0)),b.isEq(K(),b.num(0)));break;case"->":var d=K();b.lte(b.isNeq(a,b.num(0)),b.isNeq(d,b.num(0))),b.lte(b.isEq(d,b.num(0)),b.isEq(a,b.num(0)));break;case"!->":b.gt(a,b.num(0)),b.eq(K(),b.num(0));break;default:c&&fa("Unknown constraint op: ["+c+"]")}o()}}function D(a){var c="string"==typeof a&&!b.hasVar(a);c&&(a=b.decl(a));var e=K(a,c);h();var f=d();return p()||k(f)||m(f)?e:E(e,a,c)}function E(a,c,d){var e=G();switch(h(),e){case"==?":return d&&b.decl(c,[0,1],void 0,!1,!0),b.isEq(a,K(),c);case"!=?":return d&&b.decl(c,[0,1],void 0,!1,!0),b.isNeq(a,K(),c);case"<?":return d&&b.decl(c,[0,1],void 0,!1,!0),b.isLt(a,K(),c);case"<=?":return d&&b.decl(c,[0,1],void 0,!1,!0),b.isLte(a,K(),c);case">?":return d&&b.decl(c,[0,1],void 0,!1,!0),b.isGt(a,K(),c);case">=?":return d&&b.decl(c,[0,1],void 0,!1,!0),b.isGte(a,K(),c);case"+":return b.plus(a,K(),c);case"-":return b.minus(a,K(),c);case"*":return b.mul(a,K(),c);case"/":return b.div(a,K(),c);default:return void 0!==e&&fa("Unknown rop: `"+e+"`"),a}}function F(){var a=d();switch(a){case"=":return f(),"="===d()?(f(),"=="):"=";case"!":return f(),a=d(),"="===a?(f(),"!="):"&"===a?(f(),"!&"):"^"===a?(f(),"!^"):"|"===a?(f(),"!|"):"-"===a&&">"===e(1)?(f(),f(),"!->"):"!";case"<":return f(),"="===d()?(f(),"<="):"<";case">":return f(),"="===d()?(f(),">="):">";case"&":case"|":case"^":return f(),a;case"#":fa("Expected to parse a cop but found a comment instead");break;case"-":if(">"===e(1))return f(),f(),"->"}p()&&fa("Expected to parse a cop but reached eof instead"),fa("Unknown cop char: `"+a+"`")}function G(){var a=d();switch(a){case"=":f();var b=d();return"="===b?(f(),g("?","reifier suffix"),"==?"):"=";case"!":return f(),g("=","middle part of !=? op"),g("?","reifier suffix"),"!=?";case"<":return f(),"="===d()?(f(),g("?","reifier suffix"),"<=?"):(g("?","reifier suffix"),"<?");case">":return f(),"="===d()?(f(),g("?","reifier suffix"),">=?"):(g("?","reifier suffix"),">?");case"+":case"-":case"*":case"/":return f(),a;default:fa("Wanted to parse a rop but next char is `"+a+"`")}}function H(){if("distinct("===a.slice(ga,ga+9))I(9);else if("diff("===a.slice(ga,ga+5))I(5);else if("nall("===a.slice(ga,ga+5))T();else if("some("===a.slice(ga,ga+5))U();else{if("xnor("!==a.slice(ga,ga+5))return!1;V()}return!0}function I(a){ga+=a,h();var c=J();b.distinct(c),h(),g(")","distinct call closer"),o()}function J(){var a=[];for(h();!p()&&")"!==d();){var b=K();a.push(b),h(),","===d()&&(f(),h())}return a}function K(a,c){var e=d(),g=void 0;if("("===e)g=L();else if("["===e){var h=x();g=h[0]===h[1]&&2===h.length?h[0]:b.decl(void 0,h)}else if(e>="0"&&e<="9")g=M();else{var i=s(),j=d();"sum"===i&&"("===j?g=N(a):"product"===i&&"("===j?g=O(a):"all"===i&&"?"===j&&(f(),"("===d())?(c&&b.decl(a,[0,1],void 0,!1,!0),g=P(a)):"nall"===i&&"?"===j&&(f(),"("===d())?(c&&b.decl(a,[0,1],void 0,!1,!0),g=Q(a)):"none"===i&&"?"===j&&(f(),"("===d())?(c&&b.decl(a,[0,1],void 0,!1,!0),g=R(a)):"some"===i&&"?"===j&&(f(),"("===d())?(c&&b.decl(a,[0,1],void 0,!1,!0),g=S(a)):g=i}return g}function L(){g("(","group open"),h();var a=K();if(h(),"="===d()&&"="!==d())return D(a),h(),g(")","group closer"),a;if(")"===d())return f(),a;var b=E(a);return h(),g(")","group closer"),b}function M(){for(var b=ga;d()>="0"&&d()<="9";)f();return b===ga&&fa("Expecting to parse a number but did not find any digits ["+b+","+ga+"]["+d()+"]"),parseInt(a.slice(b,ga),10)}function N(a){g("(","sum call opener"),h();var c=J(),d=b.sum(c,a);return h(),g(")","sum closer"),d}function O(a){g("(","product call opener"),h();var c=J(),d=b.product(c,a);return h(),g(")","product closer"),d}function P(a){g("(","isall call opener"),h();var c=J(),d=b.decl();b.product(c,d);var e=b.isNeq(d,b.num(0),a);return h(),g(")","isall closer"),e}function Q(a){g("(","isnall call opener"),h();var c=J(),d=b.decl();b.product(c,d);var e=b.isEq(d,b.num(0),a);return h(),g(")","isnall closer"),e}function R(a){g("(","isnone call opener"),h();var c=J(),d=b.decl();b.sum(c,d);var e=b.isEq(d,b.num(0),a);return h(),g(")","isnone closer"),e}function S(a){g("(","issome call opener"),h();var c=J(),d=b.decl();b.sum(c,d);var e=b.isNeq(d,b.num(0),a);return h(),g(")","issome closer"),e}function T(){ga+=5,h();var a=J();b.product(a,b.num(0)),h(),g(")","nall closer"),o()}function U(){ga+=5,h();var a=J();b.sum(a,b.decl(void 0,[1,tg])),h(),g(")","some closer"),o()}function V(){ga+=5,h();var a=J();h(),g(")","xnor() closer"),o();var c=b.decl(),d=b.decl();b.sum(a,c),b.product(a,d),b.plus(b.isEq(c,0),b.isNeq(d,0),1)}function W(){for(var b=ga;d()>="0"&&d()<="9";)f();return a.slice(b,ga)}function X(){var a=[];h();for(var b=W();b;)a.push(parseInt(b,10)),h(),","===d()&&(++ga,h()),b=W();return a.length||fa("Expected to parse a list of at least some numbers but found none"),a}function Y(){for(var a=[];;){if(h(),")"===d())break;","===d()&&(f(),h());var b=s();a.push(b)}return a.length||fa("Expected to parse a list of at least some identifiers but found none"),a}function Z(){for(var a=[];;){h();var b=d();if(p()||k(b))break;","===b&&(f(),h());var c=s();a.push(c)}return a.length||fa("Expected to parse a list of at least some identifiers but found none"),a}function $(){for(var a="";!p()&&!k(d());)a+=d(),f();return a}function _(){if(g("@"),"custom"===a.slice(ga,ga+6)){ga+=6,h();var c=s();switch(h(),"="===d()&&(f(),h()),c){case"var-strat":aa();break;case"val-strat":ba();break;case"set-valdist":h();var e=s(),i=ca();b.setValueDistributionFor(e,JSON.parse(i));break;case"targets":da();break;case"nobool":case"noleaf":Z();break;default:fa("Unsupported custom rule: "+c)}}else"mode"===a.slice(ga,ga+4)?(ga+=4,ea()):fa("Unknown atrule");o()}function aa(){h();var a=!1;if("f"===d()){var c=s();"fallback"!==c&&fa("Expecting `fallback` here"),a=!0,h()}var e=!1;if("i"===d()){var i=s();"inverted"!==i&&fa("Expecting `inverted` here"),e=!0,h()}if("l"===d()||"("===d()){"l"===d()&&("list"!==s()&&fa("Unexpected ident after `inverted` (only expecting `list` or the list)"),h()),g("(");var j=Y();j.length?l(b.config,a?"varStrategyFallback":"varStrategy",{type:"list",inverted:e,priorityByName:j}):l(b.config,a?"varStrategyFallback":"varStrategy",{type:"naive"}),h(),g(")")}else{"="===d()&&(f(),h()),e&&fa("The `inverted` keyword is only valid for a prio list");var k=s();"list"===k&&fa("Use a grouped list of idents for vardist=list"),"naive"!==k&&"size"!==k&&"min"!==k&&"max"!==k&&"throw"!==k&&fa("Unknown var dist ["+k+"]"),l(b.config,a?"varStrategyFallback":"varStrategy",{type:k})}}function ba(){var a=s();o(),b.valueStratName=a}function ca(){return h(),"="===d()&&(f(),h()),$()}function da(){if(h(),"="===d()&&(f(),h()),"all"===a.slice(ga,ga+3))ga+=3,b.config.targetedVars="all";else{g("(");var c=Y();c.length&&(b.config.targetedVars=c),g(")")}}function ea(){h(),"="===d()&&(f(),h()),"constraints"===a.slice(ga,ga+"constraints".length)?ga+="constraints".length:"propagators"===a.slice(ga,ga+"propagators".length)&&(ga+="propagators".length)}function fa(b){throw c&&cd().log(a.slice(0,ga)+"##|PARSER_IS_HERE["+b+"]|##"+a.slice(ga)),b="Importer parser error: "+b+", source at #|#: `"+a.slice(Math.max(0,ga-20),ga)+"#|#"+a.slice(ga,Math.min(a.length,ga+20))+"`",new Error(b)}b||(b=new dj);for(var ga=0,ha=a.length;!p();)q();return b}function fd(a,b){for(var c=a.vardoms,d=0;d<b.length;d++){var e=b[d],f=c[e._boolVarIndex];if(void 0===f||1===la(f))break}return e}function gd(a,b,c){return a?hd(b,c):b}function hd(a,b){var c=void 0;c=a?a.slice(0):[];for(var d=ua(b),e=0;e<d.length;++e){var f=d[e];c.indexOf(f)<0&&c.push(f)}return c}function id(a,b,c,d){var e=fd(a,b),f=e.vector;if(null!=c){f=f?f.slice(0):[];var g=d-f.length;if(g>0)for(var h=0;h<g;++h)f.push(c);return f}return f&&f.length===d||dd("E_EACH_MARKOV_VAR_MUST_HAVE_PROB_VECTOR_OR_ENABLE_EXPAND_VECTORS"),f}function jd(a,b,c){function d(a){return a*eh}function e(a){return a*eh+ch}function f(a){var b=d(a),e=b+$g,f=qd(c,e);f&Ig&&(f^=Ig,rd(c,e,f))}function g(b,f){var g=Cd(a,n+b);g=k(g);var h=l(g,!0);if(!(la(h)>=0)){var i=d(g),j=c[i]++,m=i+$g;if(j>=255)rd(c,m,Zg);else{var o=qd(c,m);if(j<ah){var p=e(g),q=p+j*bh;rd(c,q,n)}rd(c,m,o|f)}}}function h(){for(n=0;n<a.length;){var b=n,c=a[n];switch(c){case pi:g(Zi,Jg|Ig),g($i,Jg|Ig),n+=Xi;break;case qi:g(Zi,Tg|Ig),g($i,Ug|Ig),n+=Xi;break;case xi:g(Zi,Yg),g($i,Yg),n+=Xi;break;case wi:for(var d=Cd(a,n+1),e=0;e<d;++e)g(Wi+2*e,Jg);n+=Wi+2*d;break;case oi:g(Zi,Lg),g($i,Mg),n+=Xi;break;case si:g(Zi,Jg),g($i,Jg),n+=Xi;break;case mi:for(var f=Cd(a,n+1),h=0;h<f;++h)g(Wi+2*h,Jg);n+=Wi+2*f;break;case ri:for(var i=Cd(a,n+1),j=0;j<i;++j)g(Wi+2*j,Vg);n+=Wi+2*i;break;case ui:for(var k=Cd(a,n+1),l=0;l<k;++l)g(Wi+2*l,Jg|Ig);n+=Wi+2*k;break;case vi:for(var m=Cd(a,n+1),o=0;o<m;++o)g(Wi+2*o,Wg);n+=Wi+2*m;break;case ti:for(var p=Cd(a,n+1),q=0;q<p;++q)g(Wi+2*q,Jg);n+=Wi+2*p;break;case Ei:for(var r=Cd(a,n+1),s=0;s<r;++s)g(Wi+2*s,Qg|Ig);g(Wi+2*r,Rg),n+=Wi+2*r+2;break;case Fi:for(var t=Cd(a,n+1),u=0;u<t;++u)g(Wi+2*u,Jg);g(Wi+2*t,Sg),n+=Wi+2*t+2;break;case ni:for(var v=Cd(a,n+1),w=0;w<v;++w)g(Wi+2*w,Kg|Ig);n+=Wi+2*v;break;case zi:for(var x=Cd(a,n+1),y=0;y<x;++y)g(Wi+2*y,Jg|Ig);g(Wi+2*x,Jg),n+=Wi+2*x+2;break;case Ai:g(1,Jg|Ig),g(3,Jg|Ig),g(5,Jg),n+=Vi;break;case Bi:g(1,Pg|Ig),g(3,Pg|Ig),g(5,Jg),n+=Vi;break;case Ii:case Ji:g(1,Jg|Ig),g(3,Jg|Ig),g(5,Jg|Ig),n+=Vi;break;case yi:for(var z=Cd(a,n+1),A=0;A<z;++A)g(Wi+2*A,Ng);g(Wi+2*z,Og),n+=Wi+2*z+2;break;case Ci:case Di:for(var B=Cd(a,n+1),C=0;C<B;++C)g(Wi+2*C,Jg);g(Wi+2*B,Jg),n+=Wi+2*B+2;break;case Gi:for(var D=Cd(a,n+1),E=0;E<D;++E)g(Wi+2*E,Jg|Ig);g(Wi+2*D,Xg|Ig),n+=Wi+2*D+2;break;case Hi:for(var F=Cd(a,n+1),G=0;G<F;++G)g(Wi+2*G,Jg|Ig);g(Wi+2*F,Jg|Ig),n+=Wi+2*F+2;break;case li:if(0!==n)return dd(" ! compiler problem @",b);++n;break;case Si:return;case Li:g(1,Jg|Ig),n+=Ti;break;case Ki:g(1,Jg),n+=Ti;break;case Mi:n+=Ti+Cd(a,n+1);break;case Ni:n+=Ui+Dd(a,n+1);break;case Oi:++n;break;case Pi:n+=2;break;case Qi:n+=3;break;case Ri:n+=4;break;default:cd().error("(cnt) unknown op",n," at",n,"ctrl+c now or log will fill up"),Wd(a,n,"(bnt) expecting bounty to run after the minifier and these ops should be gone")}}Wd(a,n,"ML OOB")}var i=b.varNames,j=i.length,k=b.getAlias,l=b.getDomain,m=b.domains,n=0;c||(c=new Uint8Array(j*eh)),c.fill(0),h();for(var o=0;o<m.length;++o){var p=m[o];p===!1||2!==eb(p)||xb(p)||f(o)}return c}function kd(a,b){return a[b*eh]}function ld(a,b){a[b*eh]=0}function md(a,b,c){return qd(a,b*eh+$g)}function nd(a,b,c,d){return qd(a,b*eh+ch+c*bh)}function od(a,b){var c=0|kd(a,b),d=c&&md(a,b,!0);return pd(d)}function pd(a){var b="0".repeat(32-a.toString(2).length)+a.toString(2),c=[];return a||c.push("BOUNTY_NONE"),(a&Ig)===Ig?c.push("NOT_BOOLY"):c.push("BOOLY"),(a&Jg)===Jg&&c.push("OTHER"),(a&Tg)===Tg&&c.push("LTE_LHS"),(a&Ug)===Ug&&c.push("LTE_RHS"),(a&Ng)===Ng&&c.push("ISALL_ARG"),(a&Og)===Og&&c.push("ISALL_RESULT"),(a&Lg)===Lg&&c.push("IMP_LHS"),(a&Mg)===Mg&&c.push("IMP_RHS"),(a&Pg)===Pg&&c.push("ISLTE_ARG"),(a&Qg)===Qg&&c.push("ISSAME_ARG"),(a&Rg)===Rg&&c.push("ISSAME_RESULT"),(a&Sg)===Sg&&c.push("ISSOME_RESULT"),(a&Vg)===Vg&&c.push("NALL"),(a&Kg)===Kg&&c.push("DIFF"),(a&Wg)===Wg&&c.push("SOME"),(a&Xg)===Xg&&c.push("SUM_RESULT"),(a&Yg)===Yg&&c.push("XOR"),(a&Zg)===Zg&&c.push("JUST_IGNORE"),"[ "+b+": "+c.join(", ")+" ]"}function qd(a,b){return a[b++]<<24|a[b++]<<16|a[b++]<<8|a[b]}function rd(a,b,c){a[b++]=c>>24&255,a[b++]=c>>16&255,a[b++]=c>>8&255,a[b]=255&c}function sd(a,b,c){function d(){++Gb}function e(a,b){return ob(Cd(a,b))}function f(a,b,c,d){if(!sb(b)){var e=md(a,b,d);return c?e:g(e)}return 0}function g(a){return(a|Ig)^Ig}function h(a,b){return(a&b)===b}function i(a,b){return sb(b)?0:kd(a,b)}function j(){for(tb=0;tb<a.length&&!Fb&&!Ib;){var b=tb,c=a[tb];switch(c){case mi:return Wd(a,tb,"all() should be solved and eliminated");case ni:k(a,tb);break;case Ji:tb+=Vi;break;case oi:l(a,tb);break;case yi:m(a,tb);break;case zi:n(a,tb);break;case Ai:p(a,tb);break;case Bi:r(a,tb);break;case Ci:t(a,tb);break;case Ei:u(a,tb);break;case Fi:w(a,tb);break;case Di:var d=Cd(a,tb+1);tb+=Wi+2*d+2;break;case pi:x(a,tb);break;case qi:y(a,tb);break;case Ii:tb+=Vi;break;case ri:z(a,tb);break;case si:tb+=Xi;break;case ti:return Wd(a,tb,"nors should be solved and eliminated");case Hi:var e=Cd(a,tb+1);tb+=Wi+2*e+2;break;case ui:return Wd(a,tb,"eqs should be aliased and eliminated");case vi:A(a,tb);break;case Gi:B(a,tb);break;case xi:D(a,tb);break;case wi:C(a,tb);break;case li:if(0!==tb)return Wd(a,tb," ! compiler problem @",b);++tb;break;case Si:return;case Li:case Ki:tb+=Ti;break;case Mi:ib(a,tb,Ti+Cd(a,tb+1));break;case Ni:ib(a,tb,Ui+Dd(a,tb+1));break;case Oi:ib(a,tb,1);break;case Pi:ib(a,tb,2);break;case Qi:ib(a,tb,3);break;case Ri:ib(a,tb,4);break;default:cd().error("(cut) unknown op",tb," at",tb,"ctrl+c now or log will fill up"),Wd(a,tb,"(cut) unknown op",tb)}}Fb||Ib||dd("ML OOB")}function k(a,b){var c=Cd(a,b+1),g=e(a,b+Zi),j=i(ub,g);if(!(j>1&&j<ah&&X(a,b,c,g,j))){if(2!==c)return void(tb+=Wi+2*c);var k=e(a,b+$i),l=i(ub,k);if(1===j)return E(a,b,g,k,g,k);if(1===l)return E(a,b,k,g,g,k);var m=Tg|Ug|Wg|Vg|Lg|Mg;if(j>1&&j<=ah){var n=f(ub,g),o=(n&m)>0,p=(n|m|Kg)^(m|Kg);if(h(n,Kg)&&o&&!p&&Da(b,g,j,k))return;if(h(n,Kg|Yg)&&Fa(a,b,g,j,k))return;if(Ga(g,k,j))return}if(l>1&&l<=ah){var q=f(ub,k),r=(q&m)>0,s=(q|m|Kg)^(m|Kg);if(r&&!s&&Da(b,k,l,g))return;if(h(q,Kg|Yg)&&Fa(a,b,k,l,g))return;if(Ga(k,g,l))return;var t=lb(g,!0),u=lb(k,!0);if(Ab(t)&&t===u)return Ed(a,b,xi),ld(ub,g),ld(ub,k),void d()}tb+=Xi}}function l(a,b){var c=e(a,b+Zi),d=e(a,b+$i),g=lb(c,!0),j=lb(d,!0),k=i(ub,c),l=i(ub,d);if(!Bb(g)||xb(j))return Ib=!0,!1;if(1===k)return F(a,b,c,d,!0);if(1===l)return F(a,b,c,d,!1);if(k>0){var m=f(ub,c);if(m===Lg&&Aa(a,c,k))return;if((m===Vg||m===(Vg|Lg))&&sa(a,c,k))return;if(2===k&&m===(Lg|Wg)&&ua(a,b,c,k))return;if(h(m,Og)){if(ha(a,b,c,k))return;if(2===k&&da(a,b,c,k))return}if(k>=3){if(m===(Wg|Vg|Lg)&&Sa(c,k))return;if(m===(Wg|Vg|Lg|Mg)&&Ua(c,k))return}}if(zb(g)&&zb(j)&&2===l){var n=f(ub,d,!0);if(n===(Mg|Og)&&ma(d,b,l,c))return}tb+=Xi}function m(a,b){var c=Cd(a,b+1),d=b+Wi,g=Wi+2*c+2,h=e(a,d+2*c),j=i(ub,h);if(j>0&&j<ah){if(1===j)return H(a,b,c,h);var k=f(ub,h);if(k===(Og|Ng)&&I(a,h,j))return;if(2===j&&k===(Vg|Og)&&pa(a,h,b,j))return;if(k===(Vg|Og)&&Ba(a,h,b,j))return}tb+=g}function n(a,b){var c=Cd(a,b+1),d=e(a,b+Wi+2*c);if(2!==c)return void(tb=b+Wi+2*c+2);var f=e(a,b+Zi),g=e(a,b+$i),h=i(ub,f),j=i(ub,g),k=i(ub,d);return 1===k?G(a,b,f,g,d,d):1===h&&o(f,g,d)?G(a,b,f,g,d,f):1===j&&o(g,f,d)?G(a,b,f,g,d,g):void(tb=b+Yi)}function o(a,b,c){var d=lb(c,!0);if(xb(d))return!0;var e=lb(a,!0),f=lb(b,!0),g=Ha(e,f);return wb(d)?!!g||(mb(a,gc(),!1,!0),!1):g===f&&g!==e}function p(a,b){var c=e(a,b+1),d=e(a,b+3),f=e(a,b+5),g=i(ub,c),h=i(ub,d),j=i(ub,f);return 1===j?M(a,b,c,d,f,f):1===g&&q(c,d,f,c,d)?M(a,b,c,d,f,c):1===h&&q(d,c,f,c,d)?M(a,b,c,d,f,d):void(tb=b+Vi)}function q(a,b,c,d,e){var f=lb(d,!0),g=lb(e,!0),h=lb(c,!0);return xb(h)?a===d?kb(f)<kb(g):pb(g)>pb(f):wb(h)?a===d?kb(f)>=kb(g):pb(g)<=pb(f):a===d?kb(f)<kb(g)&&pb(f)>=pb(g):pb(g)>pb(f)&&kb(g)<=kb(f)}function r(a,b){var c=e(a,b+1),d=e(a,b+3),g=e(a,b+5),j=i(ub,c),k=i(ub,d),l=i(ub,g),m=lb(g,!0);if(!Bb(m))return void(Ib=!0);if(1===l)return N(a,b,c,d,g,g);var n=lb(c,!0),o=lb(d,!0);if(1===j&&s(c,d,c,d,n,o))return N(a,b,c,d,g,c);if(1===k&&s(d,c,c,d,n,o))return N(a,b,c,d,g,d);if(l>0&&l<ah){if(vb(n)){var p=f(ub,g);if(h(p,Mg)){var q=f(ub,d);if(h(q,Lg)&&va(b,g,c,d,l))return}}if(vb(o)){var r=f(ub,g);if(h(r,Mg)){var t=f(ub,c);if(h(t,Lg)&&xa(b,g,c,d,l))return}}}tb=b+Vi}function s(a,b,c,d,e,f){return a===c?kb(e)<=kb(f)&&pb(e)>pb(f):pb(f)>=pb(e)&&kb(f)<kb(e)}function t(a,b){var c=Cd(a,b+1),d=b+Wi,f=Wi+2*c+2,g=e(a,d+2*c),h=i(ub,g);return 1===h?O(a,b,c,g,h):void(tb+=f)}function u(a,b){var c=Cd(a,b+1);if(2!==c)return void(tb=b+Wi+2*c+2);var d=e(a,b+Zi),f=e(a,b+$i),g=e(a,b+_i),h=i(ub,d),j=i(ub,f),k=i(ub,g);return 1===k?P(a,b,d,f,g,g):1===h&&v(d,f,g)?P(a,b,d,f,g,d):1===j&&v(f,d,g)?P(a,b,d,f,g,f):void(tb=b+Yi)}function v(a,b,c){var d=lb(c,!0);if(wb(d))return!0;var e=lb(a,!0),f=lb(b,!0),g=Ha(e,f);return xb(d)?!!g||(mb(a,gc(),!1,!0),!1):g===f&&g!==e}function w(a,b){var c=Cd(a,b+1),d=b+Wi,f=Wi+2*c+2,g=e(a,d+2*c),h=i(ub,g);return 1===h?Q(a,b,g,c):void(tb+=f)}function x(a,b){var c=e(a,b+Zi),d=e(a,b+$i),f=i(ub,c),g=i(ub,d);return 1===f?R(a,b,c,d,"lhs"):1===g?R(a,b,c,d,"rhs"):void(tb+=Xi)}function y(a,b){var c=e(a,b+Zi),d=e(a,b+$i),g=i(ub,c),j=i(ub,d);if(1===g)return S(a,b,c,d,!0);if(1===j)return S(a,b,c,d,!1);if(g>0){var k=f(ub,c);if((k===Vg||k===(Vg|Tg))&&ra(a,c,g))return;if(k===Tg&&za(a,c,g))return;if(2===g&&k===(Tg|Wg)&&ta(a,b,c,g))return;if(g>=3){if(k===(Wg|Vg|Tg)&&Ra(c,g))return;if(k===(Wg|Vg|Tg|Ug)&&Ta(c,g))return}if(h(k,Og)){if(ea(a,b,c,g))return;if(2===g&&ca(a,b,c,g))return}}if(2===j){var l=f(ub,d);if(l===(Ug|Og)&&ja(d,b,j))return;if(l===(Ug|Rg)&&oa(d,b,j,c))return}tb+=Xi}function z(a,b){var c=Cd(a,b+1),d=e(a,b+Zi),g=i(ub,d);if(!(g>1&&g<ah&&Y(a,b,c,d,g))){for(var h=0;h<c;++h){var j=e(a,b+Wi+2*h),k=i(ub,j);if(k>0){var l=f(ub,j);if(l===Vg&&Oa(j,k))return!0}}tb+=Wi+2*c}}function A(a,b){var c=Cd(a,tb+1),d=e(a,b+Zi),g=i(ub,d);if(!(g>1&&g<ah&&Z(a,b,c,d,g))){if(2===c){var h=e(a,b+$i);if(1===g)return void T(a,b,d,h,d,h);var j=i(ub,h);if(1===j)return void T(a,b,h,d,d,h)}for(var k=0;k<c;++k){var l=e(a,b+Wi+2*k),m=i(ub,l);if(m>0){var n=f(ub,l);if(n===Wg&&Pa(l,m))return!0}}tb+=Wi+2*c}}function B(a,b){for(var c=Cd(a,b+1),d=b+Wi,g=Wi+2*c+2,h=e(a,d+2*c),j=lb(h,!0),k=i(ub,h),l=Ab(j),m=!0,n=!0,o=dc(0),p=0,q=0,r=0,s=-1,t=!1,u=0;u<c;++u){var v=e(a,d+2*u),w=lb(v,!0),x=kb(w),y=pb(w);o=Nc(o,w),p+=x,q+=y,x===y?(t=s>=0,r=x,s=u):(Ab(w)||(n=!1),zb(w)||(m=!1))}if(!t){if(l&&n&&pb(j)===q)return void Ed(a,b,yi);if(1===k){if(o===Ha(j,o))return U(a,b,c,h);if(m&&j===ec(0,c-1))return aa(a,b,c,h);if(m&&j===ec(1,c))return ba(a,b,c,h)}if(k>=2){var z=f(ub,h);if(n&&2===k){if(z===(Qg|Xg)&&Va(a,b,h,k,c,o,p,q,r,s,n))return;if(z===(Pg|Xg)&&Za(a,b,h,k,c,p,q,r,s))return}if(3===k&&2===c&&z===(Qg|Xg)&&ab(a,b,h,k,o,c))return;if(k<ah&&_a(a,b,h,k,o,c))return}tb+=g}}function C(a,b){var c=Cd(a,b+1);if(2===c){var d=e(a,b+Zi),g=e(a,b+$i),j=i(ub,d),k=i(ub,g);if(1===j)return V(a,b,d,g,d,g);if(1===k)return V(a,b,g,d,d,g);if(j>0&&k>0){var l=f(ub,d,!0),m=f(ub,g,!0),n=!h(l,Ig),o=!h(m,Ig);if(n||o)return $a(a,b,d,n,g,o)}}tb+=Wi+2*c}function D(a,b){var c=e(a,b+Zi),d=e(a,b+$i),g=i(ub,c),j=i(ub,d);if(1===g)return W(a,b,c,d,c,d);if(1===j)return W(a,b,d,c,c,d);var k=lb(c,!0),l=lb(d,!0);if(!Bb(k)||!Bb(l))return void(Ib=!0);if(g>0&&j>0){var m=f(ub,c,!0),n=f(ub,d,!0),o=!h(m,Ig),p=!h(n,Ig),q=Tg|Ug|Wg|Vg|Lg|Mg;if(g<ah){var r=(m&q)>0,s=(m|q|Yg)^(q|Yg);if(o&&r&&!s&&Ea(b,c,g,d))return;if(2===g){if(h(m,Og)&&Ja(c,d,b,g,j))return;if(o&&h(m,Sg)&&La(c,d,b,g,j))return;if(m===(Yg|Wg)&&Na(c,d,b,g))return}var t=eb(l);if(Ia(c,d,g,l,t,p))return}if(j<ah){var u=(n&q)>0,v=(n|q|Yg)^(q|Yg);if(p&&u&&!v&&Ea(b,d,j,c))return;if(2===j){if(h(n,Og)&&Ja(d,c,b,j,g))return;if(p&&h(n,Sg)&&La(d,c,b,j,g))return;if(n===(Yg|Wg)&&Na(d,c,b,j))return}var w=eb(k);if(Ia(d,c,j,k,w,o))return}}tb+=Xi}function E(a,b,c,e,f,g){qb.push(function(a,b,c,d){var e=c(f),h=c(g);if(eb(e)<eb(h)){var i=b(f);d(g,Qb(h,i))}else{var j=b(g);d(f,Qb(e,j))}}),Hd(a,b,Xi),ld(ub,c),ld(ub,e),d()}function F(a,b,c,e,f){qb.push(function(a,b,d,g){var h=d(c),i=d(e);if(f)if(xb(i)){var j=Qb(h,0);h!==j&&g(c,j)}else{var k=Qa(h,0);h!==k&&g(c,k)}else if(xb(h)){var l=Qb(i,0);h!==l&&g(e,l)}else{var m=Qa(i,0);i!==m&&g(e,m)}}),Hd(a,b,Xi),ld(ub,c),ld(ub,e),d()}function G(a,b,c,e,f,g){qb.push(function(a,b,d,g){var h=d(c),i=d(e),j=d(f);if(vb(h))vb(i)?(j=h===i?Qb(j,0):Pb(j,0),g(f,j)):Bb(j)?(i=Qb(i,la(h)),g(e,i),j=Qb(j,0),g(f,j)):wb(j)?g(e,h):(i=Qb(i,la(h)),g(e,i));else if(vb(i))Bb(j)?(h=Qb(h,la(i)),g(c,h),j=Qb(j,0),g(f,j)):wb(j)?g(c,i):(h=Qb(h,la(i)),g(c,h));else if(Bb(j))Ha(h,i)!==og&&(i=Qb(i,b(c)),g(e,i)),j=Qb(j,0),g(f,j);else if(wb(j)){var k=b(c,Ha(h,i));i=dc(k),g(e,i)}else{var l=b(c);i=Qb(i,l),g(e,i)}}),Hd(a,b,Yi),ld(ub,c),ld(ub,e),ld(ub,f),d()}function H(a,b,c,e){var f=gb(a,b,c);qb.push(function(a,b,d,g){for(var h=1,i=0;i<c;++i)if(0===b(f[i])){h=0;break}var j=d(e),k=Cb(j,h);g(e,k)}),Hd(a,b,Wi+2*c+2),ld(ub,e),d()}function I(a,b,c){var d=lb(b,!0);if(!zb(d))return!1;for(var f=[],g=[],h=[],i=[],j=[],k=0;k<c;++k){var l=nd(ub,b,k);if(j.indexOf(l)<0){for(var m=Cd(a,l+1),n=e(a,l+Wi+2*m),o=[],p=!1,q=0;q<m;++q){var r=e(a,l+Wi+2*q);o.push(r),r===b&&(p=!0)}n!==b?f.push(l):p?h.push(l):g.push(l),i.push(o),j.push(l)}}return!g.length&&(f.length?J(a,b,i,j,d,c,f,h):L(a,b,i,j,d))}function J(a,b,c,f,g,h,i,j){if(3!==h)return!1;var k=i[0],l=Cd(a,k+1),m=j[0],n=Cd(a,m+1),o=e(a,k+Wi+2*l);if(2!==l||2!==n){var p=K(a,b,o,c);if(!p)return!1}var q=e(a,k+Zi);q===b&&(q=e(a,k+$i));var r=e(a,m+Zi);return r===b&&(r=e(a,m+$i)),Pd(a,k,k,oi,o,q),Pd(a,m,m,oi,o,r),qb.push(function(a,c,d,e){var f=d(b),g=f;if(0===c(q))g=Pb(g,0);else{var h=c(o);h?g=Qb(g,0):c(r)>0&&(g=Pb(g,0))}f!==g&&e(b,g)}),ld(ub,q),ld(ub,r),ld(ub,b),ld(ub,o),d(),!0}function K(a,b,c,d){for(var e=0,f=[],g=0;g<d.length;++g)for(var h=d[g],i=g>=2,j=0;j<h.length;++j){var k=h[j];k!==b&&(!i&&j<2?(i=!0,++e):f.push(k))}var l=f.length;if(l){var m=Sd(a,0,l,Xi);if(!m)return!1;for(var n=0;n<l;){var o=m.pop(),p=Ud(a,o);do{var q=f[n];Nd(a,o,Ud(a,o),oi,[c,q]),++n,p-=Xi,o+=Xi}while(p>=Xi&&n<l)}}return!0}function L(a,b,c,e,f){qb.push(function(a,d,e,f){for(var g=!0,h=0,i=c.length;h<i;++h){for(var j=c[h],k=0,l=j.length;k<l;++k){var m=j[k];if(m!==b){var n=e(m);xb(n)||(g=!1)}}if(!g){f(b,dc(0));break}}});for(var g=0,h=e.length;g<h;++g){var i=e[g],j=c[g];Hd(a,i,Wi+2*j.length+2);for(var k=0,l=j.length;k<l;++k)ld(ub,j[k])}return d(),!0}function M(a,b,c,e,f,g){qb.push(function(a,b,d,g){var h=d(c),i=d(e),j=d(f);if(Bb(j)){var k=b(c),l=b(e);j=k<l?Qb(j,0):Pb(j,0),g(f,j)}else wb(j)?(h=dc(pb(h)),i=dc(kb(i)),g(c,h),g(e,i)):(h=dc(kb(h)),
i=dc(pb(i)),g(c,h),g(e,i))}),Hd(a,b,Vi),ld(ub,c),ld(ub,e),ld(ub,f),d()}function N(a,b,c,e,f,g){qb.push(function(a,b,d,g){var h=d(c),i=d(e),j=d(f);if(Bb(j)){var k=b(c),l=b(e);j=k<=l?Qb(j,0):Pb(j,0),g(f,j)}else wb(j)?(h=dc(pb(h)),i=dc(kb(i)),g(c,h),g(e,i)):(h=dc(kb(h)),i=dc(pb(i)),g(c,h),g(e,i))}),Hd(a,b,Vi),ld(ub,c),ld(ub,e),ld(ub,f),d()}function O(a,b,c,e,f){var g=gb(a,b,c);qb.push(function(a,b,d,f){for(var h=0,i=0;i<c;++i)if(0===b(g[i])){h=1;break}var j=d(e),k=Cb(j,h);f(e,k)}),Hd(a,b,Wi+2*c+2),ld(ub,e),d()}function P(a,b,c,e,f,g){qb.push(function(a,b,d,g){var h=d(f);if(!vb(h)){var i=d(c),j=d(e),k=Ha(i,j);if(k)if(vb(i))h=Cb(h,i===j);else if(vb(j))g(c,j),h=Cb(h,!0);else{var l=kb(k),m=dc(l);g(c,m),g(e,m),h=Cb(h,!0)}else h=Cb(h,!1)}g(f,h)}),Hd(a,b,Yi),ld(ub,c),ld(ub,e),ld(ub,f),d()}function Q(a,b,c,e){var f=gb(a,b,e);qb.push(function(a,b,d,e){for(var g=!1,h=0;h<f.length;++h){var i=f[h];if(b(i)>0){g=!0;break}}var j=d(c);j=g?Qb(j,0):Pb(j,0),e(c,j)}),Hd(a,b,Wi+2*e+2),ld(ub,c),d()}function R(a,b,c,e,f){qb.push(function(a,b,d,f){var g=d(c),h=d(e),i=pb(g),j=kb(h);if(i>=j)if(vb(g)){var k=Jb(h,i);f(e,k)}else{var l=Eb(g,j);f(c,l)}}),Hd(a,b,Xi),ld(ub,c),ld(ub,e),d()}function S(a,b,c,e,f){qb.push(function(a,b,d,g){var h=d(c),i=d(e),j=pb(h),k=kb(i);if(j>k)if(f){var l=Pb(h,k);g(c,l)}else{var m=Ob(i,j);g(e,m)}}),Hd(a,b,Xi),ld(ub,c),ld(ub,e),d()}function T(a,b,c,e,f,g){qb.push(function(a,b,d,f){var g=d(e),h=d(c);wb(g)?f(c,Qb(h,0)):wb(h)?f(e,Qb(g,0)):xb(g)||xb(g)||f(c,Qb(h,0))}),Hd(a,b,Xi),ld(ub,c),ld(ub,e),d()}function U(a,b,c,e){var f=gb(a,b,c);qb.push(function(a,b,c,d){for(var g=0,h=0;h<f.length;++h){var i=f[h],j=b(i);g+=j}var k=Qa(c(e),g);d(e,k)}),Hd(a,b,Wi+2*c+2),ld(ub,e),d()}function V(a,b,c,e,f,g){qb.push(function(a,b,c,d){var e=c(f),h=c(g);wb(e)?d(g,Pb(h,0)):wb(h)?d(f,Pb(e,0)):xb(e)?d(g,Qb(h,0)):xb(h)?d(f,Qb(e,0)):(d(f,Qb(e,0)),d(g,Qb(h,0)))}),Hd(a,b,Xi),ld(ub,c),ld(ub,e),d()}function W(a,b,c,e,f,g){qb.push(function(a,b,c,d){var e=c(f),h=c(g);wb(e)?d(g,Qb(h,0)):wb(h)?d(f,Qb(e,0)):xb(e)?d(g,Pb(h,0)):xb(h)?d(f,Pb(e,0)):(d(f,Qb(e,0)),d(g,Pb(h,0)))}),Hd(a,b,Xi),ld(ub,c),ld(ub,e),d()}function X(a,b,c,d,f){for(var g=!1,h=0;h<f;++h){var i=nd(ub,d,h);if(i!==b){var j=Ad(a,i);if(j===ni){var k=Cd(a,i+1);if(c>k&&(g||_(a,b,c),_(a,i,k),$(a,i,k,b,c)))return hb(a,i,k),Hd(a,i,Wi+2*k),!0}else if(j===zi){var l=Cd(a,i+1);if(c>=l&&(g||_(a,b,c),_(a,i,l),$(a,i,l,b,c))){var m=e(a,i+Wi+2*l),n=lb(m),o=Qb(n,0);return n!==o&&mb(m,o),hb(a,i,l),Hd(a,i,Wi+2*l+2),!0}}else if(j===Ei){var p=Cd(a,i+1);if(c<=p&&(g||_(a,b,c),_(a,i,p),$(a,b,c,i,p))){var q=e(a,i+Wi+2*p),r=lb(q),s=Pb(r,0);return r!==s&&mb(q,s),hb(a,i,p),Hd(a,i,Wi+2*p+2),!0}}}}}function Y(a,b,c,d,f){for(var g=!1,h=0;h<f;++h){var i=nd(ub,d,h);if(i!==b){var j=Ad(a,i);if(j===ri){var k=Cd(a,i+1);if(c<k&&(g||_(a,b,c),_(a,i,k),$(a,b,c,i,k)))return hb(a,i,k),Hd(a,i,Wi+2*k),!0}else if(j===Ci){var l=Cd(a,i+1);if(c<=l&&(g||_(a,b,c),_(a,i,l),$(a,b,c,i,l))){var m=e(a,i+Wi+2*l),n=lb(m),o=Qb(n,0);return n!==o&&mb(m,o),hb(a,i,l),Hd(a,i,Wi+2*l+2),!0}}else if(j===yi){var p=Cd(a,i+1);if(c<=p&&(g||_(a,b,c),_(a,i,p),$(a,b,c,i,p))){var q=e(a,i+Wi+2*p),r=lb(q),s=Pb(r,0);return r!==s&&mb(q,s),hb(a,i,p),Hd(a,i,Wi+2*p+2),!0}}}}}function Z(a,b,c,f,g){for(var h=!1,i=0;i<g;++i){var j=nd(ub,f,i);if(j!==b){var k=Ad(a,j);if(k===vi){var l=Cd(a,j+1);if(c<l&&(h||_(a,b,c),_(a,j,l),$(a,b,c,j,l)))return hb(a,j,l),Hd(a,j,Wi+2*l),d(),!0}else if(k===Fi){var m=Cd(a,j+1);if(c<=m&&(h||_(a,b,c),_(a,j,m),$(a,b,c,j,m))){var n=e(a,j+Wi+2*m),o=lb(n),p=Qb(o,0);return o!==p&&mb(n,p),hb(a,j,m),Hd(a,j,Wi+2*m+2),d(),!0}}else if(k===Di){var q=Cd(a,j+1);if(c<=q&&(h||_(a,b,c),_(a,j,q),$(a,b,c,j,q))){var r=e(a,j+Wi+2*q),s=lb(r),t=Pb(s,0);return s!==t&&mb(r,t),hb(a,j,q),Hd(a,j,Wi+2*q+2),d(),!0}}}}}function $(a,b,c,d,e){for(var f=0,g=0,h=Cd(a,b+Wi+2*f),i=0;g<e;){for(i=Cd(a,d+Wi+2*g);h===i;){if(++f,f>=c)return!0;h=Cd(a,b+Wi+2*f)}++g}return!1}function _(a,b,c){for(var d=0;d<c;++d){var e=b+Wi+2*d,f=Cd(a,e),g=ob(f);f!==g&&Fd(a,e,g)}Xd(a,b+Wi,c)}function aa(a,b,c,e){var f=gb(a,b,c);qb.push(function(a,b,c,d){for(var g=0,h=0;h<f.length;++h)g+=b(f[h]);var i=Qa(c(e),g);d(e,i)}),Ed(a,b,ri),Fd(a,b+1,c);for(var g=0;g<c;++g)Fd(a,b+Wi+2*g,f[g]);Jd(a,b+Wi+2*c,2),ld(ub,e),d()}function ba(a,b,c,e){var f=gb(a,b,c);qb.push(function(a,b,d,g){for(var h=!0,i=-1,j=0;j<c;++j){var k=f[j],l=d(k);if(xb(l)){h=!1;break}wb(l)||(i=k)}if(h){var m=d(i);m=Qb(m,0),g(i,m)}for(var n=0,o=0;o<c;++o)n+=b(f[o]);var p=d(e);p=Qa(p,n),g(e,p)}),Ed(a,b,vi),Fd(a,b+1,c);for(var g=0;g<c;++g)Fd(a,b+Wi+2*g,f[g]);Jd(a,b+Wi+2*c,2),ld(ub,e),d()}function ca(a,b,c,f){var g=e(a,b+$i);if(!zb(lb(c,!0))||!zb(lb(g,!0)))return!1;var h=nd(ub,c,0),i=nd(ub,c,1),j=h===b?i:h;if(2!==Cd(a,j+1))return!1;var k=e(a,j+Zi),l=e(a,j+$i);return!(!zb(lb(k,!0))||!zb(lb(l,!0)))&&(Od(a,j,2,Ci,k,l,c),Ld(a,b,2,vi,c,g),ld(ub,c),ld(ub,g),ld(ub,k),ld(ub,l),d(),!0)}function da(a,b,c,f){var g=e(a,b+$i);if(!zb(lb(c,!0))||!zb(lb(g,!0)))return!1;var h=nd(ub,c,0),i=nd(ub,c,1),j=h===b?i:h;if(2!==Cd(a,j+1))return!1;if(!zb(lb(k,!0))||!zb(lb(l,!0)))return!1;var k=e(a,j+Zi),l=e(a,j+$i);return Od(a,j,2,Ci,k,l,c),Ld(a,b,2,vi,c,g),ld(ub,c),ld(ub,g),ld(ub,k),ld(ub,l),d(),!0}function ea(a,b,c,d){for(var f=e(a,b+$i),g=Math.min(d,ah),h=0;h<g;++h){var i=nd(ub,c,h);if(i!==b){var j=Ad(a,i);if(j===yi&&ga(b,i,c,f))return!0}}return!1}function ga(b,c,f,g){for(var h=Cd(a,c+1),i=(e(a,c+Wi+2*h),0);i<h;++i){var j=e(a,c+Wi+2*i);if(j===g)return Hd(a,b,Xi),ld(ub,f),ld(ub,g),d(),!0}return!1}function ha(a,b,c,d){for(var f=e(a,b+$i),g=Math.min(d,ah),h=0;h<g;++h){var i=nd(ub,c,h);if(i!==b){var j=Ad(a,i);if(j===yi&&ia(b,i,c,f))return!0}}return!1}function ia(b,c,f,g){for(var h=Cd(a,c+1),i=(e(a,c+Wi+2*h),0);i<h;++i){var j=e(a,c+Wi+2*i);if(j===g)return Hd(a,b,Xi),ld(ub,f),ld(ub,g),d(),!0}return!1}function ja(b,c,f){var g=nd(ub,b,0),h=nd(ub,b,1),i=c===g?h:g,j=e(a,c+Zi),k=lb(j,!0),l=lb(b,!0);if(pb(k)>1&&pb(l)>1)return!1;if(xb(l))return Ib=!0,!1;if(pb(k)>pb(l))return Ib=!0,!1;for(var m=Cd(a,i+1),n=pb(k),o=0;o<m;++o){var p=e(a,i+Wi+2*o),q=lb(p,!0);if(pb(q)<n)return!1}if(m<2)return!1;if(m>2){var r=ka(a,i,m,j,u);if(!r)return!1}var s=e(a,i+Zi),t=e(a,i+$i);ld(ub,j),ld(ub,b);var u=gb(a,i,m);return Ld(a,c,2,qi,j,s),Pd(a,i,2,qi,j,t),qb.push(function(a,c,d,e){var f=d(b),g=d(j);f=Ob(f,pb(g));for(var h=!1,i=0;i<u.length;++i){var k=d(u[i]);if(wb(k)||!xb(f)&&0===c(k)){h=!0;break}}f=h?Pb(f,0):Qb(f,0),e(b,f)}),d(),!0}function ka(a,b,c,d){var f=c-2,g=Sd(a,0,f,Xi);if(!g)return!1;for(var h=0;h<f;){var i=g.pop(),j=Ud(a,i);do{var k=e(a,b+Wi+2*(h+2));Ed(a,i,qi),Fd(a,i+1,2),Fd(a,i+Zi,d),Fd(a,i+$i,k),++h,j-=Xi,i+=Xi}while(j>=Xi&&h<f);j&&Jd(a,i,j)}return!0}function ma(b,c,f,g){var h=nd(ub,b,0),i=nd(ub,b,1),j=c===h?i:h,k=lb(g,!0),l=lb(b,!0);if(pb(k)>1&&pb(l)>1)return!1;if(xb(l))return Ib=!0,!1;if(pb(k)>pb(l))return Ib=!0,!1;var m=Cd(a,j+1);if(m<2)return Ib=!0,!1;if(m>2){var n=na(a,j,m,g,q);if(!n)return!1}var o=e(a,j+Zi),p=e(a,j+$i);ld(ub,g),ld(ub,b);var q=gb(a,j,m);return Ld(a,c,2,oi,g,o),Pd(a,j,m,oi,g,p),qb.push(function(a,c,d,e){var f=d(b),h=d(g),i=f;if(Bb(h)&&(c(h),h=d(g)),xb(h))i=Qb(i,0);else{for(var j=!1,k=0;k<m;++k){var l=q[k],n=d(l);if(!xb(n)){j=!0;break}}i=j?Pb(i,0):Qb(i,0)}f!==i&&e(b,i)}),d(),!0}function na(a,b,c,d){var f=c-2,g=Sd(a,0,f,Xi);if(!g)return!1;for(var h=0;h<f;){var i=g.pop(),j=Ud(a,i);do{var k=e(a,b+Wi+2*(h+2));Ed(a,i,oi),Fd(a,i+1,2),Fd(a,i+Zi,d),Fd(a,i+$i,k),++h,j-=Xi,i+=Xi}while(j>=Xi&&h<f);j&&Jd(a,i,j)}return!0}function oa(b,c,f,g){var h=nd(ub,b,0),i=nd(ub,b,1),j=h===c?i:h;if(2!==Cd(a,j+1))return!1;var k=e(a,j+Zi),l=e(a,j+$i),m=lb(k,!0),n=lb(l,!0),o=lb(g,!0),p=lb(b,!0);return!!(zb(m)&&zb(n)&&zb(o)&&zb(p))&&(Ld(a,c,2,oi,g,b),ld(ub,g),ld(ub,b),d(),!0)}function pa(a,b,c,d){var f=nd(ub,b,0),g=nd(ub,b,1),h=f===c?g:f,i=Cd(a,h+1),j=Cd(a,c+1);if(3!==i)return!1;for(var k=e(a,h+Wi),l=e(a,h+Wi+2),m=e(a,h+Wi+4),n=0;n<j;++n){var o=e(a,c+Wi+2*n);if(o===k)return qa(a,h,l,m,k);if(o===l)return qa(a,h,k,m,l);if(o===m)return qa(a,h,k,l,m)}return!1}function qa(a,b,c,e,f){return Fd(a,b+1,2),Fd(a,b+Zi,c),Fd(a,b+$i,e),Ed(a,b+_i,Pi),ld(ub,f),ld(ub,c),ld(ub,e),d(),!0}function ra(a,b,c){if(xb(lb(b,!0)))return!1;for(var f=0;f<c;++f){var g=nd(ub,b,f),h=Ad(a,g);if(h===qi){var i=e(a,g+$i);i!==b&&(ld(ub,i),Hd(a,g,Xi))}else{if(h!==ri)return!1;for(var j=e(a,g+1),k=0;k<j;++k){var l=e(a,g+Wi+2*k);l!==b&&ld(ub,l)}Hd(a,g,Wi+2*j)}}var m=lb(b,!0),n=Pb(m,0);return m!==n&&mb(b,n),ld(ub,b),d(),!0}function sa(a,b,c){if(xb(lb(b,!0)))return Ib=!0,!1;for(var f=0;f<c;++f){var g=nd(ub,b,f),h=Ad(a,g),i=e(a,g+1);if(h===oi){var j=e(a,g+$i);j!==b&&(ld(ub,j),Hd(a,g,Xi))}else{if(h!==ri)return!1;for(var k=0;k<i;++k){var l=e(a,g+Wi+2*k);l!==b&&ld(ub,l)}Hd(a,g,Wi+2*i)}}var m=lb(b,!0),n=Pb(m,0);return m!==n&&mb(b,n),ld(ub,b),d(),!0}function ta(a,b,c,f){var g=lb(c,!0);if(!zb(g))return!1;var h=e(a,b+$i),i=lb(h,!0);if(!zb(i))return!1;var j=nd(ub,c,0),k=nd(ub,c,1),l=j===b?k:j,m=Cd(a,l+1),n=gb(a,l,m,c);return Hd(a,b,Xi),Md(a,l,m,vi,[h].concat(n)),qb.push(function(a,b,d,e){var f=d(c),g=d(h),i=f;if(pb(i)>kb(g)&&(i=Pb(i,kb(g))),!wb(i)){for(var j=!0,k=0,l=n.length;k<l;++k){var m=n[k],o=d(m);if(xb(o))break;if(Bb(o)){j=!0;break}j=!1}j&&(i=Qb(i,0))}f!==i&&e(c,i)}),ld(ub,c),d(),!0}function ua(a,b,c,f){var g=lb(c,!0);if(!zb(g))return!1;var h=e(a,b+$i),i=lb(h,!0);if(!zb(i))return!1;var j=nd(ub,c,0),k=nd(ub,c,1),l=j===b?k:j,m=Cd(a,l+1),n=gb(a,l,m,c);return Hd(a,b,Xi),Md(a,l,m,vi,[h].concat(n)),qb.push(function(a,b,d,e){var f=d(c),g=d(h),i=f;if(i=xb(g)?Qb(i,0):Pb(i,0),!wb(i)){for(var j=!0,k=0,l=n.length;k<l;++k){var m=n[k],o=d(m);if(xb(o))break;if(Bb(o)){j=!0;break}j=!1}j&&(i=Qb(i,0))}f!==i&&e(c,i)}),ld(ub,c),d(),!0}function va(b,c,d,f,g){for(var h=0;h<g;++h){var i=nd(ub,c,h);if(i!==b){var j=Ad(a,i);if(j===oi&&e(a,i+Zi)===f&&e(a,i+$i)===c)return wa(c,d,f,b,i)}}return!1}function wa(b,c,e,f,g){var h=lb(c,!0),i=lb(e,!0),j=la(h);if(j<=kb(i))return Ib=!0,!1;if(j>pb(i))return Ib=!0,!1;var k=yc([0,0,j,pb(i)]),l=Ha(i,k);return i===l||(mb(e,l),l)?(Ld(a,g,2,wi,b,e),Hd(a,f,Vi),ld(ub,e),ld(ub,b),d(),!0):Fb=!0}function xa(b,c,d,f,g){for(var h=0;h<g;++h){var i=nd(ub,c,h);if(i!==b){var j=Ad(a,i);if(j===oi&&e(a,i+Zi)===d&&e(a,i+$i)===c)return ya(c,d,f,b,i)}}return!1}function ya(b,c,e,f,g){var h=lb(b,!0);if(h=Qb(h,0),!h)return Fb=!0,!1;var i=lb(c,!0),j=lb(e,!0);return la(j)<=kb(i)?(Ib=!0,!1):(mb(b,h),Ld(a,g,2,qi,c,e),Hd(a,f,Vi),ld(ub,c),ld(ub,e),ld(ub,b),d(),!0)}function za(a,b,c){for(var f=lb(b,!0),g=[],h=0;h<c;++h){var i=nd(ub,b,h),j=e(a,i+$i);if(pb(lb(j))<kb(f))return mb(j,0),!0;g.push(j),Hd(a,i,Xi)}qb.push(function(a,c,d,e){for(var f=d(b),h=f,i=0,j=g.length;i<j;++i){var k=g[i];h=Pb(h,kb(d(k)))}f!==h&&e(b,h)}),ld(ub,b);for(var k=0,l=g.length;k<l;++k)ld(ub,g[k]);return d(),!0}function Aa(a,b,c){var f=lb(b,!0);if(wb(f)||xb(f))return Ib=!0,!1;for(var g=0;g<c;++g){var h=nd(ub,b,g),i=e(a,h+$i);if(wb(i))return Ib=!0,!1}for(var j=[],k=0;k<c;++k){var l=nd(ub,b,k),m=e(a,l+$i);j.push(m),Hd(a,l,Xi)}var n=Qa(f,0);mb(b,n),ld(ub,b);for(var o=0,p=j.length;o<p;++o)ld(ub,j[o]);return d(),!0}function Ba(a,b,c,d){for(var f=Cd(a,c+1),g=Wi+2*f+2,h=[],i=0;i<f;++i){var j=e(a,c+Wi+2*i);h.push(j)}for(var k=0,l=0;l<d;++l){var m=nd(ub,b,l);if(m!==c){var n=Ad(a,m);if(n!==ri)return!1;if(2!==Cd(a,m+1))return!1;++k}}var o=Wi+2*(f+1),p=k-1,q=void 0;if(p&&(q=Sd(a,0,p,o),!q))return!1;var r=h.slice(0),s=0;p&&Td(a,q,p,o,function(e,f,g){var i=void 0;do{if(s>=d)return!0;i=nd(ub,b,s++)}while(i===c);return Ca(a,b,h.slice(0),r,i,e,g),!1});var t=nd(ub,b,s++);t===c&&(t=nd(ub,b,s++)),Ca(a,b,h.slice(0),r,t,c,g),qb.push(function(a,c,d,e){var f=d(b);r.some(function(a){var b=d(a);if(!xb(b)){var e=c(a);if(0===e)return f=Pb(f,0),!0}}),e(b,f)}),ld(ub,b);for(var u=0,v=r.length;u<v;++u)ld(ub,r[u]);return!0}function Ca(a,b,c,d,f,g,h){var i=e(a,f+Zi),j=e(a,f+$i),k=i===b?j:i;c.push(k),d.push(k),Nd(a,g,h,ri,c),f!==g&&Hd(a,f,Xi)}function Da(b,c,f,g){if(!Ab(lb(c)))return!1;for(var h=[],i=[],j=[],k=[],l=[],m=[],n=[],o=[],p=!1,q=[],r=[],s=[],t=[],u=[],v=0;v<f;++v){var w=nd(ub,c,v),x=Ad(a,w);if(2!==Cd(a,w+1))return!1;var y=e(a,w+Zi),z=e(a,w+$i),A=lb(y,!0),B=lb(z,!0);if(!Ab(y===c?B:A))return!1;var C=y===c?z:y;if(x===qi){if(pb(A)>pb(B)||kb(B)<kb(A))return Ib=!0,!1;y===c?(h.push(w),i.push(C)):(j.push(w),k.push(C))}else if(x===oi)y===c?(r.push(w),s.push(C)):(t.push(w),u.push(C));else if(x===ni){if(b!==w)return!1;q.push(C),p=!0}else x===vi?(l.push(w),m.push(C)):(n.push(w),o.push(C))}for(var D=0,E=h.length;D<E;++D){var F=h[D],G=e(a,F+Zi);G===c&&(G=e(a,F+$i)),ld(ub,G),Ld(a,F,2,vi,G,g)}for(var H=0,I=j.length;H<I;++H){var J=j[H],K=e(a,J+Zi);K===c&&(K=e(a,J+$i)),ld(ub,K),Ld(a,J,2,ri,K,g)}for(var L=0,M=l.length;L<M;++L){var N=l[L],O=e(a,N+Zi);O===c&&(O=e(a,N+$i)),ld(ub,O),Ld(a,N,2,qi,g,O)}for(var P=0,Q=n.length;P<Q;++P){var R=n[P],S=e(a,R+Zi);S===c&&(S=e(a,R+$i)),ld(ub,S),Ld(a,R,2,qi,S,g)}for(var T=0,U=r.length;T<U;++T){var V=r[T],W=e(a,V+Zi);W===c&&(W=e(a,V+$i)),ld(ub,W),Ld(a,V,2,vi,W,g)}for(var X=0,Y=t.length;X<Y;++X){var Z=t[X],$=e(a,Z+Zi);$===c&&($=e(a,Z+$i)),ld(ub,$),Ld(a,Z,2,ri,$,g)}return Hd(a,b,Xi),rb.push(c),qb.push(function(a,b,d,e){for(var f=d(c),h=d(g),j=f,l=kb(f),n=pb(f),p=0;p<i.length;++p){var q=i[p],r=d(q),t=kb(r);if(n>t){var v=pb(r);v>=n?(r=Ob(r,n),e(q,r)):(r=Qa(r,v),e(q,r),f=Pb(f,v))}}for(var w=0;w<k.length;++w){var x=k[w],y=d(x),z=pb(y);if(l<z){var A=kb(y);A<=l?(y=Pb(y,l),e(x,y)):(y=Qa(y,A),e(x,y),f=Ob(f,z))}}for(var B=0;B<m.length;++B){var C=m[B],D=d(C);wb(D)?f=Qb(f,0):yb(D)&&(D=Qb(D,0),e(C,D))}for(var E=0;E<o.length;++E){var F=o[E],G=d(F);xb(G)?f=Pb(f,0):xb(G)&&(G=Pb(G,0),e(F,G))}for(var H=0;H<s.length;++H){var I=s[H],J=d(I);xb(J)||wb(f)||(wb(J)?f=Pb(f,0):xb(J)?f=Qb(f,0):e(I,Qb(J,0)))}for(var K=0;K<u.length;++K){var L=u[K],M=d(L);xb(M)?f=Pb(f,0):Bb(M)&&(M=Qb(M,0))}vb(f)?(h=Qb(h,la(f)),e(g,h)):f=Qb(f,b(g)),f!==j&&e(c,f)}),ld(ub,c),ld(ub,g),d(),!0}function Ea(b,c,f,g){if(!Bb(lb(c)))return!1;for(var i=[],j=[],k=[],l=[],m=!1,n=[],o=[],p=0;p<f;++p){var q=nd(ub,c,p),r=Ad(a,q);if(2!==Cd(a,q+1))return!1;var s=e(a,q+Zi),t=e(a,q+$i),u=s===c?t:s;if(0===kd(ub,u))return!1;if(h(md(ub,u),Ig))return!1;if(r===qi){var v=lb(s,!0),w=lb(t,!0);if(pb(v)>pb(w)||kb(w)<kb(v))return Ib=!0,!1;if(!Ab(s===c?w:v))return!1;s===c?i.push(q):j.push(q)}else if(r===oi)s===c?n.push(q):o.push(q);else if(r===xi){if(b!==q)return!1;m=!0}else r===vi?(2!==Cd(a,q+1),k.push(q)):l.push(q)}for(var x=0,y=i.length;x<y;++x){var z=i[x],A=e(a,z+Zi);A===c&&(A=e(a,z+$i)),ld(ub,A),Ld(a,z,2,vi,A,g)}for(var B=0,C=j.length;B<C;++B){var D=j[B],E=e(a,D+Zi);E===c&&(E=e(a,D+$i)),ld(ub,E),Ld(a,D,2,ri,E,g)}for(var F=0,G=k.length;F<G;++F){var H=k[F],I=e(a,H+Zi);I===c&&(I=e(a,H+$i)),ld(ub,I),Ld(a,H,2,qi,g,I)}for(var J=0,K=l.length;J<K;++J){var L=l[J],M=e(a,L+Zi);M===c&&(M=e(a,L+$i)),ld(ub,M),Ld(a,L,2,qi,M,g)}for(var N=0,O=n.length;N<O;++N){var P=n[N],Q=e(a,P+Zi);Q===c&&(Q=e(a,P+$i)),ld(ub,Q),Ld(a,P,2,vi,Q,g)}for(var R=0,S=o.length;R<S;++R){var T=o[R],U=e(a,T+Zi);U===c&&(U=e(a,T+$i)),ld(ub,U),Ld(a,T,2,ri,U,g)}return Hd(a,b,Xi),rb.push(c),qb.push(function(a,b,d,e){var f=d(c);f=0===b(g)?Qb(f,0):Pb(f,0),e(c,f)}),ld(ub,c),ld(ub,g),d(),!0}function Fa(a,b,c,f,g){for(var h=0,i=0;i<f;++i){var j=nd(ub,c,i);Ad(a,j)===xi&&(h=j)}if(2!==Cd(a,h+1))return!1;var k=e(a,h+Zi);k===c&&(k=e(a,h+$i));var l=lb(g,!0),m=lb(k,!0),n=lb(c,!0);return!(!Ab(l)||!Ab(m)||Ha(n,l)!==l||Ha(n,m)!==m)&&(Hd(a,b,Xi),fb(k,g),d(),!0)}function Ga(b,c,f){var g=lb(b),h=lb(c);if(g===h&&2===eb(g))for(var i=0;i<f;++i){var j=nd(ub,b,i),k=Ad(a,j);if(k===ni){var l=Cd(a,j+1);if(2!==l)continue;var m=e(a,j+Zi),n=e(a,j+$i),o=void 0;if(m===b){if(n===c)continue;o=n}else{if(m===c)continue;o=m}var p=lb(o);if(g===p)return nb(o,c,"double bin diff"),Hd(a,j,Xi),ld(ub,b),ld(ub,c),ld(ub,o),d(),!0}}return!1}function Ia(b,c,g,i,j,k){var l=2===j;if(!k&&!l)return!1;for(var m=0;m<g;++m){var n=nd(ub,b,m),o=Ad(a,n);if(o===xi){var p=e(a,n+Zi),q=e(a,n+$i),r=void 0;if(p===b){if(q===c)continue;r=q}else if(q===b){if(p===c)continue;r=p}else dd("X should be left or right of its xors");var s=!1,t=lb(r,!0);if(l&&t===i)nb(r,c),s=!0;else if(l&&2===eb(t))fb(c,r),s=!0;else if(k){var u=f(ub,r,!0);h(u,Ig)||(fb(c,r),s=!0)}if(s)return Hd(a,n,Xi),ld(ub,b),ld(ub,c),ld(ub,r),d(),!0}}return!1}function Ja(b,c,d,e,f){for(var g=0;g<e;++g){var h=nd(ub,b,g);if(h!==d){var i=Ad(a,h);if(i===yi)return Ka(b,c,d,h)}}dd("bounty should have asserted that an isall existed")}function Ka(b,c,e,f){var g=Cd(a,f+1);return Ed(a,f,Ci),Fd(a,f+Wi+2*g,c),Hd(a,e,Xi),qb.push(function(a,d,e,f){var g=e(b),h=e(c);Bb(h)&&(h=dc(d(c))),g=wb(h)?Qb(g,0):Pb(g,0),f(b,g)}),ld(ub,b),ld(ub,c),hb(a,f,g),d(),!0}function La(b,c,d,e,f){for(var g=0;g<e;++g){var h=nd(ub,b,g);if(h!==d){var i=Ad(a,h);if(i===Fi)return Ma(b,c,d,h)}}dd("bounty should have asserted that an issome existed")}function Ma(b,c,e,f){var g=Cd(a,f+1),h=f+Wi+2*g,i=gb(a,f,g);return ld(ub,c),ld(ub,b),Ed(a,f,Di),Fd(a,h,c),Hd(a,e,Xi),qb.push(function(a,d,e,f){var g=e(c),h=e(b);if(wb(g))h=Qb(h,0),f(b,h);else if(wb(h))g=Pb(g,0),f(c,g);else if(xb(g))h=Pb(h,0),f(b,h);else if(xb(h))g=Pb(g,0),f(c,g);else{for(var j=!0,k=!1,l=-1,m=0;m<i.lenght;++m){var n=i[m],o=e(n);if(xb(o)){k=!0;break}wb(o)||(j=!1,l=m)}if(k)h=Qb(h,0);else if(j)h=Pb(h,0);else{h=Qb(h,0);var p=i[l],q=e(p);q=Qb(q,0),f(p,q)}f(b,h)}}),d(),!0}function Na(b,c,f,g){var h=nd(ub,b,0),i=nd(ub,b,1),j=h===f?i:h;if(2!==Cd(a,j+1))return!1;var k=lb(b,!0);if(!Bb(k))return Ib=!0,!1;var l=e(a,j+Zi);return l===b&&(l=e(a,j+$i)),qb.push(function(a,d,e,f){var g=e(c),h=e(l),i=e(b);i=wb(g)?Qb(i,0):xb(g)?Pb(i,0):wb(h)?Qb(i,0):0===d(c)?Qb(i,0):Pb(i,0),f(b,i)}),Hd(a,j,Xi),Ld(a,f,2,oi,c,l),ld(ub,c),ld(ub,l),ld(ub,b),d(),!0}function Oa(b,c){if(c>=ah)return!1;var f=lb(b,!0);if(wb(f))return Ib=!0,!1;if(xb(f))return Ib=!0,!1;for(var g=[],h=[],i=0;i<c;++i){for(var j=nd(ub,b,i),k=Cd(a,j+1),l=0;l<k;++l){var m=e(a,j+Wi+2*l);m!==b&&h.push(m)}g.indexOf(j)<0&&g.push(j)}wb(f)||mb(b,dc(0));for(var n=0,o=g.length;n<o;++n){var p=g[n],q=Cd(a,p+1),r=Wi+2*q;Hd(a,p,r)}for(var s=0,t=h.length;s<t;++s){var u=h[s];ld(ub,u)}return ld(ub,b),d(),!0}function Pa(b,c){if(c>=ah)return!1;var f=lb(b,!0);if(xb(f))return Ib=!0,!1;if(wb(f))return Ib=!0,!1;for(var g=[],h=[],i=0;i<c;++i){for(var j=nd(ub,b,i),k=Cd(a,j+1),l=0;l<k;++l){var m=e(a,j+Wi+2*l);m!==b&&h.push(m)}g.indexOf(j)<0&&g.push(j)}yb(f)&&mb(b,f=Qb(f,0));for(var n=0,o=g.length;n<o;++n){var p=g[n],q=Cd(a,p+1),r=Wi+2*q;Hd(a,p,r)}for(var s=0,t=h.length;s<t;++s){var u=h[s];ld(ub,u)}return ld(ub,b),d(),!0}function Ra(b,c){if(c>=ah)return!1;for(var f=void 0,g=void 0,h=[],i=[],j=void 0,k=void 0,l=0;l<c;++l){var m=nd(ub,b,l);if(!m)break;var n=Ad(a,m);if(2!==Cd(a,m+1))return!1;var o=e(a,m+Zi),p=e(a,m+$i),q=o===b?p:o;if(n===ri)h.push(m),i.push(q);else if(n===vi){if(g)return!1;g=m,k=q}else{if(f)return!1;f=m,j=q}}Ld(a,f,2,vi,j,k),Hd(a,g,Xi);for(var r=0,s=i.length;r<s;++r){var t=i[r];Ld(a,h[r],2,qi,t,k),ld(ub,t)}return qb.push(function(a,c,d,e){var f=d(b),g=f;if(!wb(g))for(var h=0,l=i.length;h<l;++h){var m=i[h],n=d(m);if(xb(n)||0!==c(m)){g=Pb(g,0);break}}wb(d(k))&&(g=Qb(g,0)),g=Pb(g,c(j)),f!==g&&e(b,g)}),ld(ub,j),ld(ub,k),ld(ub,b),d(),!0}function Sa(b,c){if(c>=ah)return!1;for(var f=void 0,g=void 0,h=[],i=[],j=void 0,k=void 0,l=0;l<c;++l){var m=nd(ub,b,l);if(!m)break;var n=Ad(a,m);if(2!==Cd(a,m+1))return!1;var o=e(a,m+Zi),p=e(a,m+$i),q=o===b?p:o;if(n===ri)h.push(m),i.push(q);else if(n===vi){if(g)return!1;g=m,k=q}else{if(f)return!1;f=m,j=q}}Ld(a,f,2,vi,j,k),Hd(a,g,Xi);for(var r=0,s=i.length;r<s;++r){var t=i[r];Ld(a,h[r],2,oi,t,k),ld(ub,t)}return qb.push(function(a,c,d,e){var f=d(b),g=f;if(!wb(g))for(var h=0,l=i.length;h<l;++h){var m=i[h],n=d(m);if(xb(n)||0!==c(m)){g=Pb(g,0);break}}var o=d(k);Bb(o)&&(c(o),o=d(k)),wb(o)&&(g=Qb(g,0));var p=d(j);Bb(p)&&(c(p),p=d(j)),wb(p)&&(g=Pb(g,0)),f!==g&&e(b,g)}),ld(ub,j),ld(ub,k),ld(ub,b),d(),!0}function Ta(b,c){if(c>4||c>=ah)return!1;for(var f=void 0,g=void 0,h=void 0,i=void 0,j=void 0,k=void 0,l=void 0,m=void 0,n=0;n<c;++n){var o=nd(ub,b,n),p=Ad(a,o),q=e(a,o+Zi),r=e(a,o+$i),s=q===b?r:q;p===ri?(l=s,i=o):p===vi?(k=s,h=o):q===b?(f=o,m=s):(g=o,j=s)}return Ld(a,f,2,qi,j,m),Ld(a,g,2,qi,l,m),Ld(a,h,2,vi,k,m),Ld(a,i,2,ri,j,l),qb.push(function(a,c,d,e){var f=d(b);1===c(j)?(f=Qb(f,0),e(b,f)):0===c(k)?(f=Qb(f,0),e(b,f)):c(l)>0?(f=Pb(f,0),e(b,f)):0===c(m)&&(f=Pb(f,0),e(b,f))}),ld(ub,j),ld(ub,k),ld(ub,l),ld(ub,m),ld(ub,b),d(),!0}function Ua(b,c){if(4!==c||c>=ah)return!1;for(var f=void 0,g=void 0,h=void 0,i=void 0,j=void 0,k=void 0,l=void 0,m=void 0,n=0;n<c;++n){var o=nd(ub,b,n),p=Ad(a,o),q=e(a,o+Zi),r=e(a,o+$i);if(p===ri)l=q===b?r:q,i=o;else if(p===vi)k=q===b?r:q,h=o;else{var s=q===b?r:q;q===b?(f=o,m=s):(g=o,j=s)}}return!!(zb(lb(j,!0))&&zb(lb(k,!0))&&zb(lb(l,!0))&&zb(lb(m,!0)))&&(Ld(a,f,2,oi,j,m),Ld(a,g,2,oi,l,m),Ld(a,h,2,vi,k,m),Ld(a,i,2,ri,j,l),rb.push(b),qb.push(function(a,c,d,e){var f=d(b);1===c(j)?(f=Qb(f,0),e(b,f)):0===c(k)?(f=Qb(f,0),e(b,f)):c(l)>0?(f=Pb(f,0),e(b,f)):0===c(m)&&(f=Pb(f,0),e(b,f))}),ld(ub,j),ld(ub,k),ld(ub,l),ld(ub,m),ld(ub,b),d(),!0)}function Va(a,b,c,d,f,g,h,i,j,k,l){var m=nd(ub,c,0),n=nd(ub,c,1),o=m===b?n:m,p=Cd(a,o+1);if(2!==p)return!1;var q=e(a,o+Zi),r=e(a,o+$i),s=e(a,o+aj),t=q;t===c&&(t=r);var u=lb(c,!0),v=lb(t,!0),w=la(v);if(w>=0&&!fa(u,w))return Ib=!0,!1;var x=Ha(u,g);return x===g&&(l&&w===i?(Ed(a,b,yi),Ya(b,o,f,c,s,t,j,k)):w>=0?Wa(a,b,f,c,o,s,t,w,i,j,k):Xa(a,b,f,c,o,s,t,v,j,k))}function Wa(a,b,c,d,e,f,g,h,i,j,k){if(h===j)Ed(a,b,Di);else{if(h!==i)return!1;Ed(a,b,yi)}return Ya(b,e,c,d,f,g,j,k)}function Xa(a,b,c,d,e,f,g,h,i,j){if(h===ec(i+1,i+c-(i?1:0)))Ed(a,b,Fi);else{if(h!==ec(i,i-(i?1:0)+(c-1)))return!1;Ed(a,b,Ci)}return Ya(b,e,c,d,f,g,i,j)}function Ya(b,c,e,f,g,h,i,j){var k=cb(i,j,e,b);Fd(a,b+Wi+2*k,g);var l=gb(a,b,k);return db(f,l),Hd(a,c,Yi),ld(ub,g),ld(ub,f),ld(ub,h),d(),!0}function Za(a,b,c,f,g,h,i,j,k){var l=nd(ub,c,0),m=nd(ub,c,1),n=l===b?m:l,o=e(a,n+1),p=e(a,n+3),q=e(a,n+5),r=o;r===c&&(r=p);var s=lb(r,!0),t=la(s);if(t<0)return!1;var u=lb(c,!0);if(!fa(u,t))return Ib=!0,!1;var v=ec(h,i),w=Ha(u,v);if(w!==v)return!1;var x=0;if(o===c)if(t===j)x=Di;else{if(t!==j-(j?1:0)+(g-1))return!1;x=Ci}else if(t===j+1)x=Fi;else{if(t!==j-(j?1:0)+g)return!1;x=yi}Ed(a,b,x);var y=gb(a,b,g),z=cb(j,k,g,b);return Fd(a,b+Wi+2*z,q),db(c,y),Hd(a,n,Vi),ld(ub,c),d(),!0}function $a(a,b,c,e,f,g){var h=f,i=c;g||(h=c,i=f),fb(i,h),Hd(a,b,Xi),ld(ub,c),ld(ub,f),d()}function _a(a,b,c,e,f,g){var h=lb(c,!0);if(!Ab(h))for(var i=0;i<e;++i){var j=nd(ub,c,i);if(j!==b){var k=Ad(a,j),l=bb(k,!0,a,j,c);if(l===fh)return}}if(f!==Ha(h,f))return!1;var m=gb(a,b,g),n=h;return qb.push(function(a,b,d,e){for(var f=0,h=0;h<g;++h)f+=b(m[h]);var i=Qa(n,f);n!==i&&e(c,i,!1,!0)}),Ed(a,b,Fi),ld(ub,c),d(),!0}function ab(a,b,c,f,g,h){var i=nd(ub,c,0),j=nd(ub,c,1);if(i===b?i=nd(ub,c,2):j===b&&(j=nd(ub,c,2)),Ad(a,i)!==Ei||Ad(a,j)!==Ei)return!1;var k=Cd(a,i+1),l=Cd(a,j+1);if(2!==k||2!==l)return!1;var m=e(a,b+Zi),n=e(a,b+$i),o=e(a,i+Zi),p=e(a,i+$i),q=e(a,i+aj),r=e(a,j+Zi),s=e(a,j+$i),t=e(a,j+aj),u=o;u===c&&(u=p);var v=r;v===c&&(v=s);var w=lb(u,!0),x=la(w),y=lb(v,!0),z=la(y);return!(1!==x&&2!==x||1!==z&&2!==z||x===z)&&(Ed(a,b,yi),Fd(a,b+_i,2===x?q:t),Ed(a,i,zi),Fd(a,i+Zi,m),Fd(a,i+$i,n),Fd(a,i+aj,1===x?q:t),Hd(a,j,Yi),ld(ub,m),ld(ub,n),ld(ub,c),ld(ub,q),ld(ub,u),ld(ub,t),ld(ub,v),d(),!0)}function bb(a,b,c,d,f){switch(a){case pi:case qi:case Ii:case Ji:case Gi:case Hi:case ni:case ui:return fh;case xi:case wi:case oi:case si:case mi:case ri:case vi:case ti:return gh;case Ki:return gh;case Li:return fh;case zi:case Ei:if(!b)return hh;for(var g=Cd(c,d+1),h=0;h<g;++h)if(e(c,d+Wi+2*h)===f)return fh;return gh;case Ai:case Bi:return b?e(c,d+1)===f||e(c,d+3)===f?fh:gh:hh;case yi:case Ci:case Fi:case Di:return gh;case li:case Mi:case Ni:case Oi:case Pi:case Qi:case Ri:case Si:return dd("should not be used for these ops");default:dd("(ml_isBooly) unknown op: "+a)}}function cb(b,c,d,f){if(c>=0){if(c!==d-1){var g=e(a,f+Wi+2*(d-1));Fd(a,f+Wi+2*c,g)}--d,Fd(a,f+1,d),Ed(a,f+Wi+2*(d+1),Pi)}return d}function db(a,b){qb.push(function(c,d,e,f){for(var g=e(a),h=0,i=0,j=b.length;i<j;++i){var k=d(b[i]);k&&++h}var l=Qa(g,h);g!==l&&f(a,l)})}function fb(a,b){var c=lb(b,!0),d=!0;qb.push(function(e,f,g,h){var i=f(a),j=void 0;j=0===i?Pb(c,0):Qb(c,0),h(b,j,!0,d)}),nb(b,a,"cutAddPseudoBoolyAlias")}function gb(a,b,c){for(var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,f=[],g=0;g<c;++g){var h=e(a,b+Wi+2*g);h!==d&&f.push(h),ld(ub,h)}return f}function hb(a,b,c){for(var d=0;d<c;++d){var f=e(a,b+Wi+2*d);ld(ub,f)}}function ib(a,b,c){switch(Ad(a,b+c)){case Oi:case Pi:case Qi:case Ri:case Mi:case Ni:Id(a,b,c),tb=b;break;default:tb=b+c}}var jb=cd(),lb=b.getDomain,mb=b.setDomain,nb=b.addAlias,ob=b.getAlias,qb=b.solveStack,rb=b.leafs,sb=b.isConstant,tb=0,ub=void 0,Db=void 0,Fb=!1,Gb=0,Hb=0,Ib=!1;do jb.time("-> cut_loop "+Hb),ub=jd(a,b,ub),Db=qb.length,Gb=0,j(),jb.timeEnd("-> cut_loop "+Hb),jb.log("   - end cutter outer loop",Hb,", removed:",qb.length-Db," vars, total changes:",Gb,", emptyDomain =",Fb,"once=",c),++Hb;while(!Fb&&Gb&&!c&&!Ib);return Fb?-1:Hb+(Ib?1:0)}function td(a,b){function c(b){var c=m(Cd(a,p+Zi)),d=m(Cd(a,p+$i)),e=b+":"+c+","+d,f=b+":"+Ra(k(c,!0))+","+Ra(k(d,!0));return void 0!==q[e]?void Hd(a,p,Xi):(q[e]=1,r[e]=f,void(p+=Xi))}function d(b){var c=m(Cd(a,p+1)),d=m(Cd(a,p+3)),e=m(Cd(a,p+5)),f=b+":"+c+","+d,g=b+":"+Ra(k(e,!0))+"="+Ra(k(c,!0))+","+Ra(k(d,!0)),h=q[f];if(void 0===h)q[f]=e,r[f]=g,p+=Vi;else if(h=m(h),Hd(a,p,Vi),e!==h){var i=Ha(k(e,!0),k(h,!0));if(!i)return u=!0;l(h,i),o(e,h)}}function e(b){var c=m(Cd(a,p+1)),d=m(Cd(a,p+3)),e=m(Cd(a,p+5)),f=b+":"+e+"="+c+","+d,g=b+":"+Ra(k(e,!0))+"="+Ra(k(c,!0))+","+Ra(k(d,!0));if(void 0!==q[f])return void Hd(a,p,Vi);q[f]=1,r[f]=g;var h=k(e,!0),i=!xb(h)&&eb(h)<=2;if(i){var j=b+":["+h+"]="+c+","+d,l=q[j];if(void 0!==l)return l=m(l),Hd(a,p,Vi),void(e===l||o(e,l));q[j]=e,r[j]=g}p+=Vi}function f(b){var c=Cd(a,p+1),d=Wi+2*c+2;Xd(a,p+Wi,c);for(var e="",f="",g=0;g<c;++g){var h=m(Cd(a,p+Wi+2*g));e+=h+" ",f+=Ra(k(h,!0))}var i=m(Cd(a,p+Wi+2*c)),j=b+":"+i+"="+e,l=b+":"+Ra(k(i,!0))+"="+f;if(void 0!==q[j])return void Hd(a,p,d);q[j]=1,r[j]=l;var n=k(i,!0);if(Ab(n)){var s=b+":["+n+"]="+e,t=q[s];if(void 0!==t)return t=m(t),Hd(a,p,d),void(i===t||o(i,t));q[s]=i,r[s]=l}p+=d}function g(b){var c=Cd(a,p+1),d=Wi+2*c+2;Xd(a,p+Wi,c);for(var e="",f="",g=0;g<c;++g){var h=m(Cd(a,p+Wi+2*g));e+=h+" ",f+=Ra(k(h,!0))}var i=m(Cd(a,p+Wi+2*c)),j=b+":="+e,n=b+":"+f,s=q[j];if(void 0===s)q[j]=i,r[j]=n,p+=d;else if(s=m(s),Hd(a,p,d),i!==s){var t=Ha(k(s,!0),k(i,!0));l(s,t),o(i,s)}}function h(b){var c=Cd(a,p+1),d=Wi+2*c;Xd(a,p+Wi,c);for(var e="",f="",g=0;g<c;++g){var h=m(Cd(a,p+Wi+2*g));e+=h+" ",f+=Ra(k(h,!0))}var i=b+":="+e,j=b+":"+f;return void 0!==q[i]?void Hd(a,p,d):(q[i]=1,r[i]=j,void(p+=d))}function i(b){var c=Cd(a,p+1);if(2!==c)return!1;var d=m(Cd(a,p+Zi)),e=m(Cd(a,p+$i)),f=m(Cd(a,p+aj));if(e<d){var g=e;e=d,d=g}var h=k(d,!0),i=k(e,!0);if(2!==eb(h))return!1;var j=la(i);if(j<0||!fa(h,j))return!1;var l=Qb(h,j),s=la(l),t=n(void 0,s,!1,!1,!0),u="issame"===b?"isdiff":"issame",v=u+":"+d+","+t,w=b+":"+Ra(k(f,!0))+"="+Ra(k(d,!0))+","+Ra(k(e,!0)),x=q[v];if(void 0===x){var y=b+":"+d+","+e;return q[y]=f,r[y]=w,!1}var z=k(f,!0);return 2!==eb(z)||xb(z)||z!==k(x,!0)?Pd(a,p,c,wi,f,x):(o(f,x),Hd(a,p,Yi)),!0}function j(){for(;p<a.length&&!u;){++jh;var b=a[p];switch(b){case oi:c("->");break;case si:c("!->");break;case Ai:e("<?");break;case Bi:e("<=?");break;case yi:f("isall");break;case zi:i("isdiff")||f("isdiff");break;case Ci:f("isnall");break;case Di:f("isnone");break;case Ei:i("issame")||f("issame");break;case Fi:f("issome");break;case mi:h("all");break;case ni:h("diff");break;case pi:c("<");break;case qi:c("<=");break;case ri:h("nall");break;case ti:h("none");break;case ui:h("same");break;case vi:h("some");break;case wi:h("xnor");break;case xi:h("^");break;case Ii:d("-");break;case Ji:d("/");break;case Gi:g("sum");break;case Hi:g("product");break;case li:if(0!==p)return Wd(a,p,"deduper problem found START");++p;break;case Si:return q;case Li:case Ki:p+=Ti;break;case Mi:p+=Ti+Cd(a,p+1);break;case Ni:p+=Ui+Dd(a,p+1);break;case Oi:++p;break;case Pi:p+=2;break;case Qi:p+=3;break;case Ri:p+=4;break;default:Wd(a,p,"(dd) unknown op")}}u||Wd(a,p,"(dd) ML OOB")}++ih;var k=b.getDomain,l=b.setDomain,m=b.getAlias,n=b.addVar,o=b.addAlias,p=0,q={},r={},s=0,t=0,u=!1;return j(),cd().log(" - dedupe removed",s,"constraints and aliased",t,"result vars, emptyDomain=",u),u?-1:t}function ud(a,b,c){function d(a){ta>=ra&&g(),sa[ta++]=a}function e(a){a>65535&&ha("Need 32bit num support but missing it",a),ta>=ra-1&&g(),sa[ta++]=a>>8&255,sa[ta++]=255&a}function f(a){a>4294967295&&ha("This requires 64bit support",a),ta>=ra-3&&g(),sa[ta++]=a>>24&255,sa[ta++]=a>>16&255,sa[ta++]=a>>8&255,sa[ta++]=255&a}function g(a){var b=ra;ra+=a?a:Math.max(Math.ceil(.1*ra),10),"undefined"==typeof Buffer?sa=ArrayBuffer.transfer?new Uint8Array(ArrayBuffer.transfer(sa.buffer,ra)):new Uint8Array(vd(sa.buffer,ra)):(sa=new Uint8Array(Buffer.concat([sa],ra)),sa.fill(0,b))}function h(){return pa[oa]}function i(a){return pa[oa+a]}function j(a,b){return String.fromCharCode.apply(String,_toConsumableArray(pa.slice(a,b)))}function k(){++oa}function l(a,b){b||(b=""),h()!==a&&ha("Expected "+b+" `"+a+"`, found `"+h()+"`"),k()}function m(){for(;oa<qa&&o(h());)k()}function n(){for(;!u();){var a=h();if(s(a))k();else{if(!r(a))break;G()}}}function o(a){return a===Ch||a===Hh}function p(a){return a===ph||a===qh}function q(a){return a===ph||a===qh||a===vh}function r(a){return a===vh}function s(a){return o(a)||p(a)}function t(){if(m(),oa<qa){var a=h();a===vh?G():p(a)?k():ha("Expected EOL but got `"+h()+"`")}}function u(){return oa>=qa}function v(){switch(n(),h()){case nh:return w();case lh:return $();default:if(!u())return H()}}function w(){k(),m();var a=y();if(m(),h()===oh){a=[a];do k(),m(),a.push(y()),m();while(!u()&&h()===oh)}var b=C();m();for(var c=void 0;i(0)===Th&&i(1)===$h&&i(2)===Zh&&i(3)===Th&&i(4)===ei&&i(5)===xh;)c||(c=[]),oa+=6,m(),c.push(y()),m(),l(Eh,"Alias must be closed"),m();var d=D();t();var e=void 0;"string"==typeof a?e=x(a,b,d):a.forEach(function(a){return x(a,b,d)}),c&&("string"!=typeof a&&ha("Cant use alias when declaring multiple vars at once (because which should be aliased?)"),c.forEach(function(a){return ja(ia(a,void 0,d,!1,!0,ha),e)}))}function x(a,b,c){return ia(a,b,c,!1,!0,ha)}function y(){return h()===Fh?z():A()}function z(){l(Fh);for(var a="";!u();){var b=h();if(b===Fh)break;b!==vh&&q(b)&&ha("Quoted identifier wasnt closed at eol"),a+=String.fromCharCode(b),k()}return u()&&ha("Quoted identifier wasnt closed at eof"),a||ha("Expected to parse identifier, found none"),k(),a}function A(){var a=h(),b="";for(a>=Jh&&a<=Sh&&ha("Unquoted ident cant start with number");!u()&&(a=h(),B(a));)b+=String.fromCharCode(a),k();return b||ha("Expected to parse identifier, found none"),b}function B(a){switch(a){case xh:case Eh:case oh:case wh:case Dh:case Fh:case vh:return!1}return!s(a)}function C(){var a=h();a===th&&(k(),m(),a=h());var b=void 0;switch(a){case wh:if(l(wh,"domain start"),m(),b=[],h()===wh){do{k(),m();var c=T();m(),h()===oh&&(k(),m());var d=T();m(),l(Dh,"range-end"),m(),b.push(c,d),h()===oh&&(k(),m())}while(h()===wh)}else for(;h()!==Dh;){m();var e=T();m(),h()===oh&&(k(),m());var f=T();m(),b.push(e,f),h()===oh&&(k(),m())}return l(Dh,"domain-end"),b;case Gh:return k(),[sg,tg];case Jh:case Kh:case Lh:case Mh:case Nh:case Oh:case Ph:case Qh:case Rh:case Sh:var g=T();return m(),[g,g]}ha("Expecting valid domain start, found `"+a+"`")}function D(){if(h()===lh){k();for(var a={},b="";;){var c=h();if(!(c>=Th&&c<=hi||c>=ii&&c<=ji))break;b+=String.fromCharCode(c),k()}switch(b){case"list":E(a);break;case"markov":F(a);break;case"max":case"mid":case"min":case"naive":a.valtype=b;break;case"minMaxCycle":case"splitMax":case"splitMin":ha("TODO: implement this modifier ["+b+"]");break;default:ha("Expecting a strategy name after the `@` modifier (`"+b+"`)")}return a.valtype=b,a}}function E(a){m(),i(0)===ci&&i(1)===di&&i(2)===Zh&&i(3)===bi&&i(4)===xh||ha("Expecting the priorities to follow the `@list`"),oa+=5,a.valtype="list",a.list=W(),l(Eh,"list end")}function F(a){a.valtype="markov";for(var b=!0;b;)switch(b=!1,m(),h()){case _h:if(i(1)===Th&&i(2)===fi&&i(3)===di&&i(4)===Zh&&i(5)===gi&&i(6)===xh){
oa+=7;for(var c=oa;h()!==Eh&&!u();)k();u()&&ha("The matrix must be closed by a `)` but did not find any");var d=j(c,oa),e="return "+d,f=Function(e);a.matrix=f(),l(Eh,"end of matrix"),b=!0}break;case $h:i(1)===Wh&&i(2)===Yh&&i(3)===Wh&&i(4)===ai&&i(5)===Vh&&i(6)===xh&&(oa+=7,a.legend=W(),m(),l(Eh,"legend closer"),b=!0);break;case Wh:i(1)===gi&&i(2)===ci&&i(3)===Th&&i(4)===ai&&i(5)===Vh&&i(6)===xh&&(oa+=7,a.expandVectorsWith=T(),m(),l(Eh,"expand closer"),b=!0)}}function G(){for(l(vh,"comment start");!u()&&!p(h());)k();u()||k()}function H(){O()||(I(),t())}function I(){var a=R(void 0,!0);if(m(),!u()){var b=M();if(m(),"="===b)ua=a,K(a);else{var c=R();J(a,b,c)}}}function J(a,b,c){switch(++ma,b){case"==":d(ui),e(2),e(a<c?a:c),e(a<c?c:a);break;case"!=":d(ni),e(2),e(a<c?a:c),e(a<c?c:a);break;case"<":d(pi),e(2),e(a),e(c);break;case"<=":d(qi),e(2),e(a),e(c);break;case">":d(pi),e(2),e(c),e(a);break;case">=":d(qi),e(2),e(c),e(a);break;case"&":d(mi),e(2),e(a<c?a:c),e(a<c?c:a);break;case"!&":d(ri),e(2),e(a<c?a:c),e(a<c?c:a);break;case"|":d(vi),e(2),e(a<c?a:c),e(a<c?c:a);break;case"!|":d(ti),e(2),e(a<c?a:c),e(a<c?c:a);break;case"^":d(xi),e(2),e(a<c?a:c),e(a<c?c:a);break;case"!^":d(wi),e(2),e(a<c?a:c),e(a<c?c:a);break;case"->":d(oi),e(2),e(a),e(c);break;case"!->":d(si),e(2),e(a),e(c);break;default:ha("Unknown constraint op: ["+b+"]")}}function K(a){var b=R(a);m();var c=h();if(!u()&&!q(c)){var d=N();d||ha("Unknown result op parsed ["+d+"]"),m();var e=R();return L(b,d,e,a)}b!==a&&J(b,"==",a)}function L(a,b,c,f){++ma;var g=!1;switch(b){case"==?":d(Ei),e(2),e(a<c?a:c),e(a<c?c:a),e(f),g=!0;break;case"!=?":d(zi),e(2),e(a<c?a:c),e(a<c?c:a),e(f),g=!0;break;case"<?":d(Ai),e(a),e(c),e(f),g=!0;break;case"<=?":d(Bi),e(a),e(c),e(f),g=!0;break;case"&?":d(yi),e(2),e(a),e(c),e(f);break;case"!&?":d(Ci),e(2),e(a),e(c),e(f);break;case"|?":d(Fi),e(2),e(a),e(c),e(f);break;case"!|?":d(Di),e(2),e(a),e(c),e(f);break;case"+":d(Gi),e(2),e(a<c?a:c),e(a<c?c:a),e(f);break;case"-":d(Ii),e(a),e(c),e(f);break;case"*":d(Hi),e(2),e(a<c?a:c),e(a<c?c:a),e(f);break;case"/":d(Ji),e(a),e(c),e(f);break;case">?":return L(c,"<?",a,f);case">=?":return L(c,"<=?",a,f);default:ha("expected a result op but got ["+b+"]")}return g&&f===ua&&f===va&&ka(f,ec(0,1)),f}function M(){var a=h();switch(a){case th:return k(),h()===th?(k(),"=="):"=";case mh:k();var b=h();return b===th?(k(),"!="):b===kh?(k(),"!&"):b===Ih?(k(),"!^"):b===zh?(k(),"!|"):b===rh&&i(1)===uh?(k(),k(),"!->"):ha("Unknown cop that starts with [!]");case yh:return k(),h()===th?(k(),"<="):"<";case uh:return k(),h()===th?(k(),">="):">";case rh:if(i(1)===uh)return k(),k(),"->";break;case kh:return k(),"&";case zh:return k(),"|";case Ih:return k(),"^";case vh:return ha("Expected to parse a cop but found a comment instead")}u()&&ha("Expected to parse a cop but reached eof instead"),ha("Unknown cop char: `"+a+"`")}function N(){switch(h()){case th:return k(),h()===th?(k(),l(Bh,"reifier suffix"),"==?"):"=";case mh:k();var a="";return h()===th?(l(th,"middle part of !=? op"),a="!=?"):h()===kh?(l(kh,"middle part of !&? op"),a="!&?"):h()===zh?(l(zh,"middle part of !|? op"),a="!|?"):ha("invalid rop that starts with a bang"),l(Bh,"reifier suffix"),a;case yh:return k(),h()===th?(k(),l(Bh,"reifier suffix"),"<=?"):(l(Bh,"reifier suffix"),"<?");case uh:return k(),h()===th?(k(),l(Bh,"reifier suffix"),">=?"):(l(Bh,"reifier suffix"),">?");case zh:return k(),l(Bh,"issome suffix"),"|?";case kh:return k(),l(Bh,"isall suffix"),"&?";case Ah:return k(),"+";case rh:return k(),"-";case Gh:return k(),"*";case sh:return k(),"/";default:return""}}function O(){var a=h();return a===Vh&&i(1)===Zh&&i(2)===ei&&i(3)===fi&&i(4)===Zh&&i(5)===ai&&i(6)===Uh&&i(7)===fi&&i(8)===xh?(P(ni,9),!0):a===Vh&&i(1)===Zh&&i(2)===Xh&&i(3)===Xh&&i(4)===xh?(P(ni,5),!0):a===Th&&i(1)===$h&&i(2)===$h&&i(3)===xh?(P(mi,4),!0):a===ai&&i(1)===Th&&i(2)===$h&&i(3)===$h&&i(4)===xh?(P(ri,5),!0):a===ei&&i(1)===Th&&i(2)===_h&&i(3)===Wh&&i(4)===xh?(P(ui,5),!0):a===ei&&i(1)===bi&&i(2)===_h&&i(3)===Wh&&i(4)===xh?(P(vi,5),!0):a===ai&&i(1)===bi&&i(2)===ai&&i(3)===Wh&&i(4)===xh?(P(ti,5),!0):a===gi&&i(1)===ai&&i(2)===bi&&i(3)===di&&i(4)===xh&&(P(wi,5),!0)}function P(a,b){++ma,oa+=b,m();var c=Q();d(a),e(c.length),c.forEach(e),m(),l(Eh,"parseCalledListConstraint call closer"),t()}function Q(){var a=[];for(m();!u()&&h()!==Eh;){var b=R();a.push(b),m(),h()===oh&&(k(),m())}return a.length||ha("Expecting at least one expression in the list"),a}function R(a,b){var c=h(),d=void 0;if(c===xh)d=S();else if(c===wh){var e=C();d=ia(void 0,e,!1,!1,!0)}else if(c>=Jh&&c<=Sh){var f=T();d=ia(void 0,f,!1,!1,!0)}else{var g=y();h()===xh?"sum"===g?d=U(Gi,a,!1):"product"===g?d=U(Hi,a,!1):"all?"===g?d=U(yi,a,!0):"diff?"===g?d=U(zi,a,!0):"nall?"===g?d=U(Ci,a,!0):"none?"===g?d=U(Di,a,!0):"same?"===g?d=U(Ei,a,!0):"some?"===g?d=U(Fi,a,!0):ha("Unknown constraint func: "+g):(d=la(g,!1,!0),d<0&&(b?va=d=ia(g,void 0,!1,!1,!0):ha("unknown var ["+g+"]")))}return d}function S(){l(xh,"group open"),m();var a=R();if(m(),h()!==Eh){var b=N();b||ha("expecting right paren or rop"),m();var c=R(),d=ia(void 0,"?"===b[b.length-1]?[0,1]:void 0,!1,!1,!0);a=L(a,b,c,d),m()}return l(Eh,"group closer"),a}function T(){var a=V();return a||ha("Expecting to parse a number but did not find any digits"),parseInt(a,10)}function U(a,b,c){++ma,l(xh,"args call opener"),m();var f=Q();return void 0===b?b=ia(void 0,c?[0,1]:void 0,!1,!1,!0):b===ua&&b===va&&c&&ka(b,ec(0,1)),d(a),e(f.length),f.sort(function(a,b){return a-b}),f.forEach(e),e(b),m(),l(Eh,"args closer"),b}function V(){for(var a="";!u();){var b=h();if(b<Jh||b>Sh)break;a+=String.fromCharCode(b),k()}return a}function W(){var a=[];m();for(var b=V();b;)a.push(parseInt(b,10)),m(),h()===oh&&(++oa,m()),b=V();return a.length||ha("Expected to parse a list of at least some numbers but found none"),a}function X(a){var b=Y(a);return b.length||ha("Expected to parse a list of at least some identifiers but found none"),b}function Y(a){var b=[];for(m();!u();){var c=h();if(c===a)return b;if(q(c))break;c===oh&&(b.length||ha("Leading comma not supported"),k(),m(),u()&&ha("Trailing comma not supported"),c=h(),c===oh&&ha("Double comma not supported"));var d=y();b.push(d),m()}return void 0===a?b:void ha("Missing target char at eol/eof")}function Z(){for(var a="";!u();){var b=h();if(p(b))break;a+=String.fromCharCode(b),k()}return a}function $(){l(lh);var a=y();if("custom"===a){m();var b=y();switch(m(),h()===th&&(k(),m()),b){case"var-strat":ba();break;case"val-strat":ea();break;case"set-valdist":m();var c=y(),f=fa();_(la(c,!0),JSON.parse(f));break;case"noleaf":m();for(var g=X(void 0),i=0,j=g.length;i<j;++i)for(var n=la(g[i]),o=0;o<3;++o)d(Ki),e(n);break;case"nobool":m();for(var p=X(void 0),q=0,r=p.length;q<r;++q){var s=la(p[q]);d(Li),e(s)}break;case"free":m();var u=T();na=u;break;case"targets":ga();break;default:ha("Unsupported custom rule: "+b)}}else ha("Unknown @ rule ["+a+"]");t()}function _(a,c){b.valdist[a]=c}function aa(a){switch(a){case 0:break;case 1:d(Oi);break;case 2:d(Pi),d(0);break;case 3:d(Qi),d(0),d(0);break;case 4:d(Ri),d(0),d(0),d(0);break;default:g(ta+a+1),a<65535?(d(Mi),e(a-Ti),ta+=a-Ti):(d(Ni),f(a-Ui),ta+=a-Ui)}}function ba(){var a=!1,c=!1,d=!1;if(h()===Xh){var e=y();"fallback"!==e&&ha("Expecting var strat name, found ["+e+"]"),a=!0,m()}if(h()===Zh){var f=y();"inverted"!==f&&ha("Expecting var strat name, found ["+f+"]"),c=!0,m()}if(h()===th&&(k(),d=!0,m()),h()===xh)ca(a,c);else{var g=y();"naive"===g||"size"===g||"min"===g||"max"===g||"throw"===g?(c&&ha("The `inverted` keyword is only used with a list"),a?da(g):b.input.varstrat=g):"list"===g?(m(),d&&ha("The `=` should not be used for a list"),h()!==xh&&ha("Expecting list of idents now"),ca(a,c)):ha("Unknown var strat ["+g+"]")}m()}function ca(a,c){l(xh,"List open"),m();var d=Y(Eh);m(),l(Eh,"List must be closed");var e={type:"list",inverted:c,priorityByName:d};a?da(e):b.input.varstrat=e}function da(a){var c=b.input.varstrat;for("string"==typeof c&&(c=b.input.varstrat={type:c});c.fallback;)c="string"==typeof c.fallback?c.fallback={type:c.fallback}:c.fallback;c.fallback=a}function ea(){b.input.valstrat=y()}function fa(){return m(),h()===th&&(k(),m()),Z()}function ga(){if(m(),h()===th&&ha("Unexpected double eq sign"),h()===Th&&i(1)===$h&&i(2)===$h)oa+=3;else{l(xh);var a=X(Eh);b.freezeTargets(a),l(Eh)}t()}function ha(a){throw a+=", source at "+oa+" #|#: `"+String.fromCharCode.apply(String,_toConsumableArray(pa.slice(Math.max(0,oa-20),oa)))+"#|#"+String.fromCharCode(pa.slice(oa,Math.min(pa.length,oa+20)))+"`",new Error(a)}b.input.varstrat="default",b.input.valstrat="default",b.input.dsl=a;var ia=b.addVar,ja=b.addAlias,ka=b.setDomain,la=b.name2index,ma=0,na=-1,oa=0,pa=void 0;pa="undefined"==typeof Buffer?new TextEncoder("utf-8").encode(a):new Uint8Array(Buffer.from(a,"binary"));var qa=pa.length,ra=Math.ceil(pa.length/5),sa=new Uint8Array(ra).fill(0),ta=0,ua=-1,va=-1;for(d(li);!u();)v();if(na>0&&aa(na),d(Si),--ta,na<0){var wa=ra-ta-1;wa>0&&aa(wa)}d(Si),ra-ta&&(sa=sa.slice(0,ta)),b.ml=sa,b.input.targets||(b.input.targets="all"),cd().log("# dsl2ml: parsed",ma,"constraints")}function vd(a,b){function c(a,b,c,d,e){var f=Uint8Array;switch(a){case 8:f=Float64Array;break;case 4:f=Float32Array;break;case 2:f=Uint16Array;break;case 1:f=Uint8Array;break;default:f=Uint8Array}for(var g=new f(b,d,Math.trunc(e/a)),h=new f(c,d,Math.trunc(e/a)),i=0;i<h.length;i++)h[i]=g[i];return{nextOffset:g.byteOffset+g.byteLength,leftBytes:b.byteLength-(g.byteOffset+g.byteLength)}}a=Object(a);var d=new ArrayBuffer(b);if(!(a instanceof ArrayBuffer&&d instanceof ArrayBuffer))throw new TypeError("Source and destination must be ArrayBuffer instances");if(d.byteLength>=a.byteLength){var e=0,f=a.byteLength,g=[8,4,2,1];g.forEach(function(b){if(f>=b){var g=c(b,a,d,e,f);e=g.nextOffset,f=g.leftBytes}})}return d}function wd(a,b,c,d,e,f){var g=xd(a,b,c,d,e,f);return g}function xd(a,b,c,d,e,f){function g(a,b){var c=Cd(a,b),d=da(c);return d!==c&&Fd(a,b,d),d}function h(a){var b=ea(a,!0);return b||j(a,"bad state (empty domain should have been detected sooner)"),b}function i(a,b,c){return fa(a,b,!1,!0),b?T=!0:V=!0,V}function j(a,b){V=!0,a>=0&&i(a,gc(),"explicitly empty"+(b?"; "+b:""))}function k(){var b=0;U=!0;for(var c=!1;Y<a.length&&!V;){++b,++$,c=!1;var d=Y;W=Y;var e=a[Y];switch(X=e,e){case li:if(0!==Y)return dd(" ! optimizer problem @",Y);c=!0,++Y,--$;break;case Si:return c=!0,--$,b;case pi:o(a,Y);break;case qi:p(a,Y);break;case ti:O(a,Y);break;case xi:P(a,Y);break;case wi:Q(a,Y);break;case oi:R(a,Y);break;case si:S(a,Y);break;case ni:y(a,Y);break;case mi:M(a,Y);break;case zi:G(a,Y);break;case ri:q(a,Y);break;case ui:m(a,Y);break;case vi:s(a,Y);break;case Ai:H(a,Y);break;case Bi:I(a,Y);break;case yi:t(a,Y);break;case Ci:v(a,Y);break;case Ei:F(a,Y);break;case Fi:w(a,Y);break;case Di:x(a,Y);break;case Ii:C(a,Y);break;case Ji:E(a,Y);break;case Gi:J(a,Y);break;case Hi:L(a,Y);break;case Li:Y+=Ti,c=!0;break;case Ki:Y+=Ti,c=!0;break;case Oi:l(a,Y,1),--$,c=!0;break;case Pi:l(a,Y,2),--$,c=!0;break;case Qi:l(a,Y,3),--$,c=!0;break;case Ri:l(a,Y,4),--$,c=!0;break;case Mi:l(a,Y,Ti+Cd(a,Y+1)),--$,c=!0;break;case Ni:l(a,Y,Ui+Dd(a,Y+1)),--$,c=!0;break;default:dd("(mn) unknown op: 0x"+e.toString(16)," at",Y)}Y===d&&(c||(_=!0),--$)}return V?b:dd("Derailed; expected to find STOP before EOF")}function l(a,b,c){switch(Ad(a,b+c)){case Oi:case Pi:case Qi:case Ri:case Mi:case Ni:Id(a,b,c),Y=b;break;default:Y=b+c}}function m(a,b){var c=Cd(a,b+1);if(c>1)for(var d=g(a,b+Wi),e=ea(d,!0),f=1;f<c;++f){var h=g(a,b+Wi+2*f);if(h!==d){var i=ea(h,!0);if(e=A(h,d,i,e),!e)break}}Hd(a,b,Wi+2*c)}function n(a,b){var c=b+Zi,d=b+$i,e=g(a,c),f=g(a,d),k=h(e),l=h(f);if(!k||!l)return!0;if(e===f)return j(e,"X!=X falsum"),!0;var m=!1,n=la(k);if(n>=0){var o=l;if(l=Qb(l,n),o!==l&&i(f,l,"A != B with A solved"))return!0;m=!0}else{var p=la(l);if(la(l)>=0){var q=k;if(k=Qb(k,p),k!==q&&i(e,k,"A != B with B solved"))return!0;m=!0}}return m||Ha(k,l)||(m=!0),!!m&&(Hd(a,b,Xi),!0)}function o(a,b){var c=b+Zi,d=b+$i,e=g(a,c),f=g(a,d),k=h(e),l=h(f);if(e===f)return j(e,"X<X falsum");if(k&&l){var m=k;if(k=Eb(k,pb(l)),k===m||!i(e,k,"A lt B")){var n=l;l=Jb(l,kb(k)),l!==n&&i(f,l,"A lt B")||(pb(k)<kb(l)?Hd(a,b,Xi):(U=!1,Y=b+Xi))}}}function p(a,b){var c=b+Zi,d=b+$i,e=g(a,c),f=g(a,d),j=h(e),k=h(f);if(j&&k){if(e!==f){var l=j;if(j=Pb(j,pb(k)),j!==l&&i(e,j,"A lte B"))return;var m=k;if(k=Ob(k,kb(j)),k!==m&&i(f,k,"A lte B"))return}pb(j)<=kb(k)?Hd(a,b,Xi):e===f?Hd(a,b,Xi):zb(j)&&zb(k)?(Ld(a,b,2,oi,e,f),ga.push(function(a,b,c,d){var g=c(e),h=c(f);xb(g)?(h=Qb(h,0),d(f,h)):(wb(h)||Bb(g))&&(g=Pb(g,0),d(e,g))})):(U=!1,Y=b+Xi)}}function q(a,b){var c=b+1,d=Cd(a,c),e=b+Wi,f=Wi+2*d;if(!d)return j(-1,"nall without args is probably a bug");if(2!==d||!r(a,b)){for(var k=d,l=-1,m=void 0,n=d-1;n>=0;--n){var o=g(a,e+2*n),p=h(o);if(!p)return;if(kb(p)>0||l===o)K(a,e,d,n,!1),--d;else{if(wb(p))return void Hd(a,b,Wi+2*k);l=o,m=p}}if(0===d)return j(l,"nall; none of the args were zero");if(1===d){var q=Pb(m,0);if(m!==q&&i(l,q))return;Hd(a,b,Wi+2*k)}else if(k!==d){Fd(a,c,d);var s=2*(k-d);Jd(a,b+f-s,s)}else U=!1,Y=b+f}}function r(a,b){var c=b+Zi,d=b+$i,e=g(a,c),f=g(a,d),j=h(e),k=h(f);if(!j||!k)return!0;if(e===f){var l=j;return j=Pb(j,0),j!==l&&i(e,j,"`A !& A` means A must be zero"),Hd(a,b,Xi),!0}if(wb(j)||wb(k))return Hd(a,b,Xi),!0;if(xb(j)){var m=k;return k=Pb(k,0),k!==m&&i(f,k,"nall[2] B"),Hd(a,b,Xi),!0}if(xb(k)){var n=j;return j=Pb(j,0),j!==n&&i(e,j,"nall[2] A"),Hd(a,b,Xi),!0}return!1}function s(a,b){var c=b+1,d=Cd(a,c),e=b+Wi,f=Wi+2*d;if(!d)return j(-1,"some without args is probably a bug");if(2!==d||!N(a,b)){for(var k=d,l=-1,m=void 0,n=d-1;n>=0;--n){var o=g(a,e+2*n),p=h(o);if(!p)return;if(wb(p)||l===o)K(a,e,d,n,!1),--d;else{if(xb(p))return void Hd(a,b,Wi+2*k);l=o,m=p}}if(0===d)return j(l,"some; all of the args were zero");if(1===d){var q=Qb(m,0);if(m!==q&&i(l,q))return;Hd(a,b,Wi+2*k)}else if(k!==d){Fd(a,c,d);var r=2*(k-d);Jd(a,b+f-r,r)}else U=!1,Y=b+f}}function t(a,b){var c=b+1,d=Cd(a,c),e=Wi+2+2*d,f=b+Wi,j=b+e-2,k=g(a,j),l=h(k);if(l){if(wb(l))return Ed(a,b,ri),void Jd(a,b+e-2,2);if(xb(l)){for(var m=0;m<d;++m){var n=g(a,f+2*m),o=h(n);if(!o)return;var p=Qb(o,0);if(p!==o&&i(n,p))return}return void Hd(a,b,e)}for(var q=!0,r=!1,s=!1,t=0;t<d;++t){var v=g(a,f+2*t),w=h(v);if(wb(w)){r=!0;break}0===kb(w)?q=!1:s=!0}if(r){var x=l;return l=Pb(l,0),l!==x&&i(k,l),void Hd(a,b,e)}if(q){var y=l;return l=Qb(l,0),l!==y&&i(k,l),void Hd(a,b,e)}if(s){for(var z=0,A=d-1;A>=0;--A){var B=g(a,f+2*A),C=h(B);xb(C)&&(K(a,f,d,A,!0),--d,++z)}Fd(a,b+1,d);var D=e-2*z;return Jd(a,b+D,e-D),void(1===d&&u(a,b,d,f,k))}if(1===d)return u(a,b,d,f,k);U=!1,Y=b+e}}function u(a,b,c,d,e){var f=g(a,d);Pd(a,b,c,wi,e,f),T=!0}function v(a,b){var c=b+1,d=Cd(a,c),e=Wi+2*d+2,f=b+Wi,j=b+e-2,k=g(a,j),l=h(k);if(l){if(wb(l)){for(var m=0;m<d;++m){var n=g(a,f+2*m),o=h(n);if(!o)return;var p=Qb(o,0);if(p!==o&&i(n,p))return}return void Hd(a,b,e)}if(xb(l))return Ed(a,b,ri),void Jd(a,b+e-2,2);for(var q=!0,r=!1,s=0;s<d;++s){var t=g(a,f+2*s),u=h(t);if(wb(u)){r=!0;break}0===kb(u)&&(q=!1)}if(r){var v=l;l=Qb(l,0),l!==v&&i(k,l,"isnall, R>=1 because at least one var was zero"),Hd(a,b,e)}else if(q){var w=l;l=Pb(l,0),l!==w&&i(k,l),Hd(a,b,e)}else U=!1,Y=b+e}}function w(a,b){var c=b+1,d=Cd(a,c),e=Wi+2*d+2,f=b+Wi,j=b+e-2,k=g(a,j),l=h(k);if(l){if(wb(l)){for(var m=0;m<d;++m){var n=g(a,f+2*m),o=h(n);if(!o)return;var p=Pb(o,0);if(p!==o&&i(n,p))return}return void Hd(a,b,e)}if(xb(l))return Ed(a,b,vi),void Jd(a,b+e-2,2);for(var q=!1,r=!0,s=0;s<d;++s){var t=g(a,f+2*s),u=h(t);if(xb(u)){q=!0;break}wb(u)||(r=!1)}if(q){var v=l;l=Qb(l,0),l!==v&&i(k,l,"issome, R>=1 because at least one var was nonzero"),Hd(a,b,e)}else if(r){var w=l;l=Pb(l,0),l!==w&&i(k,l,"issome, R>=1 because all vars were zero"),Hd(a,b,e)}else U=!1,Y=b+e}}function x(a,b){var c=b+1,d=Cd(a,c),e=Wi+2*d+2,f=b+Wi,j=b+e-2,k=g(a,j),l=h(k);if(l){if(xb(l)){for(var m=0;m<d;++m){var n=g(a,f+2*m),o=h(n);if(!o)return;var p=Pb(o,0);if(p!==o&&i(n,p))return}return void Hd(a,b,e)}if(wb(l))return Ed(a,b,vi),void Jd(a,b+e-2,2);for(var q=!1,r=!0,s=0;s<d;++s){var t=g(a,f+2*s),u=h(t);if(xb(u)){q=!0;break}wb(u)||(r=!1)}if(q){var v=l;l=Pb(l,0),l!==v&&i(k,l,"isnone R=0 because an arg had no zero"),Hd(a,b,e)}else if(r){var w=l;l=Qb(l,0),l!==w&&i(k,l,"isnone R>=1 because all args were zero"),Hd(a,b,e)}else U=!1,Y=b+Wi+2*d+2}}function y(a,b){var c=Cd(a,b+1),d=b+Wi,e=Wi+2*c;if(!c)return j(-1,"diff without args is probably a bug");for(var f=c,k=c-1;k>=0;--k){var l=g(a,d+2*k),m=h(l);if(!m)return;var o=la(m);if(o>=0){for(var p=0;p<c;++p)if(p!==k){var q=g(a,d+2*p),r=h(q);if(l===q)return i(l,gc(),"diff had this var twice, x!=x is a falsum");var s=Qb(r,o);if(s!==r&&i(q,s,"diff arg"))return}K(a,d,c,k,!0),--c}}c<=1?Hd(a,b,e):c!==f?(Fd(a,b+1,c),Jd(a,d+2*c,2*(f-c))):2===c&&n(a,b)||(U=!1,Y=b+e)}function z(a,b){var c=b+Zi,d=b+$i,e=b+aj,f=g(a,c),j=g(a,d),k=g(a,e),l=h(f),m=h(j),n=h(k);if(!l||!m||!n)return!1;var o=l,p=m,q=n,r=void 0,s=void 0,t=void 0,u=0;do++u,r=l,s=m,t=n,n=Ha(n,Nc(l,m)),l=Ha(l,Ac(n,m)),m=Ha(m,Ac(n,l));while(l!==r||m!==s||n!==t);if(u>1&&(l!==o&&i(f,l,"plus A"),m!==p&&i(j,m,"plus B"),n!==q&&i(k,n,"plus R"),!l||!m||!n))return!1;var v=la(l),w=la(m);la(n);return v>=0&&w>=0?(Hd(a,b,Yi),!0):!!(v>=0&&B(b,j,f,k,l,m,n,v,"A","B"))||!!(w>=0&&B(b,f,j,k,m,l,n,w,"B","A"))}function A(a,b,c,d){var e=Ha(c,d);return c!==d&&i(b,e,"intersectAndAlias"),e&&!vb(c)&&ca(a,b),e}function B(b,c,d,e,f,g,h,i,j,k){return 0===i?(A(e,c,h,g),Hd(a,b,Yi),T=!0,!0):!(!zb(g)||2!==eb(h)||kb(h)!==i)&&(Od(a,b,2,zi,e,d,c),T=!0,!0)}function C(a,b){var c=b+1,d=b+3,e=b+5,f=g(a,c),j=g(a,d),k=g(a,e),l=h(f),m=h(j),n=h(k);if(l&&m&&n){var o=l,p=m,q=n,r=void 0,s=void 0,t=void 0,u=0;do++u,r=l,s=m,t=n,n=Ha(n,Ac(l,m)),l=Ha(l,Nc(n,m)),m=Ha(m,Ac(l,n));while(l!==r||m!==s||n!==t);u>1&&(l!==o&&i(f,l,"minus A"),m!==p&&i(j,m,"minus B"),n!==q&&i(k,n,"minus R"),!(l&&m&&n))||(vb(n)&&vb(l)?Hd(a,b,Vi):0===la(l)?(A(k,j,n,m),Hd(a,b,Vi),T=!0):0===la(m)?(A(k,f,n,l),Hd(a,b,Vi),T=!0):(U=!1,Y=b+Vi))}}function D(a,b){var c=b+Zi,d=b+$i,e=b+aj,f=g(a,c),j=g(a,d),k=g(a,e),l=h(f),m=h(j),n=h(k);if(!l||!m||!n)return!0;var o=l,p=m,q=n,r=void 0,s=void 0,t=void 0,u=0;do++u,r=l,s=m,t=n,n=Ha(n,Va(l,m)),l=Ha(l,ab(n,m)),m=Ha(m,ab(n,l));while(l!==r||m!==s||n!==t);return u>1&&(l!==o&&i(f,l,"mul A"),m!==p&&i(j,m,"mul B"),n!==q&&i(k,n,"mul R"),!l||!m||!n)||!(!vb(n)||!vb(l))&&(Hd(a,b,Yi,!0),!0)}function E(a,b){var c=b+1,d=b+3,e=b+5,f=g(a,c),j=g(a,d),k=g(a,e),l=h(f),m=h(j),n=h(k);if(l&&m&&n){var o=l,p=m,q=n,r=void 0,s=void 0,t=void 0,u=0;do++u,r=l,s=m,t=n,n=Ha(n,ab(l,m)),l=Ha(l,Va(n,m)),m=Ha(m,ab(l,n));while(l!==r||m!==s||n!==t);return wb(m)?i(k,gc(),"div by zero"):void(u>1&&(l!==o&&i(f,l,"div A"),m!==p&&i(j,m,"div B"),n!==q&&i(k,n,"div R"),!(l&&m&&n))||(vb(m)&&vb(l)?Hd(a,b,Vi):(U=!1,Y=b+Vi)))}}function F(a,b){var c=Cd(a,b+1);if(2!==c)return U=!1,void(Y=b+Wi+2*c+2);var d=b+Zi,e=b+$i,f=b+aj,j=g(a,d),k=g(a,e),l=g(a,f),m=h(j),n=h(k),o=h(l);if(m&&n&&o){if(j===k){var p=o;return o=Qb(o,0),o!==p&&i(l,o,"issame R: A!=B"),void Hd(a,b,Yi)}var q=la(m),r=la(n);if(q>=0&&r>=0){var s=o;return m===n?(o=Qb(o,0),o!==s&&i(l,o,"issame R: A==B")):(o=Qa(o,0),o!==s&&i(l,o,"issame R: A!=B")),void Hd(a,b,Yi)}if(wb(o))return Pd(a,b,2,ni,j,k),void(T=!0);if(xb(o))return A(j,k,m,n),Hd(a,b,Yi),void(T=!0);if(j===k){var t=o;return o=Qb(o,0),o!==t&&i(l,o,"issame R: A==B"),void Hd(a,b,Yi)}if(!Ha(m,n)){var u=o;return o=Pb(o,0),o!==u&&i(l,o,"issame; no overlap A B so R=0"),void Hd(a,b,Yi)}if(zb(o)){if(q>=0&&q<=1&&zb(n))return 0===q?Pd(a,b,2,ni,k,l):(A(l,k,o,n),Hd(a,b,Yi)),void(T=!0);if(r>=0&&r<=1&&zb(m))return 0===r?Pd(a,b,2,ni,j,l):(A(l,j,o,m),Hd(a,b,Yi)),void(T=!0);if(r>=0&&0===kb(m)&&pb(m)===r&&2===eb(m))return Pd(a,b,2,wi,j,l),void(T=!0);if(q>=0&&0===kb(n)&&pb(n)===q&&2===eb(n))return Pd(a,b,2,wi,k,l),void(T=!0)}if(0===q)return Pd(a,b,2,xi,l,k),void(T=!0);if(0===r)return Pd(a,b,2,xi,l,j),void(T=!0);U=!1,Y=b+Yi}}function G(a,b){var c=Cd(a,b+1);if(2!==c)return U=!1,void(Y=b+Wi+2*c+2);var d=b+Zi,e=b+$i,f=b+aj,j=g(a,d),k=g(a,e),l=g(a,f),m=h(j),n=h(k),o=h(l);if(m&&n&&o){if(vb(m)&&vb(n)){var p=o;return m===n?(o=Pb(o,0),o!==p&&i(l,o,"isdiff R; A==B")):(o=Qb(o,0),o!==p&&i(l,o,"isdiff R; A!=B")),void Hd(a,b,Yi)}if(wb(o))return A(j,k,m,n),Hd(a,b,Yi),void(T=!0);if(xb(o))return Pd(a,b,2,ni,j,k),void(T=!0);U=!1,Y=b+Yi}}function H(a,b){var c=b+1,d=b+3,e=b+5,f=g(a,c),j=g(a,d),k=g(a,e),l=h(f),m=h(j),n=h(k);if(l&&m&&n){var o=n;if(vb(n)||(pb(l)<kb(m)?n=Qb(n,0):kb(l)>=pb(m)&&(n=Pb(n,0))),n===o||i(k,n,"islt; solving R because A < B or A >= B")){if(wb(n))return Qd(a,b,qi,j,f),void(T=!0);if(xb(n))return Qd(a,b,pi,f,j),void(T=!0);U=!1,Y=b+Vi}}}function I(a,b){var c=b+1,d=b+3,e=b+5,f=g(a,c),j=g(a,d),k=g(a,e),l=h(f),m=h(j),n=h(k);if(l&&m&&n){var o=n;if(pb(l)<=kb(m)?n=Qb(n,0):kb(l)>pb(m)&&(n=Pb(n,0)),n===o||!i(k,n,"islte; solving R because A and B are solved")){var p=wb(n),q=!p&&xb(n);if(p)return Qd(a,b,pi,j,f),void(T=!0);if(q)return Qd(a,b,qi,f,j),void(T=!0);if(zb(n)&&pb(l)<=1&&pb(m)<=1){if(zb(l)&&wb(m))return Qd(a,b,ni,f,k),void(T=!0);if(zb(l)&&m===dc(1))return A(f,k,l,n),Hd(a,b,Vi),void(T=!0);if(zb(m)&&l===dc(1))return A(j,k,m,n),Hd(a,b,Vi),void(T=!0)}U=!1,Y=b+Vi}}}function J(a,b){var c=b+1,d=Cd(a,c);if(2!==d||!z(a,b)){var e=Wi+2*d+2,f=b+Wi,j=b+e-2,k=g(a,j),l=h(k);if(l){for(var m=dc(0),n=0,o=0,p=0;p<d;++p){var q=f+2*p,r=g(a,q),s=h(r),t=la(s);t>=0&&(++n,o+=t),m=Nc(m,s)}var u=l;if(n===d)return l=Qa(l,o),l!==u&&i(k,l,"setting R to sum of constants"),void Hd(a,b,e);if(l=Ha(m,l),l===u||!i(k,l,"sum; updating R with outer bounds of its args;")){var v=o?Ac(l,dc(o)):l;n=0,o=0;for(var w=kb(v),x=pb(v),y=-1,B=-1,C=0;C<d;++C){var D=g(a,f+2*C),E=h(D),F=la(E);if(F>=0)++n,o+=F;else{var G=Ob(E,w);if(G=Pb(E,x),G!==E&&i(D,G,"plus arg; trim invalid values"))return;F=la(G),F>=0?(++n,o+=F):y===-1?y=D:B===-1&&(B=D)}}var H=d-n+(0===o?0:1);if(1===H){if(o>0){var I=Qa(l,o);I!==l&&i(k,I,"min_sum")}else A(k,y,l,ea(y,!0));Hd(a,b,e)}else if(n>1||1===n&&0===o){for(var J=e-2*(n-(o>0?1:0)),L=d-1;L>=0&&n;--L){var M=f+2*L,N=g(a,M),O=h(N);if(vb(O)){if(1===n&&0!==o){var P=ba(void 0,o,!1,!1,!0);Fd(a,f+2*L,P);break}K(a,f,d,L,!0),--d,--n}}Fd(a,b+1,d),Jd(a,b+J,e-J)}else U=!1,Y=b+e}}}}function K(a,b,c,d,e){var f=c;e&&++f;for(var g=d+1;g<f;++g){var h=b+2*g,i=b+2*(g-1);a[i]=a[h],a[i+1]=a[h+1]}}function L(a,b){var c=b+1,d=Cd(a,c);if(2!==d||!D(a,b)){var e=Wi+2*d+2,f=b+Wi,j=b+e-2,k=g(a,j),l=h(k);if(l){for(var m=dc(1),n=0,o=1,p=0;p<d;++p){var q=g(a,f+2*p),r=h(q),s=la(r);s>=0&&(++n,o*=s),m=Va(m,r)}var t=l;if(n===d)return l=Qa(l,o),l!==t&&i(k,l,"setting R to product of constants"),void Hd(a,b,e);if(0===o)return l=Qa(l,0),l!==t&&i(k,l,"setting R to zero"),void Hd(a,b,e);if(l=Ha(m,l),l===t||!i(k,l,"product; updating R with outer bounds of its args;")){if(wb(l))return Ed(a,b,ri),void Jd(a,b+e-2,2);for(var u=1===o?l:ab(l,dc(o)),v=kb(u),w=pb(u),x=-1,y=-1,z=0;z<d;++z){var B=g(a,f+2*z),C=h(B),E=la(C);if(E<0){var F=Ob(C,v);if(F=Pb(C,w),F!==C&&i(B,F,"product arg; trim invalid values"))return;E=la(F),E>=0?(++n,o+=E):x===-1?x=B:y===-1&&(y=B)}}var G=d-n+(1===o?0:1);if(1===G){if(1!==o){var H=Qa(l,o);H!==l&&i(k,H,"min_product")}else A(k,x,l,ea(x,!0));Hd(a,b,e)}else if(n>1){for(var I=e-2*(n-1),J=d-1;J>=0&&n;--J){var L=g(a,f+2*J),M=h(L);if(vb(M)){if(1===n){var N=ba(void 0,o,!1,!1,!0);Fd(a,f+2*J,N)}else K(a,f,d,J,!0),--d;--n}}var O=e-I;Fd(a,b+1,d),Jd(a,b+I,O)}else U=!1,Y=b+e}}}}function M(a,b){for(var c=Cd(a,b+1),d=0;d<c;++d){var e=g(a,b+Wi+2*d),f=ea(e,!0),h=Qb(f,0);f!==h&&i(e,h,"ALL D")}Hd(a,b,Wi+2*c)}function N(a,b){var c=b+Zi,d=b+$i,e=g(a,c),f=g(a,d),j=h(e),k=h(f);if(!j||!k)return!0;if(wb(j)){var l=k;return k=Qb(l,0),k!==l&&i(f,k,"OR B"),Hd(a,b,Xi),!0}if(wb(k)){var m=j;return j=Qb(m,0),j!==m&&i(e,j,"OR A"),Hd(a,b,Xi),!0}return!(!xb(j)&&!xb(k))&&(Hd(a,b,Xi),!0)}function O(a,b){for(var c=Cd(a,b+1),d=0;d<c;++d){var e=g(a,b+Wi+2*d),f=ea(e,!0),h=Pb(f,0);f!==h&&i(e,h)}Hd(a,b,Wi+2*c)}function P(a,b){var c=b+Zi,d=b+$i,e=g(a,c),f=g(a,d),j=h(e),k=h(f);if(j&&k){if(wb(j)){var l=k;return k=Qb(k,0),k!==l&&i(f,k,"xor B>=1"),void Hd(a,b,Xi)}if(wb(k)){var m=j;return j=Qb(j,0),j!==m&&i(e,j,"xor A>=1"),void Hd(a,b,Xi)}if(xb(j)){var n=k;return k=Pb(k,0),k!==n&&i(f,k,"xor B=0"),void Hd(a,b,Xi)}if(xb(k)){var o=j;return j=Pb(j,0),j!==o&&i(e,j,"xor A=0"),void Hd(a,b,Xi)}U=!1,Y=b+Xi}}function Q(a,b){var c=Cd(a,b+1);if(2!==c)return U=!1,void(Y=b+Wi+2*c);var d=b+Zi,e=b+$i,f=g(a,d),j=g(a,e),k=h(f),l=h(j);if(k&&l){if(wb(k)){var m=l;return l=Pb(l,0),l!==m&&i(j,l,"xnor B"),void Hd(a,b,Xi)}if(wb(l)){var n=k;return k=Pb(k,0),k!==n&&i(f,k,"xnor A"),void Hd(a,b,Xi)}if(xb(k)){var o=l;return l=Qb(l,0),l!==o&&i(j,l,"xnor B"),void Hd(a,b,Xi)}if(xb(l)){var p=k;return k=Qb(k,0),k!==p&&i(f,k,"xnor A"),void Hd(a,b,Xi)}if(k===l&&2===eb(k))return void(f===j?Hd(a,b,Xi):(ca(f,j),T=!0));U=!1,Y=b+Xi}}function R(a,b){var c=b+Zi,d=b+$i,e=g(a,c),f=g(a,d),j=h(e),k=h(f);if(j&&k){if(e===f)return void Hd(a,b,Xi);if(wb(j))return void Hd(a,b,Xi);if(xb(j)){var l=k;return k=Qb(l,0),l!==k&&i(f,k,"IMP B"),void Hd(a,b,Xi)}if(wb(k)){var m=j;return j=Pb(m,0),m!==j&&i(e,j,"IMP A"),void Hd(a,b,Xi)}if(xb(k))return void Hd(a,b,Xi);U=!1,Y=b+Xi}}function S(a,b){var c=b+Zi,d=b+$i,e=g(a,c),f=g(a,d),j=h(e),k=h(f);if(j&&k){var l=j;j=Qb(l,0),l!==j&&i(e,j,"NIMP A");var m=k;k=Pb(m,0),m!==k&&i(f,k,"NIMP B"),Hd(a,b,Xi)}}for(var T=!0,U=!1,V=!1,W=0,X=0,Y=0,Z=0,$=0,_=!1,aa=cd(),ba=b.addVar,ca=b.addAlias,da=b.getAlias,ea=b.getDomain,fa=b.setDomain,ga=b.solveStack;!U&&(T||_);){++Z,aa.time("-> min_loop "+Z),T=!1,U=!0,_=!1,Y=0,$=0;var ha=k();if(V&&(aa.log("Empty domain at",W,"for opcode",X,[Vd(a,W,1,b)],a.slice(W,W+10)),aa.error("Empty domain, problem rejected")),aa.timeEnd("-> min_loop "+Z),aa.log("   - ops this loop:",ha,"constraints:",$),V)return Fg;if(U)return Eg;if(f)break;e=!1}return 1===Z?Cg:Dg}function yd(a,b,c){switch(c){case oi:case pi:case qi:case si:case xi:return Xi;case li:return 1;case Ai:case Bi:case Ii:case Ji:return Vi;case mi:case ni:case ri:case ti:case ui:case vi:case wi:return a&&b>=0?Wi+2*Bd(a,b+1):-1;case yi:case zi:case Ci:case Di:case Ei:case Fi:return a&&b>=0?Wi+2*Bd(a,b+1)+2:-1;case Gi:case Hi:return a&&b>=0?Wi+2*Bd(a,b+1)+2:-1;case Li:case Ki:return Ti;case Mi:return Ti+Bd(a,b+1);case Ni:return Ui+qd(a,b+1);case Oi:return 1;case Pi:return 2;case Qi:return 3;case Ri:return 4;case Si:return 1;default:cd().log("(ml) unknown op",c," at",b,"ctrl+c now or log will fill up"),dd("(ml_sizeof) unknown op: "+a[b]," at",b)}}function zd(a,b){return a[b]}function Ad(a,b){var c=zd(a,b);return c}function Bd(a,b){return a[b++]<<8|a[b]}function Cd(a,b){var c=Bd(a,b);return c}function qd(a,b){return a[b++]<<24|a[b++]<<16|a[b++]<<8|a[b]}function Dd(a,b){var c=qd(a,b);return c}function Ed(a,b,c){a[b]=c}function Fd(a,b,c){a[b++]=c>>8&255,a[b]=255&c}function Gd(a,b,c){a[b++]=c>>24&255,a[b++]=c>>16&255,a[b++]=c>>8&255,a[b]=255&c}function Hd(a,b,c){Jd(a,b,c)}function Id(a,b,c){switch(a[b+c]){case Oi:return Id(a,b,c+1);case Pi:return Id(a,b,c+2);case Qi:return Id(a,b,c+3);case Ri:return Id(a,b,c+4);case Mi:var d=Cd(a,b+c+1);return Id(a,b,c+Ti+d);case Ni:var e=Dd(a,b+c+1);return Id(a,b,c+Ui+e)}Jd(a,b,c)}function Jd(a,b,c){switch(c){case 0:return dd("this is a bug");case 1:return Ed(a,b,Oi);case 2:return Ed(a,b,Pi);case 3:return Ed(a,b,Qi);case 4:return Ed(a,b,Ri);default:c<65535?(Ed(a,b,Mi),Fd(a,b+1,c-Ti)):(Ed(a,b,Ni),Gd(a,b+1,c-Ui))}}function Kd(a){for(var b=0;b<a.length;)switch(a[b]){case li:if(0!==b)return Wd("oops");++b;break;case Si:return!1;case Oi:++b;break;case Pi:b+=2;break;case Qi:b+=3;break;case Ri:b+=4;break;case Mi:b+=Ti+Bd(a,b+1);break;case Ni:b+=Ui+qd(a,b+1);break;default:return!0}dd("ML OOB")}function Ld(a,b,c,d,e,f){Ed(a,b,d),Fd(a,b+1,2),Fd(a,b+Zi,e),Fd(a,b+$i,f);var g=Wi+2*c;Xi<g&&Jd(a,b+Xi,g-Xi)}function Md(a,b,c,d,e){e.sort(function(a,b){return a-b});Ed(a,b,d),Fd(a,b+1,c);for(var f=0;f<c;++f)Fd(a,b+Wi+2*f,e[f])}function Nd(a,b,c,d,e){var f=e.length,g=Wi+2*f;Ed(a,b,d),Fd(a,b+1,f);for(var h=0;h<f;++h)Fd(a,b+Wi+2*h,e[h]);g<c&&Jd(a,b+g,c-g)}function Od(a,b,c,d,e,f,g){Ed(a,b,d),Fd(a,b+1,2),Fd(a,b+Zi,e),Fd(a,b+$i,f),Fd(a,b+_i,g);var h=Wi+2*c+2;Yi<h&&Jd(a,b+Yi,h-Yi)}function Pd(a,b,c,d,e,f){var g=Cd(a,b+1);Ed(a,b,d),Fd(a,b+1,2),Fd(a,b+Zi,e),Fd(a,b+$i,f);var h=Wi+2*g+2;Xi<h&&Jd(a,b+Xi,h-Xi)}function Qd(a,b,c,d,e){Ed(a,b,c),Fd(a,b+1,2),Fd(a,b+Zi,d),Fd(a,b+$i,e)}function Rd(a,b,c){for(var d=a.length,e=a[b];b<d;){e=a[b];var f=yd(a,b,e),g=c(a,b,e,f);if(void 0!==g)return g;b+=f}}function Sd(a,b,c,d){var e=[];return Rd(a,b,function(a,b,f){if(f===Mi||f===Ni){var g=Ud(a,b);if(g>=d){e.push(b);do--c,g-=d;while(c&&g>=d);if(!c)return!0}}}),!c&&e}function Td(a,b,c,d,e){for(var f=0;f<c;){var g=b.pop(),h=Ud(a,g);do{var i=e(g,f,h);if(i)return;++f,h-=d,g+=d}while(h>=d&&f<c);h&&Jd(a,g,h)}}function Ud(a,b){var c=yd(a,b,a[b]);return c}function Vd(a,b,c,d,e,f){function g(b){var c=Bd(a,b);return"{index="+c+(d&&c<j.length?",name="+j[c]:"")+(d?","+Ra(i(c)):"")+"}"}function h(b){return Bd(a,b)}var i=d&&d.getDomain,j=d&&d.varNames,k=void 0,l=[];c<0&&(c=a.length);for(var m=b,n=0;n++<c&&m<a.length;){var o="",p=a[m];switch(p){case li:if(0!==m)return f||Wd(a,m,"ML_START at non-zero"),l.push("unused_error(0)"),l.join("\n");break;case oi:o||(o="->");case si:o||(o="!->");case pi:o||(o="<");case qi:o||(o="<=");case xi:o||(o="^"),l.push(g(m+Zi)+" "+o+" "+g(m+$i));break;case Ai:o||(o="<?");case Bi:o||(o="<=?"),k=g(m+1)+" "+o+" "+g(m+3),l.push(g(m+5)+" = "+k);break;case Gi:o||(o="sum");case Hi:o||(o="product");case yi:o||(o="isall");case zi:o||(o="isdiff");case Ci:o||(o="isnall");case Ei:o||(o="issame");case Fi:o||(o="issome");case Di:o||(o="isnone");for(var q="",r=h(m+1),s=0;s<r;++s)q+=g(m+Wi+2*s)+" ";q=o+"("+q+")",q=g(m+Wi+2*r)+" = "+q,l.push(q);break;case mi:o||(o="all");case ri:o||(o="nall");case ui:o||(o="same");case vi:o||(o="some");case ti:o||(o="none");case wi:o||(o="xnor");case ni:o||(o="diff");for(var t="",u=h(m+1),v=0;v<u;++v)t+=g(m+Wi+2*v)+" ";t=o+"("+t+")",l.push(t);break;case Ii:o||(o="-");case Ji:o||(o="/"),k=g(m+1)+" "+o+" "+g(m+3),l.push(g(m+5)+" = "+k);break;case Mi:l.push("jmp("+Bd(a,m+1)+")");break;case Ni:l.push("jmp32("+qd(a,m+1)+")");break;case Li:l.push("nobool("+Bd(a,m+1)+")");break;case Ki:l.push("noleaf("+Bd(a,m+1)+")");break;case Oi:l.push("noop(1)");break;case Pi:l.push("noop(2)");break;case Qi:l.push("noop(3)");break;case Ri:l.push("noop(4)");break;case Si:l.push("stop()");break;default:dd("add me [pc="+m+", op="+a[m]+"]")}var w=yd(a,m,p);(1!==c||e)&&l.push("[90m"+w+"b ("+m+" ~ "+(m+w)+") -> 0x   "+[].concat(_toConsumableArray(a.slice(m,m+Math.min(w,100)))).map(function(a){return(a<16?"0":"")+a.toString(16)}).join(" ")+(w>100?"... (trunced)":"")+"[0m"),m+=w}return 1===c?l.join("\n"):" ## ML Debug:\n"+l.join("\n")+"\n ## End of ML Debug"+(b||m<a.length?b?" (did not start at begin of ml!)":" (did not list all ops, ml at "+m+" / "+a.length+"))...":"")+"\n"}function Wd(a,b,c){var d=cd();d.error("\nThere was an ML related error;",c);var e=a.slice(Math.max(0,b-30),b),f=a.slice(b,b+20);d.error("ML at error (offset="+b+"/"+a.length+"):",e,f),d.error("->",Vd(a,b,1,void 0,!0,!0)),dd(c)}function Xd(a,b,c){if(!(c<=1)){_d(a,b,c);for(var d=c-1;d>0;)be(a,b,b+2*d),--d,ae(a,b,0,d)}}function Yd(a){return Math.floor((a-1)/2)}function Zd(a){return 2*a+1}function $d(a){return 2*a+2}function _d(a,b,c){for(var d=Yd(c-1);d>=0;)ae(a,b,d,c-1),--d}function ae(a,b,c,d){for(var e=c,f=Cd(a,b+2*e),g=Zd(e);g<=d;){var h=Cd(a,b+2*g),i=e,j=f;j<h&&(i=g,j=h);var k=$d(e);if(k<=d){var l=Cd(a,b+2*k);j<l&&(i=k,j=l)}if(i===e)return;Fd(a,b+2*e,j),Fd(a,b+2*i,f),e=i,g=Zd(e)}}function be(a,b,c){var d=Cd(a,b),e=Cd(a,c);Fd(a,b,e),Fd(a,c,d)}function ce(a,b,c,d){function e(a){return w?"$"+a.toString(36)+"$":x?"_"+a+"_":z[a]}function f(a,b){return b>=0?b:e(a)}function g(a,b){return b>=0?"lit("+b+")":Ra(a)}function h(a){var b=kd(c,a);return void 0===b?"-":b}function i(){var b=a[G++]<<8|a[G++];return b}function j(){return a[G++]<<24|a[G++]<<16|a[G++]<<8|a[G++]}function k(a,b){var d=D(i()),e=C(d),j=la(e);if(j>=0&&b)return!1;if(v){j<0&&(K[d]||(K[d]=[]),K[d].push(J.length),L[d]=(void 0===L[d]?"":L[d]+" ")+a);var k=f(d,j);return k+=" ".repeat(Math.max(45-k.length,3)),
k+="# "+g(e,j),k+=" ".repeat(Math.max(110-k.length,3)),k+="# args: "+d,k+=" ".repeat(Math.max(150-k.length,3)),c&&(k+="# counts: "+h(d)+" "),k+=" \n"}return f(d,j)}function l(a,b,c){var d=C(b),e=la(d),f=C(c),g=la(f);return m(a,b,d,e,c,f,g)}function m(a,b,d,e,i,j,k){if(v){e<0&&(K[b]||(K[b]=[]),K[b].push(J.length),L[b]=(void 0===L[b]?"":L[b]+" ")+a),k<0&&(K[i]||(K[i]=[]),K[i].push(J.length),L[i]=(void 0===L[i]?"":L[i]+" ")+a);var l=f(b,e)+" "+a+" "+f(i,k);return l+=" ".repeat(Math.max(45-l.length,3)),l+="# "+g(d,e)+" "+a+" "+g(j,k),l+=" ".repeat(Math.max(110-l.length,3)),l+="# args: "+b+", "+i,l+=" ".repeat(Math.max(150-l.length,3)),c&&(l+="# counts: "+h(b)+" "+a+" "+h(i)+" "),l+=" \n"}return f(b,e)+" "+a+" "+f(i,k)+"\n"}function n(a){var b=D(i()),c=D(i()),d=D(i());return o(a,b,c,d)}function o(a,b,c,d){var e=C(b),f=la(e),g=C(c),h=la(g),i=C(d),j=la(i);return p(a,b,e,f,c,g,h,d,i,j)}function p(a,b,d,e,i,j,k,l,m,n){if(v){e<0&&(K[b]||(K[b]=[]),K[b].push(J.length),L[b]=(void 0===L[b]?"":L[b]+" ")+a),k<0&&(K[i]||(K[i]=[]),K[i].push(J.length),L[i]=(void 0===L[i]?"":L[i]+" ")+a),n<0&&(K[l]||(K[l]=[]),K[l].push(J.length),L[l]=(void 0===L[l]?"":L[l]+" ")+a);var o=f(l,n)+" = "+f(b,e)+" "+a+" "+f(i,k);return o+=" ".repeat(Math.max(45-o.length,3)),o+="# "+g(m,n)+" = "+g(d,e)+" "+a+" "+g(j,k),o+=" ".repeat(Math.max(110-o.length,3)),o+="# indexes: "+l+" = "+b+" "+a+" "+i,o+=" ".repeat(Math.max(150-o.length,3)),c&&(o+="# counts: "+h(l)+" = "+h(b)+" "+a+" "+h(i)+" "),o+="\n"}return f(l,n)+" = "+f(b,e)+" "+a+" "+f(i,k)+"\n"}function q(a){var b=i();if(2===b){if("all"===a)return l("&",D(i()),D(i()));if("diff"===a)return l("!=",D(i()),D(i()));if("imp"===a)return l("->",D(i()),D(i()));if("lt"===a)return l("<",D(i()),D(i()));if("lte"===a)return l("<=",D(i()),D(i()));if("nall"===a)return l("!&",D(i()),D(i()));if("nimp"===a)return l("!->",D(i()),D(i()));if("same"===a)return l("==",D(i()),D(i()));if("some"===a)return l("|",D(i()),D(i()));if("xnor"===a)return l("!^",D(i()),D(i()));if("xor"===a)return l("^",D(i()),D(i()))}for(var d="",e="",j="",k="",m=0;m<b;++m){var n=D(i()),o=C(n),p=la(o);j+=f(n,p)+" ",v&&(p<0&&(K[n]||(K[n]=[]),K[n].push(J.length),L[n]=(void 0===L[n]?"":L[n]+" ")+a),d+=n+" ",c&&(e+=h(n)+" "),k+=g(o,p)+" ")}if(v){var q=a+"( "+j+")";return q+=" ".repeat(Math.max(45-q.length,3)),q+="# "+a+"( "+k+") ",q+=" ".repeat(Math.max(110-q.length,3)),q+="# indexes: "+d,q+=" ".repeat(Math.max(150-q.length,3)),c&&(q+="# counts: "+a+"( "+e+")"),q+="\n"}return a+"( "+j+")\n"}function r(a){var b=i();return s(a,b)}function s(a,b){if(2===b){if("diff?"===a)return o("!=?",D(i()),D(i()),D(i()));if("same?"===a)return o("==?",D(i()),D(i()),D(i()));if("sum"===a)return o("+",D(i()),D(i()),D(i()));if("product"===a)return o("*",D(i()),D(i()),D(i()))}for(var d="",e="",j="",k="",l=0;l<b;++l){var m=D(i()),n=C(m),p=la(n);j+=f(m,p)+" ",v&&(p<0&&(K[m]||(K[m]=[]),K[m].push(J.length),L[m]=(void 0===L[m]?"":L[m]+" ")+a),d+=m+" ",c&&(e+=h(m)+" "),k+=g(n,p)+" ")}var q=D(i()),r=C(q),s=la(r);if(v){s<0&&(K[q]||(K[q]=[]),K[q].push(J.length),L[q]=(void 0===L[q]?"":L[q]+" ")+a);var t=f(q,s)+" = "+a+"( "+j+")";return t+=" ".repeat(Math.max(45-t.length,3)),t+="# "+g(r,s)+" = "+a+"( "+k+") ",t+=" ".repeat(Math.max(110-t.length,3)),t+="# indexes: "+q+" = "+d,t+=" ".repeat(Math.max(150-t.length,3)),c&&(t+="# counts: "+h(q)+" = "+a+"( "+e+")"),t+="\n"}return f(q,s)+" = "+a+"( "+j+")\n"}function t(){for(;G<I;){var b=G,c=a[G++],d="";switch(c){case li:case Si:case Li:case Ki:case Oi:case Pi:case Qi:case Ri:case Mi:case Ni:break;default:++M}switch(c){case li:if(1!==G)return dd(" ! ml2dsl compiler problem @",b);break;case Si:return;case Mi:var e=i();e<=0&&dd("Must jump some bytes"),G+=e;break;case Ni:var f=j();f<=0&&dd("Must jump some bytes"),G+=f;break;case pi:d=q("lt");break;case qi:d=q("lte");break;case xi:d=q("xor");break;case oi:d=q("imp");break;case si:d=q("nimp");break;case mi:d=q("all");break;case ni:d=q("diff");break;case ri:d=q("nall");break;case ti:d=q("none");break;case ui:d=q("same");break;case vi:d=q("some");break;case wi:d=q("xnor");break;case Ai:d=n("<?");break;case Bi:d=n("<=?");break;case yi:d=r("all?");break;case zi:d=r("diff?");break;case Ci:d=r("nall?");break;case Di:d=r("none?");break;case Ei:d=r("same?");break;case Fi:d=r("some?");break;case Ii:d=n("-");break;case Ji:d=n("/");break;case Gi:d=r("sum");break;case Hi:d=r("product");break;case Li:var g=k("<debug>",!0);g!==!1&&(d="@custom nobool "+g+"\n");break;case Ki:var h=k("<debug>",!0);h!==!1&&(d="@custom noleaf "+h+"\n");break;case Oi:G=b+1;break;case Pi:G=b+2;break;case Qi:G=b+3;break;case Ri:G=b+4;break;default:Wd("(m2d) unknown op",G," at",G)}J.push(d)}}function u(){for(var a=[],c=b.targeted,d=A.length,f=0,g=0,i=0;i<d;++i)A[i]!==!1&&h(i)&&(++f,c[i]?a.push(e(i)):++g);return"@custom targets"+(g&&g.length?"( "+a.join(" ")+" )":" all")+" # "+(f-g)+" / "+f+"\n"}var v=d.debug,w=d.hashNames,x=d.indexNames,y=d.groupedConstraints,z=b.varNames,A=b.domains,B=b.valdist,C=b.getDomain,D=b.getAlias,E=b.solveStack,F=b.targeted,G=0,H="",I=a.length,J=[],K=[],L=[],M=0;if(t(),v){var N=[],O=0,P=0,Q=0,R=0;A.forEach(function(a,b){var d="";if(a===!1||c&&!h(b))a=C(b),la(a)>=0?++Q:++P;else{++O,++R,d=": "+e(b)+" ["+ic(a)+"]";var f=B[b];if(f)switch(f.valtype){case"max":case"mid":case"min":case"naive":d+=" @"+f.valtype;break;case"list":d+=" @"+f.valtype,d+=" prio("+f.list+")";break;case"markov":d+=" # skipping markov dist (no longer supported)";break;case"minMaxCycle":case"splitMax":case"splitMin":default:dd("unknown var dist ["+f.valtype+"] "+JSON.stringify(f))}}N[b]=d});var S=A.map(function(a,b){if(A[b]===!1)return"";var d=h(b);if(!d)return"";var e=N[b],f=L[b].split(/ /g).sort().join(" ");return e+" # T:"+F[b]+"  # ocounts: "+d+(w||!x?"  # index = "+b:"")+"  # ops ("+(f.replace(/[^ ]/g,"").length+1)+"): "+f+" $ meta: "+od(c,b)+(y&&K[b]?"\n ## "+K[b].map(function(a){return J[a]}).join(" ## "):"")}).filter(function(a){return!!a}).join("\n");H="\n# Constraints: "+M+" x\n# Vars: "+A.length+" x\n#   Aliases: "+P+" x\n#   Domained: "+O+" x\n#    - Solved: "+Q+" x\n#    - Unsolved: "+R+" x\n#    - Solve stack: "+E.length+" x (or "+(E.length-P)+" x without aliases)\n",cd().error(H),H+="\n# Var decls:\n"+S+"\n\n"}else H+="# vars:\n",H+=A.map(function(a,b){return[a,b]}).filter(function(a){return a[0]!==!1}).filter(function(a){return!c||h(a[1])>0}).map(function(a){return": "+e(a[1])+" ["+ic(a[0])+"]"}).join("\n"),H+="\n\n";return H+="\n# Constraints:\n"+J.join(""),H+="\n# Meta:\n"+u()}function de(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){"number"==typeof j&&(k=j,j=void 0),k="number"==typeof k?dc(k):void 0===k?ec(sg,tg):yc(k);var p=void 0,q=la(k);if("string"==typeof j||q<0||m){var r=void 0===j;r&&(j="__"+g()),p=b.length;var s=Rf(a,j,p);s>=0&&(o&&o("Dont declare a var ["+j+"] after using it",j,s),dd("Dont declare a var ["+j+"] after using it",j,s)),b.push(j),c.push(k),h[p]=!r&&!i()}if(q>=0&&!m){var t=le(e,q);p>=0&&f(p,t,"$addvar"),p=t}if(l)switch(d[p]=l,l.valtype){case"list":case"max":case"mid":case"min":case"minMaxCycle":case"naive":case"splitMax":case"splitMin":break;default:o&&o("implement me (var mod ["+l.valtype+"])"),dd("implement me (var mod ["+l.valtype+"])")}return n?p:m?j:void 0}function ee(a,b,c,d,e){var f=Xf(a,c);return!e&&f<0&&dd("cant use this on constants or vars that have not (yet) been declared",c,f),!d&&f>=0&&(f=b(f)),f}function fe(a,b,c,d,e,f,g,h){c[f]!==g&&(c[f]=g,a[f]=!1,!b[g]&&b[f]&&(b[g]=b[f]))}function ge(a,b){for(var c=a[b];void 0!==c;)c===b&&dd("alias is itself?",c,b),b=c,c=a[b];return b}function he(a,b,c,d,e){e||(d=c(d));var f=b[d];return void 0!==f?dc(f):a[d]}function ie(a,b,c,d,e,f,g,h,i,j){if(!g){if(i)return;dd("Cannot set to empty domain")}var k=la(g);return k>=0?je(b,d,f,k):ke(a,b,c,e,f,g,h)}function je(a,b,c,d){if(void 0!==a[c]){if(a[c]===d)return;dd("Cant update a constant (only to an empty domain, which should be handled differently)")}var e=le(a,d);b(c,e,"$setDomain; because var is now constant "+d)}function ke(a,b,c,d,e,f,g){g?c[e]=void 0:e=d(e),e<a.length&&(a[e]=f)}function le(a,b){var c=a["v"+b];return c>=0?c:(c=cj-a._count++,a["v"+b]=c,a[c]=b,c)}function me(){var a=0,b=[],c=Lf(),d=[],e={_count:0},f={},g=[],h=[],i=[],j=fe.bind(void 0,d,i,f,g,e),k=ge.bind(void 0,f),l=ee.bind(void 0,c,k),m=[],n=!1;return{varTrie:c,varNames:b,domains:d,valdist:i,aliases:f,solveStack:g,leafs:h,input:{varstrat:"default",valstrat:"default",dsl:""},ml:void 0,mapping:void 0,addVar:de.bind(void 0,c,b,d,i,e,j,function(b){return++a},m,function(a){return n}),getVar:l,name2index:l,addAlias:j,getAlias:k,getDomain:he.bind(void 0,d,e,k),setDomain:ie.bind(void 0,d,e,f,j,k),isConstant:function(a){return void 0!==e[a]},freezeTargets:function(a){n&&dd("Only one `targets` directive supported"),n=!0,m.fill(!1),a.forEach(function(a){return m[l(a,!0)]=!0})},targeted:m}}function ne(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{log:1,vars:"all"};d.logger&&bd(d.logger);var e=cd();e.log("<pre>"),e.time("</pre>");var f=oe(a,b,c,d);return e.timeEnd("</pre>"),f}function oe(a,b,c,d){var e=cd();e.log("<pre-solving>"),e.time("</pre-solving total>");var f=c.hashNames,g=void 0===f||f,h=c.debugDsl,i=void 0!==h&&h,j=c.indexNames,k=void 0!==j&&j,l=c.groupedConstraints,m=void 0===l||l,n=me(),o=(n.varNames,n.domains,pe(a,n,c));e.time("ml->dsl");var p=jd(n.ml,n),q=ce(n.ml,n,p,{debug:i,hashNames:g,indexNames:k,groupedConstraints:m});e.timeEnd("ml->dsl"),e.timeEnd("</pre-solving total>");var r=void 0;if((o===Eg||o!==Fg&&!Kd(n.ml))&&(e.time("- generating early solution"),r=re(n,null,c,d.max||1/0),e.timeEnd("- generating early solution")),q.length<1e3||!b||c._toString){var s="\nResult dsl (debugDsl="+i+", hashNames="+g+", indexNames="+k+"):\n"+q;"function"==typeof c._toString?c._toString(s):e.log(s)}if(r)return e.error("<solved without fdq>"),r;if(o===Fg)return e.error("<rejected without fdq>"),!1;"throw"===n.input.varstrat&&dd("Forcing a choice with strat=throw"),b||dd("problem not solved and fdq not passed on... Burn!"),e.error("\n\nSolving remaining problem through fdq now..."),e.log("<FD>"),e.time("</FD>");var t=new b(d).imp(q),u=t.solve(d);e.timeEnd("</FD>"),e.log("\n");var v=u[0];return e.log("fd result:",t.config&&t.config.aborted?"ABORTED":v?"SOLVED":"REJECTED"),v&&v?(e.error("<solved after fdq>"),re(n,v,c,d.max||1/0)):(e.error("<rejected after fdq>"),!1)}function pe(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=c.singleCycle,e=void 0!==d&&d,f=c.repeatUntilStable,g=void 0===f||f,h=b.varNames,i=b.domains,j=b.solveStack,k=b.$addVar,l=b.$getVar,m=b.$addAlias,n=b.$getAlias,o=cd();o.time("- dsl->ml"),ud(a,b);var p=b.ml;o.timeEnd("- dsl->ml"),o.log("Parsed dsl ("+a.length+" bytes) into ml ("+p.length+" bytes)");var q=void 0;if(e){if(o.time("- first minimizer cycle (single loop)"),q=wd(p,b,i,h,!0,!g),o.timeEnd("- first minimizer cycle (single loop)"),q!==Fg){o.time("- deduper cycle #");var r=td(p,b);o.timeEnd("- deduper cycle #"),r>=0&&(o.time("- cutter cycle #"),sd(p,b,!g),o.timeEnd("- cutter cycle #"))}}else{var s=0;o.time("- all run cycles");do q=qe(p,l,k,i,h,m,n,j,s++,b);while(q===Dg);o.timeEnd("- all run cycles")}return q}function qe(a,b,c,d,e,f,g,h,i,j){var k=cd();k.time("- run_cycle #"+i),k.time("- minimizer cycle #"+i);var l=wd(a,j,d,e,0===i);if(k.timeEnd("- minimizer cycle #"+i),l===Eg)return l;if(l===Fg)return l;k.time("- deduper cycle #"+i);var m=td(a,j);if(k.timeEnd("- deduper cycle #"+i),m<0)l=Fg;else{k.time("- cutter cycle #"+i);var n=sd(a,j,!1);k.timeEnd("- cutter cycle #"+i),n>1||m?l=Dg:n<0&&(l=Fg)}return k.timeEnd("- run_cycle #"+i),l}function re(a,b,c,d){function e(a,c){if(c||(a=s(a)),b){var d=m?"$"+a.toString(36)+"$":p[a],e=b[d];if("number"==typeof e)return dc(e);if(void 0!==e)return yc(e)}return u(a,!0)}function f(a,c,d,e){if(d||(a=s(a)),v(a,c,!0,!1,e),b){var f=m?"$"+a.toString(36)+"$":p[a];if(void 0!==b[f]){var g=la(c);g>=0?b[f]=g:b[f]=ic(c)}}}function g(b,c){var d=s(b),g=e(d,!0),h=la(g);if(h<0){c&&(g=c);var i=a.valdist[b];if(i)switch(i.valtype){case"list":i.list.some(function(a){return fa(g,a)&&(h=a)>=0}),h<0&&(h=kb(g));break;case"max":h=pb(g);break;case"min":case"naive":h=kb(g);break;case"mid":h=ib(g);break;case"markov":case"minMaxCycle":case"splitMax":case"splitMin":dd("implement me (var mod) ["+i.valtype+"]"),h=kb(g);break;default:dd("Unknown dist name: ["+i.valtype+"]",i)}else h=kb(g);f(b,dc(h),!0)}return h}function h(){for(var a=r.reverse(),b=0;b<a.length;++b){var c=a[b];c(q,g,e,f)}}function i(){for(var b=0;b<q.length;++b)if(o||a.valdist[b])v(b,dc(g(b)),!0);else{var c=e(b),d=la(c);d>=0&&v(b,c,!0)}}function j(){for(var a=0;a<q.length;++a){var b=q[a];if(b===!1){var c=s(a),d=g(c);v(a,dc(d),!0)}}}function k(){for(var a={},b=0;b<p.length;++b)if(t[b]){var c=p[b],d=e(b),f=la(d);d=f>=0?f:o?kb(d):ic(d),a[c]=d}return a}cd().time("createSolution()");var l=c.hashNames,m=void 0===l||l,n=c.flattened,o=void 0!==n&&n,p=a.varNames,q=a.domains,r=a.solveStack,s=a.getAlias,t=a.targeted,u=a.getDomain,v=a.setDomain;h(),i(),j();var w=k();return cd().timeEnd("createSolution()"),w}function se(a,b,c,d,e,f,g,h,i,j,k){return{_class:"$propagator",name:a,stepper:b,index1:void 0===c?-1:c,index2:void 0===d?-1:d,index3:void 0===e?-1:e,arg1:void 0===f?"":f,arg2:void 0===g?"":g,arg3:void 0===h?"":h,arg4:void 0===i?"":i,arg5:void 0===j?"":j,arg6:void 0===k?"":k}}function te(a,b,c,d,e){var f=a.initialDomains,g=f[c],h=f[d],i=f[e],j=la(g),k=j>=0,l=la(h),n=l>=0,o=wb(i),p=xb(i),q=o||p;if(!(k&&n&&q)){var r=kb(g),s=pb(g),t=kb(h),u=pb(h),v=pb(i),w=void 0,x=void 0,y=void 0,z=void 0,A=void 0;switch(b){case"eq":if(q)return void(j>=0?p?f[d]=Ha(g,h):f[d]=Qb(h,j):l>=0?p?f[c]=Ha(g,h):f[c]=Qb(g,l):p?ue(a,c,d):Ce(a,c,d));if(j>=0&&l>=0)return void(f[e]=Cb(i,j===l));if(v<=1){if(s<=1&&1===u){if(0===j)return Ce(a,d,e);if(1===j)return ue(a,d,e)}if(u<=1&&1===s){if(0===l)return Ce(a,c,e);if(1===l)return ue(a,c,e)}}w="neq",x=Oe,y=bf,z=Pe,A=cf;break;case"neq":if(q)return void(j>=0?p?f[d]=Qb(h,j):f[d]=Qa(h,j):l>=0?p?f[c]=Qb(g,l):f[c]=Qa(g,l):p?Ce(a,c,d):ue(a,c,d));if(j>=0&&l>=0)return void(f[e]=Cb(i,j!==l));if(v<=1){if(s<=1&&1===u){if(0===j)return ue(a,d,e);if(1===j)return Ce(a,d,e)}if(u<=1&&1===s){if(0===l)return ue(a,c,e);if(1===l)return Ce(a,c,e)}}w="eq",x=bf,y=Oe,z=cf,A=Pe;break;case"lt":if(q){if(p){if(s<t)return;return ve(a,c,d)}if(r>=u)return;return Be(a,c,d)}if(s<t)return f[e]=Cb(i,!0);if(r>=u)return f[e]=Cb(i,!1);if(v<=1){if(0===j&&u<=1)return ue(a,d,e);if(0===l&&s<=1)return ue(a,c,e)}x=Qe,z=Se,w="gte",y=Ve,A=Xe;break;case"lte":if(q){if(p){if(s<=t)return;return xe(a,c,d)}if(r>u)return;return we(a,c,d)}if(s<=t)return f[e]=Cb(i,!0);if(r>u)return f[e]=Cb(i,!1);if(v<=1){if(1===j&&u<=1)return ue(a,d,e);if(1===l&&s<=1)return ue(a,c,e)}x=Ue,z=We,w="gt",y=Re,A=Te;break;case"gt":return te(a,"lt",d,c,e);case"gte":return te(a,"lte",d,c,e);default:dd("UNKNOWN_REIFIED_OP")}m(a,se("reified",df,c,d,e,x,y,b,w,z,A))}}function ue(a,b,c){var d=a.initialDomains,e=d[b],f=d[c],g=Ha(e,f);return la(e)>=0?d[c]=g:la(f)>=0?d[b]=g:(d[b]=d[c]=g,void m(a,se("eq",Oe,b,c)))}function ve(a,b,c){var d=a.initialDomains,e=d[b],f=d[c],g=pb(e),h=kb(f);if(!(g<h)){var i=kb(e),j=pb(f);if(i>=j)return d[b]=d[c]=gc();g>=j&&(d[b]=Eb(e,j)),h<=i&&(d[c]=Jb(f,i)),m(a,se("lt",Qe,b,c))}}function we(a,b,c){ve(a,c,b)}function xe(a,b,c){var d=a.initialDomains,e=d[b],f=d[c],g=pb(e),h=kb(f);if(!(g<h)){var i=kb(e),j=pb(f);if(i>j)return d[b]=d[c]=gc();g>=j&&(d[b]=Eb(e,j+1)),h<=i&&(d[c]=Jb(f,i-1)),m(a,se("lte",Ue,b,c))}}function ye(a,b,c,d){ze(a,b,c,d)||m(a,se("mul",_e,b,c,d))}function ze(a,b,c,d){var e=a.initialDomains,f=e[b],g=e[c],h=e[d],i=pb(f),j=pb(g),k=la(f),l=la(g),m=la(h);if(k>=0){if(l>=0)return e[d]=Ha(h,dc(k*l)),!0;if(0===k)return e[d]=Ha(h,dc(0)),!0;if(m>=0){if(0===m)0!==k&&(e[c]=Ha(g,dc(0)));else{var n=k%m?gc():dc(k/m);e[c]=Ha(g,n)}return!0}e[d]=Ha(h,Ya(g,k)),e[c]=0===j||0===k?g:Ha(g,db(e[d],k))}else if(l>=0){if(0===l)return e[d]=Ha(h,dc(0)),!0;if(m>=0){if(0===m)0!==l&&(e[b]=Ha(f,dc(0)));else{var o=m%l?gc():dc(m/l);e[b]=Ha(f,o)}return!0}e[d]=Ha(h,Ya(f,l)),e[b]=0===i||0===l?f:Ha(f,db(e[d],l))}else e[b]=Ha(f,ab(h,g)),e[c]=Ha(g,ab(h,f)),e[d]=Ha(h,Va(f,g));return!1}function Ae(a,b,c,d){m(a,se("div",Me,b,c,d))}function Be(a,b,c){xe(a,c,b)}function Ce(a,b,c){var d=a.initialDomains,e=d[b],f=d[c],g=la(e);if(g>=0)return d[c]=Qb(f,g);var h=la(e);return h>=0?d[b]=Qb(e,h):void(Db(Ha(e,f))||m(a,se("neq",bf,b,c)))}function De(a,b){for(var c=0;c<b.length;c++)for(var d=b[c],e=0;e<c;++e)Ce(a,d,b[e])}function Ee(a,b,c,d,e,f,g,h){Fe(a,f,g,h,b,d),Fe(a,h,g,f,c,e),Fe(a,h,f,g,c,e)}function Fe(a,b,c,d,e,f){m(a,se("ring",ef,b,c,d,e,f))}function Ge(a,b,c,d){Ee(a,"plus","min",Nc,Ac,b,c,d)}function He(a,b,c,d){m(a,se("min",Ze,b,c,d))}function Ie(a,b,c,d){ze(a,b,c,d)||Ee(a,"mul","div",Va,ab,b,c,d)}function Je(a,b,d){var e=b.length;switch(e){case 0:return void dd("SUM_REQUIRES_VARS");case 1:return void ue(a,d,b[0]);case 2:return void Ge(a,b[0],b[1],d)}var f=void 0,g=Math.floor(b.length/2);g>1?(f=c(a),Je(a,b.slice(0,g),f)):f=b[0];var h=c(a);Je(a,b.slice(g),h),Ge(a,f,h,d)}function Ke(a,b,d){switch(b.length){case 0:return void dd("PRODUCT_REQUIRES_VARS");case 1:return void ue(a,d,b[0]);case 2:return void Ie(a,b[0],b[1],d)}var e=Math.floor(b.length/2),f=void 0;e>1?(f=c(a),Ke(a,b.slice(0,e),f)):f=b[0];var g=c(a);Ke(a,b.slice(e),g),Ie(a,f,g,d)}function Le(a,b){m(a,se("markov",Ye,b))}function Me(a,b,c,d,e){var f=a.vardoms[c],g=a.vardoms[d],h=a.vardoms[e];a.vardoms[e]=Ne(f,g,h)}function Ne(a,b,c){var d=Za(a,b);return Ha(c,d)}function Oe(a,b,c,d){var e=a.vardoms,f=e[c],g=e[d],h=Ha(f,g);e[c]=h,e[d]=h}function Pe(a,b){var c=Wb(a,b);return c}function Qe(a,b,c,d){var e=a.vardoms[c],f=a.vardoms[d],g=kb(e),h=pb(f);a.vardoms[c]=Eb(e,h),a.vardoms[d]=Jb(f,g)}function Re(a,b,c,d){return Qe(a,b,d,c)}function Se(a,b){var c=kb(a)>=pb(b);return c}function Te(a,b){return Se(b,a)}function Ue(a,b,c,d){var e=a.vardoms[c],f=a.vardoms[d],g=kb(e),h=pb(f);a.vardoms[c]=Eb(e,h+1),a.vardoms[d]=Jb(f,g-1)}function Ve(a,b,c,d){return Ue(a,b,d,c)}function We(a,b){var c=kb(a)>pb(b);return c}function Xe(a,b){return We(b,a)}function Ye(a,b,c){var d=a.vardoms[c];if(vb(d)){var e=kb(d),f=b.varDistOptions,g=f[b.allVarNames[c]],h=g.expandVectorsWith,i=gd(null!=h,g.legend,d),j=id(a,g.matrix,h,i.length),k=i.indexOf(e);(k<0||k>=j.length||0===j[k])&&(a.vardoms[c]=gc())}}function Ze(a,b,c,d,e){var f=a.vardoms[c],g=a.vardoms[d],h=a.vardoms[e],i=$e(f,g,h);a.vardoms[e]=i}function $e(a,b,c){var d=Ac(a,b);return d?Ha(c,d):d}function _e(a,b,c,d,e){var f=a.vardoms,g=f[c],h=f[d],i=f[e];a.vardoms[e]=af(g,h,i)}function af(a,b,c){var d=Va(a,b);return Ha(c,d)}function bf(a,b,c,d){var e=a.vardoms,f=e[c],g=e[d],h=la(f);h!==yg?f===g?(e[c]=gc(),e[d]=gc()):e[d]=Qb(g,h):(h=la(g),h!==yg&&(e[c]=Qb(f,h)))}function cf(a,b){var c=la(a),d=c!==yg&&c===la(b);return d}function df(a,b,c,d,e,f,g,h,i,j,k){var l=a.vardoms,m=l[e];if(wb(m))g(a,b,c,d);else if(xb(m))f(a,b,c,d);else{var n=l[c],o=l[d];k(n,o)?(l[e]=Qb(m,0),f(a,b,c,d)):j(n,o)&&(l[e]=Pb(m,0),g(a,b,c,d))}}function ef(a,b,c,d,e,f,g){var h=a.vardoms,i=h[c],j=h[d],k=h[e];a.vardoms[e]=ff(i,j,k,g,f)}function ff(a,b,c,d,e){var f=d(a,b);return Ha(c,f)}function gf(a,b,c){var d=a.stack,e=0,f=!d||0===d.length;if(f){d||(d=a.stack=[]);var g=hf(a.space,b,d,a);if(c&&c(++e)&&(c=void 0),g)return}for(;d.length>0&&!b.aborted;){var h=kf(d[d.length-1],b);if(h){var i=hf(h,b,d,a);if(c&&c(++e)&&(c=void 0),i)return}else d.pop()}a.status="end",a.more=!1}function hf(a,b,c,d){var e=zf(a,b);return e&&b.aborted,jf(e,a,b,c,d)}function jf(a,b,c,d,e){if(a)return lf(e,b,d),!1;var f=Hf(b,c);return f?(mf(e,b,d),!0):void d.push(b)}function kf(a,b){var c=X(a,b);if(c!==yg){var d=a.vardoms[c];if(!vb(d)){var e=a.next_distribution_choice++,f=M(a,b,c,e);if(f){var g=tf(a);return g.updatedVarIndex=c,g.vardoms[c]=f,g}}}}function lf(a,b,c){b.failed=!0}function mf(a,b,c){a.status="solved",a.space=b,a.more=c.length>0}function nf(a){switch("undefined"==typeof a?"undefined":_typeof(a)){case"object":if(!a)return null;if(a instanceof Array)return a.map(function(a){return nf(a)});var b={};for(var c in a)b[c]=nf(a[c]);return b;case"function":var d={__THIS_IS_A_FUNCTION:1,__source:a.toString()};for(var e in a)d[e]=nf(a[e]);return d;case"string":case"number":case"boolean":case"undefined":return a}dd("config value what?",a)}function of(){return ej||(ej="function"==typeof require?function(a){return require("util").inspect(a,!1,null)}:function(a){return a}),ej}function pf(a,b,c,d){for(var e=[];a.more&&e.length<c;)gf(a,b,d),"end"!==a.status&&e.push(a.space);return e}function qf(a,b,c,d){d>=wg&&cd().time("      - FD Solution Construction Time");for(var e=0;e<a.length;++e){var f=If(a[e],b);c.push(f),d>=xg&&(cd().log("      - FD solution() ::::::::::::::::::::::::::::"),cd().log(JSON.stringify(f)),cd().log("                      ::::::::::::::::::::::::::::"))}d>=wg&&cd().timeEnd("      - FD Solution Construction Time")}function rf(){var a=0,b=0,c="";return vf([],void 0,a,b,c)}function sf(a){var b=rf();return wf(b,a),b}function tf(a){var b=a.vardoms.slice(0),c=a._unsolved.slice(0),d=void 0,e=void 0,f=void 0;return vf(b,c,d,e,f)}function uf(a,c){for(var d=a.vardoms,e=[],f=c.allVarNames,g=0,h=f.length;g<h;g++){var i=d[g];e[g]=nc(i)}return b(c,void 0,e)}function vf(a,b,c,d,e){var f={_class:"$space",vardoms:a,_unsolved:b,next_distribution_choice:0,updatedVarIndex:-1,_lastChosenValue:-1};return f}function wf(a,b){Kf(a,b),xf(a,b)}function xf(a,b){var c=b.targetedVars,d=a.vardoms,e=[];if(a._unsolved=e,"all"===c)for(var f=0,g=d.length;f<g;++f)vb(d[f])||(b._varToPropagators[f]||b._constrainedAway&&b._constrainedAway.indexOf(f)>=0)&&e.push(f);else for(var h=b._varNamesTrie,i=0,j=c.length;i<j;++i){var k=c[i];yf(k,h,d,e)}}function yf(a,b,c,d){var e=Xf(b,a);e===kj&&dd("E_VARS_SHOULD_EXIST_NOW ["+a+"]"),vb(c[e])||d.push(e)}function zf(a,b){if(Ff(a,b))return!0;var c=b._propagators,d=Math.ceil(a._unsolved.length*hj*.3),e=Lf(lj,d),f=0,g=[],h=1;if(a.updatedVarIndex>=0)g.push(a.updatedVarIndex);else{var i=Af(a,b,c,g,e,++f);if(i)return!0}for(var j=!1;g.length;){var k=[],l=Ef(a,b,c,h,g,k,e,++f);if(l){j=!0;break}g=k,h=2}return Gf(a,b)&&(j=!0),j}function Af(a,b,c,d,e,f){for(var g=0,h=c.length;g<h;g++){var i=c[g],j=Cf(a,b,i,d,e,f);if(j)return!0}return!1}function Bf(a,b,c,d,e,f,g){for(var h=0,i=d.length;h<i;h++){var j=d[h],k=c[j],l=Cf(a,b,k,e,f,g);if(l)return!0}return!1}function Cf(a,b,c,d,e,f){var g=a.vardoms,h=c.index1,i=c.index2,j=c.index3,k=g[h],l=void 0!==i&&g[i],m=void 0!==j&&g[j],n=c.stepper;if(n(a,b,h,i,j,c.arg1,c.arg2,c.arg3,c.arg4,c.arg5,c.arg6),k!==g[h]){if(Db(g[h]))return!0;Df(h,e,d,f)}if(void 0!==i&&l!==g[i]){if(Db(g[i]))return!0;Df(i,e,d,f)}if(void 0!==j&&m!==g[j]){if(Db(g[j]))return!0;Df(j,e,d,f)}return!1}function Df(a,b,c,d){if("number"==typeof a){var e=$f(b,a);e!==d&&(c.push(a),Tf(b,a,d))}else for(var f=0,g=a.length;f<g;++f)Df(a[f],b,c,d)}function Ef(a,b,c,d,e,f,g,h){for(var i=b._varToPropagators,j=0,k=e.length;j<k;j++){var l=e[j],m=i[l];if(m&&m.length>=d){var n=Bf(a,b,c,m,f,g,h);if(n)return!0}}return!1}function Ff(a,b){var c=b.beforeSpace;return!(!c||!c(a))&&(b.aborted=!0,!0)}function Gf(a,b){var c=b.afterSpace;return!(!c||!c(a))&&(b.aborted=!0,!0)}function Hf(a,b){for(var c=a.vardoms,d=a._unsolved,e=0,f=0,g=d.length;f<g;++f){var h=d[f],i=c[h];vb(i)||(d[e++]=h)}return d.length=e,0===e}function If(a,b){for(var c=b.allVarNames,d={},e=0,f=c.length;e<f;e++){var g=c[e];d[g]=Jf(a,e)}return d}function Jf(a,b){var c=a.vardoms[b];if(Db(c))return!1;var d=la(c);return d!==yg?d:ic(c)}function Kf(a,b){for(var c=a.vardoms,d=b.initialDomains,e=b.allVarNames,f=0,g=e.length;f<g;f++){var h=d[f];c[f]=sc(h)}}function Lf(a,b,c){var d=0|b||ij;d||dd("fixme");var e=Math.max(Qf(d),0|c),f=Mf(d,e),g={_class:"$trie",buffer:f,bits:e,lastNode:fj,count:0};if(a)for(var h=0,i=a.length;h<i;++h)Rf(g,a[h],h);return g}function Mf(a,b){switch(b){case mj:return new Uint8Array(a);case 16:return new Uint16Array(a);case oj:return new Uint32Array(a);case pj:return new Float64Array(a)}dd("Unsupported bit size")}function Nf(a){var b=a.lastNode+hj;for(a.lastNode=b;b+hj>=a.buffer.length;)Of(a);return b}function Of(a){var b=a.buffer.length,c=~~(1.1*b);b+jj>c&&(c=jj+b),Pf(a,c)}function Pf(a,b){var c=Qf(b);a.bits=Math.max(a.bits,c);var d=Mf(b,a.bits);d.set(a.buffer,0),a.buffer=d}function Qf(a){return a<256?mj:a<65536?nj:a<4294967296?oj:pj}function Rf(a,b,c){return Vf(a,c),Sf(a,fj,b,0,b.length,c)}function Sf(a,b,c,d,e,f){if(d>=e){var g=a.buffer,h=b+gj,i=a.buffer[h];return i||++a.count,g[h]=f+1,i-1}var j=c.charCodeAt(d)-32;return b=Wf(a,b,j%10),b=Wf(a,b,Math.floor(j/10)),Sf(a,b,c,d+1,e,f)}function Tf(a,b,c){return Vf(a,c),Uf(a,fj,b+1,c)}function Uf(a,b,c,d){if(0===c){var e=a.buffer,f=b+gj,g=a.buffer[f];return g||++a.count,e[f]=d+1,g-1}return b=Wf(a,b,c%10),c=Math.floor(c/10),Uf(a,b,c,d)}function Vf(a,b){var c=Qf(b);c>a.bits&&(a.bits=c,Pf(a,a.buffer.length))}function Wf(a,b,c){b+=c;var d=a.buffer[b];return d||(d=Nf(a),a.buffer[b]=d),d}function Xf(a,b){return Yf(a,fj,b,0,b.length)}function Yf(a,b,c,d,e){var f=a.buffer;if(d>=e){var g=b+gj;return f[g]-1}var h=c.charCodeAt(d)-32;return(b=f[b+h%10])?(b=f[b+Math.floor(h/10)],b?Yf(a,b,c,d+1,e):kj):kj}function Zf(a,b){return Xf(a,b)!==kj}function $f(a,b){return _f(a,fj,b+1)}function _f(a,b,c){var d=a.buffer;if(0===c){var e=b+gj;return d[e]-1}return(b=d[b+c%10])?(c=Math.floor(c/10),_f(a,b,c)):kj}var ag=0,bg=1,cg=void 0,dg=1,eg=2,fg=3,gg=0,hg=2,ig=Math.min,jg=Math.max,kg=Math.floor,lg=Math.ceil,mg=2,ng=4,og=0,pg="",qg=void 0,rg=void 0,sg=0,tg=1e8,ug=-1,vg=0,wg=1,xg=2,yg=Math.min(0,sg)-1,zg=2,Ag=30,Bg=1<<31>>>0,Cg=0,Dg=1,Eg=2,Fg=3,Gg=console,Hg=0,Ig=++Hg,Jg=++Hg,Kg=1<<++Hg,Lg=1<<++Hg,Mg=1<<++Hg,Ng=1<<++Hg,Og=1<<++Hg,Pg=1<<++Hg,Qg=1<<++Hg,Rg=1<<++Hg,Sg=1<<++Hg,Tg=1<<++Hg,Ug=1<<++Hg,Vg=1<<++Hg,Wg=1<<++Hg,Xg=1<<++Hg,Yg=1<<++Hg,Zg=1<<++Hg,$g=1,_g=32,ah=20,bh=4,ch=$g+_g/2,dh=ah*bh,eh=ch+dh,fh=0,gh=1,hh=2,ih=0,jh=0,kh=38,lh=64,mh=33,nh=58,oh=44,ph=10,qh=13,rh=45,sh=47,th=61,uh=62,vh=35,wh=91,xh=40,yh=60,zh=124,Ah=43,Bh=63,Ch=32,Dh=93,Eh=41,Fh=39,Gh=42,Hh=7,Ih=94,Jh=48,Kh=49,Lh=50,Mh=51,Nh=52,Oh=53,Ph=54,Qh=55,Rh=56,Sh=57,Th=97,Uh=99,Vh=100,Wh=101,Xh=102,Yh=103,Zh=105,$h=108,_h=109,ai=110,bi=111,ci=112,di=114,ei=115,fi=116,gi=120,hi=122,ii=65,ji=98,ki=0,li=ki++,mi=ki++,ni=ki++,oi=ki++,pi=ki++,qi=ki++,ri=ki++,si=ki++,ti=ki++,ui=ki++,vi=ki++,wi=ki++,xi=ki++,yi=ki++,zi=ki++,Ai=ki++,Bi=ki++,Ci=ki++,Di=ki++,Ei=ki++,Fi=ki++,Gi=ki++,Hi=ki++,Ii=ki++,Ji=ki++,Ki=ki++,Li=ki++,Mi=ki++,Ni=ki++,Oi=ki++,Pi=ki++,Qi=ki++,Ri=ki++,Si=255,Ti=3,Ui=5,Vi=7,Wi=3,Xi=Wi+4,Yi=Wi+4+2,Zi=Wi,$i=Wi+2,_i=Wi+4,aj=_i,bj=0,cj=(++bj,++bj,++bj,++bj,++bj,++bj,++bj,++bj,++bj,65535),dj=function(){function b(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_classCallCheck(this,b),this._class="solver",c.logger&&bd(c.logger),this.logging=c.log||vg,this.distribute=c.distribute||"naive",c.config){var d=this.config=c.config;if(d.initialDomains)for(var e=d.initialDomains,f=0,g=e.length;f<g;++f){var h=e[f];0===h.length&&(h=gc()),e[f]=tc(h)}d._propagators&&(d._propagators=void 0),d._varToPropagators&&(d._varToPropagators=void 0)}else this.config=a();this.solutions=[],this.state={space:null,more:!1},this._prepared=!1}return _createClass(b,[{key:"num",value:function(a){"number"!=typeof a&&dd("Solver#num: expecting a number, got "+a+" (a "+("undefined"==typeof a?"undefined":_typeof(a))+")"),isNaN(a)&&dd("Solver#num: expecting a number, got NaN");var b=h(this.config,a);return this.config.allVarNames[b]}},{key:"decl",value:function(a,b,c,d,e){""===a&&dd("Var name can not be the empty string");var f=void 0;f="number"==typeof b?[b,b]:b?b:[sg,tg],f.length||d||dd("EMPTY_DOMAIN_NOT_ALLOWED");var h=g(this.config,a||!0,f,d,e);return a=this.config.allVarNames[h],c&&(c.distribute&&dd("Use `valtype` to set the value distribution strategy"),l(this.config,"varValueStrat",c,a)),a}},{key:"decls",value:function(a,b,c){for(var d=0,e=a.length;d<e;++d)this.decl(a[d],b,c)}},{key:"declRange",value:function(a,b,c,d){return this.decl(a,[b,c],d)}},{key:"plus",value:function(a,b,c){var d=p(this.config,"plus",[a,b,c]);return d}},{key:"minus",value:function(a,b,c){var d=p(this.config,"min",[a,b,c]);return d}},{key:"mul",value:function(a,b,c){var d=p(this.config,"ring-mul",[a,b,c]);return d}},{key:"div",value:function(a,b,c){var d=p(this.config,"ring-div",[a,b,c]);return d}},{key:"sum",value:function(a,b){var c=p(this.config,"sum",a,b);return c}},{key:"product",value:function(a,b){var c=p(this.config,"product",a,b);return c}},{key:"distinct",value:function(a){p(this.config,"distinct",a)}},{key:"eq",value:function(a,b){if(a instanceof Array)for(var c=0,d=a.length;c<d;++c)this.eq(a[c],b);else if(b instanceof Array)for(var e=0,f=b.length;e<f;++e)this.eq(a,b[e]);else p(this.config,"eq",[a,b])}},{key:"neq",value:function(a,b){if(a instanceof Array)for(var c=0,d=a.length;c<d;++c)this.neq(a[c],b);else if(b instanceof Array)for(var e=0,f=b.length;e<f;++e)this.neq(a,b[e]);else p(this.config,"neq",[a,b])}},{key:"gte",value:function(a,b){p(this.config,"gte",[a,b])}},{key:"lte",value:function(a,b){p(this.config,"lte",[a,b])}},{key:"gt",value:function(a,b){p(this.config,"gt",[a,b])}},{key:"lt",value:function(a,b){p(this.config,"lt",[a,b])}},{key:"isNeq",value:function(a,b,c){var d=p(this.config,"reifier",[a,b,c],"neq");return d}},{key:"isEq",value:function(a,b,c){var d=p(this.config,"reifier",[a,b,c],"eq");return d}},{key:"isGte",value:function(a,b,c){var d=p(this.config,"reifier",[a,b,c],"gte");return d}},{key:"isLte",value:function(a,b,c){var d=p(this.config,"reifier",[a,b,c],"lte");return d}},{key:"isGt",value:function(a,b,c){var d=p(this.config,"reifier",[a,b,c],"gt");return d}},{key:"isLt",value:function(a,b,c){var d=p(this.config,"reifier",[a,b,c],"lt");return d}},{key:"solve",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=this.logging=void 0===b.log?this.logging:b.log,d=b.max||1e3;this._prepare(b,c);var e=void 0;if((b._tostring||b._debug||b._debugConfig||b._debugSpace||b._debugSolver)&&(e=function(c){return(0|b._debugDelay)>=c&&(b._tostring&&cd().log(Yc(a.config)),b._debug&&a._debugLegible(),b._debugConfig&&a._debugConfig(),b._debugSolver&&a._debugSolver(),!0)},e(0)&&(e=void 0)),!b._nosolve)return this._run(d,c,e),this.solutions}},{key:"_prepare",value:function(a,b){b>=wg&&(cd().log("      - FD Preparing..."),cd().time("      - FD Prepare Time")),this._prepareConfig(a,b);var c=sf(this.config);this.state.space=c,this.state.more=!0,this.state.stack=[],this._prepared=!0,b>=wg&&cd().timeEnd("      - FD Prepare Time")}},{key:"_prepareConfig",value:function(a,b){var c=this.config;a.vars&&"all"!==a.vars&&l(c,"targeted_var_names",a.vars),a.beforeSpace&&l(c,"beforeSpace",a.beforeSpace),a.afterSpace&&l(c,"afterSpace",a.afterSpace),I(c)}},{key:"_run",value:function(a,b,c){this._prepared=!1;var d=this.state,e=void 0;b>=wg&&(e=cd(),e.log("      - FD Var Count: "+this.config.allVarNames.length),e.log("      - FD Targeted: "+("all"===this.config.targetedVars?"all":this.config.targetedVars.length)),e.log("      - FD Constraint Count: "+this.config.allConstraints.length),e.log("      - FD Propagator Count: "+this.config._propagators.length),e.log("      - FD Solving..."),e.time("      - FD Solving Time"));for(var f=!1,g=d.space.vardoms,h=0,i=g.length;h<i;++h)if(Db(g[h])){f=!0,b>=wg&&e.log("      - FD: rejected without propagation ("+this.config.allVarNames[h]+" is empty)");break}var j=void 0;f?(b>=wg&&e.log("      - FD Input Problem Rejected Immediately"),j=[]):j=pf(d,this.config,a,c),b>=wg&&(e.timeEnd("      - FD Solving Time"),e.log("      - FD Solutions: "+j.length)),qf(j,this.config,this.solutions,b)}},{key:"hasVar",value:function(a){return Xf(this.config._varNamesTrie,a)>=0}},{key:"setValueDistributionFor",value:function(a,b){l(this.config,"varValueStrat",b,a)}},{key:"branch_from_current_solution",value:function(){var a=uf(this.state.space,this.config);return new b({config:a})}},{key:"_debugLegible",value:function(){var a=!0,b=JSON.parse(JSON.stringify(this.config)),c=b.allVarNames,d=b.targetedVars,e=b.allConstraints,f=b.initialDomains,g=b._propagators;
for(var h in b)"_"===h[0]&&"object"===_typeof(b[h])&&(b[h]="<removed>");b.allVarNames="<removed>",b.allConstraints="<removed>",b.initialDomains="<removed>",b.varDistOptions="<removed>","all"!==d&&(b.targetedVars="<removed>");var i=cd();i.log("\n## _debug:\n"),i.log("- config:"),i.log(of()(b)),i.log("- vars ("+c.length+"):"),i.log(c.map(function(b,c){return(a?c:"")+": "+Ra(f[c])+" "+(b===String(c)?"":" // "+b)}).join("\n")),"all"!==d&&i.log("- targeted vars ("+d.length+"): "+d.join(", ")),i.log("- constraints ("+e.length+" -> "+g.length+"):"),i.log(e.map(function(b,c){return void 0===b.param?(a?c:"")+": "+b.name+"("+b.varIndexes+")      --->  "+b.varIndexes.map(function(a){return Ra(f[a])}).join(",  "):"reifier"===b.name?(a?c:"")+": "+b.name+"["+b.param+"]("+b.varIndexes+")      --->  "+Ra(f[b.varIndexes[0]])+" "+b.param+" "+Ra(f[b.varIndexes[1]])+" = "+Ra(f[b.varIndexes[2]]):(a?c:"")+": "+b.name+"("+b.varIndexes+") = "+b.param+"      --->  "+b.varIndexes.map(function(a){return Ra(f[a])}).join(",  ")+" -> "+Ra(f[b.param])}).join("\n")),i.log("##/\n")}},{key:"_debugSolver",value:function(){var a=cd();a.log("## _debugSolver:\n");var b=this.config,c=b.allVarNames;a.log("# Variables ("+c.length+"x):"),a.log("  index name domain toArr");for(var d=0;d<c.length;++d)a.log("  ",d,":",c[d],":",Ra(b.initialDomains[d]));var e=b.allConstraints;a.log("# Constraints ("+e.length+"x):"),a.log("  index name vars param");for(var f=0;f<e.length;++f)a.log("  ",f,":",e[f].name,":",e[f].varIndexes.join(","),":",e[f].param);var g=b._propagators;a.log("# Propagators ("+g.length+"x):"),a.log("  index name vars args");for(var h=0;h<g.length;++h)a.log("  ",h,":",g[h].name+("reified"===g[h].name?"("+g[h].arg3+")":""),":",g[h].index1,g[h].index2,g[h].index3,"->",Ra(b.initialDomains[g[h].index1]),Ra(b.initialDomains[g[h].index2]),Ra(b.initialDomains[g[h].index3]));a.log("##")}},{key:"_debugConfig",value:function(){var a=nf(this.config);a.initialDomains=a.initialDomains.map(Ra),cd().log("## _debugConfig:\n",of()(a))}},{key:"imp",value:function(a,b){this.logging&&(cd().log("      - FD Importing DSL; "+a.length+" bytes"),cd().time("      - FD Import Time:"));var c=ed(a,this,b);return this.logging&&cd().timeEnd("      - FD Import Time:"),c}},{key:"exp",value:function(a,b,c,d){return Yc(this.config,a.vardoms,b,c,d)}}],[{key:"domainFromList",value:function(a){return ta(a)}},{key:"getTerm",value:function(){return cd()}},{key:"setTerm",value:function(a){return bd(a)}},{key:"dsl",value:function(a,c,d){return new b(c).imp(a,d)}},{key:"pre",value:function(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d.debugInputDsl&&cd().log("# Pre:\n"+a+"\n#/Pre");var e=void 0===c.Solver?b:c.Solver;return ne(a,e,c,d)}}]),b}(),ej=void 0,fj=0,gj=10,hj=gj+1,ij=16384,jj=4096,kj=-1,lj=void 0,mj=8,nj=16,oj=32,pj=64;return dj}();exports["default"]=Solver;
//# sourceMappingURL=fdq.dist.min.js.map